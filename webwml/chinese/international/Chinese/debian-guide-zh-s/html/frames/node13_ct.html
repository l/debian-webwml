
<!--Converted with LaTeX2HTML 99.2beta6 (1.42)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Contents of 9 X Window 系统</TITLE>
<META NAME="description" CONTENT="Contents of 9 X Window 系统">
<META NAME="keywords" CONTENT="debian-tutorial-zh_CN-html">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=gb2312">
<META NAME="Generator" CONTENT="LaTeX2HTML v99.2beta6">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="debian-tutorial-zh_CN-html.css">

<LINK REL="next" HREF="node14_mn.html">
<LINK REL="previous" HREF="node12_mn.html">
<LINK REL="up" HREF="node4_mn.html">
<LINK REL="next" HREF="node14_mn.html">
</HEAD>
 
<BODY bgcolor="#ffffff" text="#000000" link="#9944EE" vlink="#0000ff" alink="#00ff00">
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsections</STRONG></A>

<UL>
<LI><A NAME="tex2html804" HREF="node13_ct.html#SECTION04910000000000000000" TARGET="contents"><SPAN CLASS="arabic">1</SPAN> X 简介</A>
<LI><A NAME="tex2html805" HREF="node13_ct.html#SECTION04920000000000000000" TARGET="contents"><SPAN CLASS="arabic">2</SPAN> 启动 X 环境</A>
<LI><A NAME="tex2html806" HREF="node13_ct.html#SECTION04930000000000000000" TARGET="contents"><SPAN CLASS="arabic">3</SPAN> 基本的 X 操作</A>
<UL>
<LI><A NAME="tex2html807" HREF="node13_ct.html#SECTION04931000000000000000" TARGET="contents"><SPAN CLASS="arabic">1</SPAN> 鼠标</A>
<LI><A NAME="tex2html808" HREF="node13_ct.html#SECTION04932000000000000000" TARGET="contents"><SPAN CLASS="arabic">2</SPAN> X 客户程序</A>
<LI><A NAME="tex2html809" HREF="node13_ct.html#SECTION04933000000000000000" TARGET="contents"><SPAN CLASS="arabic">3</SPAN> 发现问题</A>
<LI><A NAME="tex2html810" HREF="node13_ct.html#SECTION04934000000000000000" TARGET="contents"><SPAN CLASS="arabic">4</SPAN> 离开 X 环境</A>
<LI><A NAME="tex2html811" HREF="node13_ct.html#SECTION04935000000000000000" TARGET="contents"><SPAN CLASS="arabic">5</SPAN> 定制你的 X 启动方式</A>
</UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H1><A NAME="SECTION04900000000000000000"></A><A NAME="X_Window_System"></A>
<BR>
<SPAN CLASS="arabic">9</SPAN> X Window 系统
</H1>

<P>
<A NAME="3093"></A><A NAME="3094"></A><A NAME="3095"></A>本章节介绍 X Window 系统图形用户接口。它假定你已经成功地按照安装手册的描述配置好了 X（不过，安装手册尚未写出来；现在你将需要用上 XFree86 HOWTO，<TT>/usr/doc/X11</TT> 的内容，以及本章节的内容）。一旦你安装了 X，你就可以通过输入 <TT>startx</TT> 或者通过 <TT>xdm</TT> 进入 X 环境，这依你在配置时的选项而定。

<P>

<H1><A NAME="SECTION04910000000000000000">
<SPAN CLASS="arabic">1</SPAN> X 简介</A>
</H1>

<P>
<A NAME="3100"></A><A NAME="3101"></A>GUI（图形化用户接口）是 Windows 和 Mac 操作系统的重要部分。基本不可能为那些系统写一个不使用 GUI 的应用程序，而且系统不可能从命令行获得使用的高效性。GNU/Linux 更为<SPAN  CLASS="textit">模块化</SPAN>，也就是说，它由许多细小而独立的部分组成，这些可以根据个人需要和选择来决定使用还是不使用。其中一个部分就是 X Window 系统，或者简称 X。

<P>
该部分有时也称为 X11。请注意 ``X Windows'' 的叫法并<SPAN  CLASS="textit">不</SPAN>正确。

<P>
X 本身是实现程序与你的鼠标和显示卡通讯而不必知道它们类型的一种方法。也就是说，它是一种图形硬件的<SPAN  CLASS="textit">抽象</SPAN><A NAME="3105"></A><A NAME="3106"></A><A NAME="3107"></A><A NAME="3108"></A>。用户应用程序使用 X 的语言与 X 进行通讯；X 然后翻译它们为你特定硬件的语言。这意味着这些程序仅仅只需写入一次，即可在任何人的计算机上工作。

<P>
<A NAME="3109"></A><A NAME="3110"></A><A NAME="3111"></A><A NAME="3112"></A><A NAME="3113"></A>用 X 的行话说，与硬件进行会话的程序称为 <SPAN  CLASS="textit">X 服务程序</SPAN>。要求 X 服务程序在屏幕上显示窗口或图形的用户应用程序称为 <SPAN  CLASS="textit">X 客户程序</SPAN>。X 服务程序包括<SPAN  CLASS="textit">显卡驱动程序</SPAN>，因此你必须有一个匹配你显卡的 X 服务程序。

<P>
X 服务程序不提供人们想要从 GUI 获得的任何功能，如调整和重排窗口。一个特殊的 X 客户程序，称为 <SPAN  CLASS="textit">window manager（窗口管理器）</SPAN><A NAME="3118"></A><A NAME="3119"></A><A NAME="3120"></A>的，为窗口绘制边界和标题栏，调整和重排窗口，并且提供从菜单启动其它 X 客户程序的功能。特定的 window manager 可能会有附加的功能。

<P>
Debian 系统中的 Window manager 包括有 <TT>fvwm</TT>、<TT>fvwm2</TT>、<TT>icewm</TT>、<TT>afterstep</TT>、<TT>olvwm</TT>、<TT>wmaker</TT>、<TT>twm</TT> 和 <TT>enlightenment</TT>。你可能想要都尝试一下，并选择你最爱的。

<P>
<A NAME="3129"></A><A NAME="3130"></A><A NAME="3131"></A><A NAME="3132"></A><A NAME="3133"></A><A NAME="3134"></A><A NAME="3135"></A><A NAME="3136"></A>无论是 X 服务程序，还是 window manager，都不提供 <SPAN  CLASS="textit">file manager（文件管理器）</SPAN>，也就是说，任何窗口都不包括你的文件和目录的图标。你可以装载 file manager 为一个独立的应用程序，系统中包括许多这样的程序。GNOME 桌面计划<A NAME="3138"></A><A NAME="3139"></A>正在开发一个基于图标的文件管理器和其它 GUI 工具。参看 <A NAME="tex2html39" HREF="http://www.gnome.org/" TARGET="_top">GNOME 主页 </A>以获得关于此的最新消息。

<P>
<A NAME="3142"></A><A NAME="3143"></A><A NAME="3144"></A><A NAME="3145"></A><A NAME="3146"></A>X 的最后一个特性是其<SPAN  CLASS="textit">网络透明性</SPAN>，这意味着 X 客户程序不需要关心它们通讯的是本机上 X 服务程序，还是网络上某处的 X 服务程序。在实际条件下，这意味着你可以在一个更为强大的远程机器上运行程序，而不会显示在桌面机器上。

<P>

<H1><A NAME="SECTION04920000000000000000">
<SPAN CLASS="arabic">2</SPAN> 启动 X 环境</A>
</H1>

<P>
<A NAME="3149"></A><A NAME="3150"></A><A NAME="3151"></A><A NAME="3152"></A>启动 X 的方法有两种。第一种是当你觉得需要使用的时候手工启动 X。为了实现此，登录到一个文本控制台并输入 <TT>startx</TT>。这将启动 X 并且转换你到其虚拟控制台上。

<P>
<A NAME="3154"></A><A NAME="3155"></A><A NAME="3156"></A>
    第二种方法（也是推荐的方法）是采用 <TT>xdm</TT> 或者 X Display Manager 来使用 X。一般而言，<TT>xdm</TT> 在 X 虚拟控制台（可能是 VC7）上给出你一个不错的图形化的登录提示界面，而你就在这里登录。

<P>
默认地，这两种方法都会启动一个 <TT>xterm</TT><A NAME="3160"></A><A NAME="3161"></A><A NAME="3162"></A><A NAME="3163"></A>，这是一个包含 shell 提示符的小窗口。在 shell 提示符下，你可以输入你想在文本 VC 上输入的任何命令。所以你可以按照本书中给出的例子来使用 <TT>xterm</TT>；唯一的 <TT>xterm</TT> 和文本控制台之间的不同就是你不需一定要登录到 <TT>xterm</TT>，因为你已经登录到 X 上了。

<P>
有不少事你只能在 X 下完成，这些将在本章节中讨论。

<P>
注意事项：默认的 <TT>xterm</TT> 窗口使用的字体很细小。如果你有的是一个小的监视器或者非常高的分辨率或者不好的视力，那么你可能想要改变此。照以下步骤去做：

<P>

<OL>
<LI>移动鼠标指针到 <TT>xterm</TT> 窗口的中央。
</LI>
<LI>同时按下 <TT>Control</TT> 键和鼠标<SPAN  CLASS="textit">右</SPAN>键。这将提供给你一个字体的菜单。
</LI>
<LI>指定你想要的字体，然后释放鼠标按键。
</LI>
</OL><A NAME="3173"></A><A NAME="3174"></A><A NAME="3175"></A><A NAME="3176"></A>

<P>

<H1><A NAME="SECTION04930000000000000000">
<SPAN CLASS="arabic">3</SPAN> 基本的 X 操作</A>
</H1>

<P>
你应该熟悉一些在 X 下的常用操作。该部分介绍了一些你可能发现有用的基本操作。

<P>

<H2><A NAME="SECTION04931000000000000000">
<SPAN CLASS="arabic">1</SPAN> 鼠标</A>
</H2>

<P>
<A NAME="3179"></A><A NAME="3180"></A><A NAME="3181"></A><A NAME="3182"></A>X 下的鼠标的使用与在其它系统中是非常相似的，例外的是它要用到鼠标的三个按键。如果你的鼠标只有两个按键，你可以使用同时按下两个键来模拟中间键的效果。这需要点技巧，也有点麻烦，所以投资买一个 15 美元的三键鼠标可能不算一个坏主意。这些鼠标绝大多数计算机零售商那儿都有得卖。

<P>
假定你用右手使用鼠标，按键即按照从左到右的顺序进行编号。因此按键一指的是左边的按键，按键二指的是中间的按键，而按键三即指的是右边的按键。你可能会在文档中看到编号或者位置标识。

<P>
X 带有简单的内置的复制-粘贴<A NAME="3183"></A>功能。要选择文本进行复制，你可以用鼠标左键点击并拖曳。假定你所使用的应用程序具有复制-粘贴的功能支持，那么这样应该可以选定复制的文本。要粘贴该文本，你可以在一个不同的 X 应用程序下点击一下鼠标中间键。例如，如果你接收到一封包括一个 URL 的 e-mail，你可以用左键选中该 URL，然后在你的万维网浏览器的“位置”域中用中间键点击来进行粘贴。

<P>

<H2><A NAME="SECTION04932000000000000000">
<SPAN CLASS="arabic">2</SPAN> X 客户程序</A>
</H2>

<P>
<A NAME="3185"></A><A NAME="3186"></A><A NAME="3187"></A><A NAME="3188"></A><A NAME="3189"></A>与 X 服务程序进行通讯的程序称为 X 客户程序。大多数这类程序都会要求 X 服务程序在屏幕上显示窗口。

<P>
你启动 X 客户程序的方式与启动任何其它 Debian 程序的方式一样。需在命令行中输入客户程序的名字即可。试着在一个已有的 <TT>xterm</TT> 窗口中输入 <TT>xterm</TT>，接着一个新的 <TT>xterm</TT> 客户程序就会出现在屏幕上。

<P>
你可能注意到原 <TT>xterm</TT> 现在已经无法使用了，这是因为你的 shell 在等待第二个 <TT>xterm</TT> 的完成。为了避免此种问题，你可以通过在命令名后添加 <TT>&amp;</TT> 来后台运行 X 客户程序，就像这样：<TT>xterm&nbsp;&amp;</TT>。如果你忘记这样做了，你可以把一个在运行的进程放到后台去。首先使用 <TT>CTRL-z</TT> 挂起进程，然后使用 <TT>bg</TT> 命令把它放到后台去。

<P>
如果你经常使用一个程序，你的窗口管理器通常会提供一种方法把该程序放到一个方便快捷的图形化菜单中。

<P>

<H2><A NAME="SECTION04933000000000000000"></A>
<A NAME="3200"></A>
<BR>
<SPAN CLASS="arabic">3</SPAN> 发现问题
</H2><A NAME="3201"></A><A NAME="3202"></A><A NAME="3203"></A>有时当你从一个图形化的菜单中启动一个 X 客户程序的时候，如果失败了，那么你不能看到任何错误消息。你可以在文件 <TT>~/.xsession-errors</TT> 中找到它们。

<P>

<H2><A NAME="SECTION04934000000000000000">
<SPAN CLASS="arabic">4</SPAN> 离开 X 环境</A>
</H2>

<P>
<A NAME="3206"></A><A NAME="3207"></A><A NAME="3208"></A><A NAME="3209"></A><A NAME="3210"></A>要离开 X，你需要用到一个菜单。不幸的是，对于新手来说，每个窗口管理器的情况都各有不同，而且针对于大多数窗口管理器，这可以使用许多种方式来进行配置。如果有一个明显的菜单，那么可以查看一个类似于 ``Exit'' 或者 ``Close Window
Manager'' 的条目。如果你不能找到一个菜单，试着在屏幕背景上点击一下每个鼠标按键。如果所有这些都失败了，你可以通过按下 <TT>CTRL-ALT-Backspace</TT> 来强制杀死 X 服务程序。强制杀死服务程序会破坏在打开的应用程序中尚未保存的数据。

<P>

<H2><A NAME="SECTION04935000000000000000">
<SPAN CLASS="arabic">5</SPAN> 定制你的 X 启动方式</A>
</H2>

<P>
<A NAME="3213"></A><A NAME="3214"></A><A NAME="3215"></A><A NAME="3216"></A><A NAME="3217"></A>当你启动 X 时，Debian 运行一些 shell 脚本来启动你的窗口管理器和其它 X 客户程序。默认地，会为你启动一个窗口管理器，一个 <TT>xconsole</TT> 和一个 <TT>xterm</TT>。

<P>
要定制你的 X 启动方式，那么文件 <TT>/etc/X11/config</TT> 必须包括行 <TT>allow-user-xsession</TT>。如果没有此项，登录为 root 并添加此行。然后登录返回为你自己，继续往下看。

<P>
你可以看到在文件 <TT>/etc/X11/Xsession</TT> 中 Debian 的 X 启动是怎么工作的。注意你可以通过修改文件 <TT>/etc/X11/config</TT> 来修改 <TT>/etc/X11/Xsession</TT> 的行为，它提供了一些系统级的参数选择。

<P>
要在 X 启动时运行你所选择的客户程序，你可以在你的 home 目录下创建一个可执行的 shell 脚本 <TT>.xsession</TT>。<A NAME="3226"></A><A NAME="3227"></A><A NAME="3228"></A><A NAME="3229"></A><A NAME="3230"></A>

<P>

<DL COMPACT>
<DT>
<DD>$&nbsp;<SPAN  CLASS="textbf">touch&nbsp;~/.xsession</SPAN>
</DD>
</DL>    这样就创建了文件。

<P>

<DL COMPACT>
<DT>
<DD>$&nbsp;<SPAN  CLASS="textbf">chmod&nbsp;u+x&nbsp;~/.xsession</SPAN>
</DD>
</DL>    这样使得文件成为可执行的。

<P>
一旦创建了 <TT>.xsession</TT>，你就需要使用你心爱的文本编辑器来编辑它以完成一些有用的工作。你可以在该脚本中做你所想做的任何事。但是，当脚本的进程中断了，那么 X 也会中断。

<P>
在实际应用中，你通常需要使用一个对 <TT>exec</TT> 的调用来终结脚本。无论你 <TT>exec</TT> 的是什么程序，它都将覆盖脚本的进程，这样在 <TT>exec</TT> 行后面的命令都将被忽略。你执行的程序将成为该脚本进程的新的所有者，这意味着 X 会在新程序的进程中断时中断。

<P>
假定你使用行 <TT>exec&nbsp;fvwm</TT> 来终结 <TT>.xsession</TT>。这表示当 X 启动时会运行 <TT>fvwm</TT> 窗口管理器。当你退出 <TT>fvwm</TT> 窗口管理器时，你的 X 会话进程也将结束，而且所有其它客户程序都将关闭。你不需要一定在这里使用一个窗口管理器；你也可以 <TT>exec&nbsp;xterm</TT>，在这种情况下，在特定的 <TT>xterm</TT> 中输入 <TT>exit</TT> 就会导致整个 X 会话进程的结束。

<P>
如果你想要在使用 <TT>exec</TT> 之前运行其它客户程序，那么你就需要在后台运行它们。否则，<TT>.xsession</TT> 将直到每个客户程序退出，才继续下一行的执行。参看前面的关于在后台运行作业的章节（一般你会想放一个 <TT>&amp;</TT> 标识符在末尾，如 <TT>xterm&nbsp;&amp;</TT>）。

<P>
不过，你可以充分利用这种行为。如果你想在 X 会话进程的结尾运行命令，那么你可以使你的 <TT>.xsession</TT> 运行一个窗口管理器或类似的程序，并等待其完成。也就是说，不要使用 <TT>exec</TT> 和 <TT>&amp;</TT>；只输入 <TT>fvwm</TT>。然后把你选择的命令置于 <TT>fvwm</TT> 之后。

<P>
看看一些示例的 <TT>.xsession</TT> 文件可能会有些帮助。在所有的例子中，可以使用你选择的窗口管理器来替换其中的 <TT>fvwm</TT>。

<P>
最简单的 <TT>.xsession</TT> 只运行一个窗口管理器：

<P>

<DL COMPACT>
<DT>
<DD>exec&nbsp;fvwm
</DD>
</DL>    这将运行 <TT>fvwm</TT>，而当 <TT>fvwm</TT> 退出时，X 会话进程也就结束了。如果你不使用 <TT>exec</TT>，所有的执行看上去都一样，但是 <TT>.xsession</TT> 会暂时挂起等待 <TT>fvwm</TT>，并且在 <TT>fvwm</TT> 完成后才退出。使用 <TT>exec</TT> 会要好一些，因为 <TT>fvwm</TT> 替换了 <TT>.xsession</TT> 而不需要它进行等待。你可以使用 <TT>ps</TT> 或者 <TT>top</TT> 命令来验证此。

<P>
一个更为实用的 <TT>.xsession</TT> 会在启动窗口管理器之前运行一些客户程序。例如，你可能想要每当启动 X 时，运行一些 <TT>xterm</TT> 和一个 <TT>xclock</TT>。没问题；只需输入 <TT>xterm &amp; xterm &amp; xclock &amp; exec fvwm</TT> 即可。两个 <TT>xterm</TT> 和一个 <TT>xclock</TT> 在后台启动，然后是窗口管理器的启动。当你退出窗口管理器时，你也将退出 X。

<P>
你可能想尝试一下不在后台运行，以看看会有什么情况发生。输入命令：<TT>xterm;&nbsp;xclock;&nbsp;exec&nbsp;fvwm</TT>。<TT>xterm</TT> 将会启动，并且等待你退出它。然后 <TT>xclock</TT> 启动；你在 <TT>fvwm</TT> 启动之前不得不退出 <TT>xclock</TT>。命令是顺序执行的，因为脚本在等待每个程序的退出。

<P>
你可以按你的需要使用顺序的执行方式。可能你想查查每天你什么时候停止工作。

<P>

<DL COMPACT>
<DT>
<DD>xterm&nbsp;&amp;

<P>
xclock&nbsp;&amp;

<P>
fvwm&nbsp;

<P>
date&nbsp;&gt;&gt;&nbsp;~/logout-time
</DD>
</DL>    这将并行在后台运行一个 <TT>xterm</TT> 和一个 <TT>xclock</TT>，然后运行 <TT>fvwm</TT> 并等待其完成。当你退出 <TT>fvwm</TT> 时，它会执行最后一行，这行把当前的日期和时间添加到文件 <TT>~/logout-time</TT> 中。

<P>
最后，你可以使用一个不使用窗口管理器来决定何时 X 退出的程序：<A NAME="3293"></A><A NAME="3294"></A><A NAME="3295"></A><A NAME="3296"></A>

<P>

<DL COMPACT>
<DT>
<DD>xclock&nbsp;&amp;

<P>
fvwm&nbsp;&amp;

<P>
exec&nbsp;xterm
</DD>
</DL>    该脚本会在后台运行 <TT>xclock</TT> 和 <TT>fvwm</TT>，然或使用 <TT>xterm</TT> 替换它自己。当你退出 <TT>xterm</TT> 时，你的 X 会话进程即结束。<A NAME="3303"></A><A NAME="3304"></A><A NAME="3305"></A><A NAME="3306"></A>

<P>
最好的学习怎样使用 <TT>.xsession</TT> 的方法即是尝试一些情况的结果。另外，确保你使用了 <TT>chmod</TT> 来使之可执行；忘记执行此步骤是经常犯的错误。

<P>

<HR>
<ADDRESS>
John Goerzen / Ossama Othman / Debian 中文计划
</ADDRESS>
</BODY>
</HTML>
