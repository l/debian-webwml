#use wml::debian::template title="Submit Volatile Mirror Information"

<p>If you would like to submit information about a mirror of Debian Volatile
please observe the following rules and guidelines.</p>

<h2>Requirements</h2>

<p>To get listed, you need to respect the following basic criteria:</p>
<ul>
  <li>You need to use rsync as the method to get current packages.</li>
  <li>You need to mirror the complete debian-volatile archive.</li>
  <li>You need to mirror debian-volatile at least once a day.</li>
  <li>You need to put 'date -u' into /project/trace/$YOURHOSTNAME</li>
  <li>You need to have an e-mail address one can write to. <strong>Entries will
  be removed, if we won't be able to contact you.</strong></li>
</ul>

<p>Once all this is set up, you can <a href="../mirror/submit">fill out
the mirror submission form</a>.</p>

<h2>rsync setup</h2>

<p>We strongly recommend to use our 
<a href="$(HOME)/volatile/mirror-volatile.sh">mirror-volatile.sh</a> script.</p>

<p>You are free to use any script you want, but please be sure to
use a safe one. We do NOT accept mirrors that use debmirror or similar tools
to mirror. These tools are fine for a private mirror, but not usable for full
mirrors, as they exclude many of the useful files.</p>

<p>A well-tuned rsync setup will maintain
a full working mirror the whole time. The following options to rsync
(besides what you normally have) do the trick:</p>

<hr />

<table>
<tr>
 <th>Run</th>

 <th>Options</th>
 <th>Affects</th>
</tr>
<tr>
<td>1</td>
<td>--exclude Packages* --exclude Sources* --exclude Release*</td>

<td>You download new binary files, sources and Packages, but not the metadata
for them that <code>apt-get</code> uses. Also note that no delete option is
given.</td>

</tr>
<tr>
<td>2</td>
<td>--delete --delete-after</td>
<td>The second run now fetches the files excluded in the first run and also
deleted all files not any longer in the archive.</td>
</tr>
</table>

<hr />

<p>
This two-way mirror approach makes sure that users with their apt-get can
always fetch the files that are announced to be there (via the Packages files),
even when your mirror is updating itself at the moment they try to download
stuff.  You are free to use any other option to rsync you may like, but we
strongly suggest to use at least -lH.</p>

<h2><q>Push</q> mirroring</h2>

<p>A <q>pushed</q> mirror is a normal mirror, with the only difference that
volatile.debian.org tells you when something has changed in the
archive. So there is no need to try a sync periodically, your are
notified when the archive changes.
A good page describing it, and some parts of the setup, is
<a href="http://www.debian.org/mirror/push_mirroring">available
on the debian.org servers</a>. Please read it if you are not familiar
with it.</p>

<p>To set up your site to be pushed by volatile.debian.org, you need to add <a
href="$(HOME)/volatile/id_mirrorpush.pub">this ssh key</a> to the mirror-user's
.ssh/authorized_keys file.  If you look into the key you see that it is limited
to only one command.  This means that we are NOT able to log on to your system
with this key. There is no way for us to do anything other to your
system then to just trigger the mirror &mdash; so the only harm we can do
would be to trigger your mirror every few seconds, but for that the
script we provide as an example uses a lockfile to avoid multiple
runs at the same time.  <strong>You need to change that to whatever
script you use, but do NOT delete the &amp; at the end.</strong> </p>

<p>As soon as you finished setting it up you are ready to be added to the list
of <q>pushed</q> servers.  For that please make sure you have
<a href="../mirror/submit">submitted the mirror using the standard form</a>
and then send e-mail in English to <email mirrors@debian.org> asking to be
added to the push setup.</p>

<h2>Traffic considerations</h2>

<p>
Maybe you want to know what traffic you will get &mdash; or how much disk space you
need.  The bandwith usage depends on the
users, how they use it and what mirrors they choose. We have 
currently about 20GB a month on volatile.debian.org. Some mirrors might have
more, some less traffic.
</p>

<h2>Space considerations</h2>

<p>
Please see the <a href="../mirror/size">mirror size</a> page for information.
At the moment the debian-volatile archive is relatively small compared to
some other mirrored Debian archives, but as we add packages from
time to time, expect the archive to grow.
</p>

<h2>Recommended additional settings</h2>

<p>If you are going to make the Debian mirror available through HTTP, please
add the following settings to your Apache configuration (presuming, of course,
you will use Apache), where /path/to/your/debian/mirror should be the actual
name of the directory where you keep the mirror:</p>

<pre>
   ReadmeName /path/to/your/debian/mirror/README

   &lt;Directory /path/to/your/debian/mirror&gt;
      Options +Indexes +SymlinksIfOwnerMatch
      IndexOptions NameWidth=*
      ReadmeName README.txt
   &lt;/Directory&gt;
</pre>			   

<p>This enables the directory indices and makes ensures that following
symlinks will work. Also file names in the directory indices won't be
truncated.</p>


# <form method=post action="http://cgi.ftbfs.de/submit_mirror.cgi">
