#use wml::debian::common_tags

<bind-gettext-domain domain="vendors" />

<!--
<gettext domain="vendors">Vendor:</gettext>
<gettext domain="vendors">URL for Debian Page:</gettext>
<gettext domain="vendors">Allows Contribution to Debian:</gettext>
<gettext domain="vendors">Country:</gettext>
<gettext domain="vendors">Ship International:</gettext>
<gettext domain="vendors">email:</gettext>
<gettext domain="vendors">CD Type:</gettext>
<gettext domain="vendors">DVD Type:</gettext>
<gettext domain="vendors">Architectures:</gettext>
-->

<define-tag country endtag=required>
<preserve code />
<preserve name />
<set-var %attributes />
<set-var prevname="" />
<set-var trclass="a" />
<h3><a name="<get-var code />"><get-var name /></a></h3>
  <table class="vendors">
    <tr>
      <th><gettext domain="vendors">Vendor</gettext></th>
      <th><gettext domain="vendors">Allows Contributions</gettext></th>
      <th><gettext domain="vendors">CD/DVD</gettext></th>
      <th><gettext domain="vendors">Architectures</gettext></th>
      <th><gettext domain="vendors">Ship International</gettext></th>
      <th><gettext domain="vendors">Contact</gettext></th>
  </tr>
%body
</table>
<restore code />
<restore name />
</define-tag>

<define-tag vendor>
  <preserve name />
  <preserve url />
  <preserve deburl />
  <preserve contribution />
  <preserve ship />
  <preserve email />
  <preserve cd />
  <preserve dvd />
  <set-var %attributes />
  <tr class="<get-var trclass />">
  <ifeq <get-var trclass /> "a" <set-var trclass="b" /> <set-var trclass="a" /> />
    <td><a href="<get-var url />" class="h"><img src="h.png" alt="<gettext domain="vendors">Vendor Home</gettext>"></a> <a href="<get-var deburl />"><get-var name /></a></td>
    <td><contribution <get-var contribution />></td>
    <td>\
      <ifeq <get-var cd /> "yes" "CD">\
      <ifeq <get-var cd /> "yes" <ifeq <get-var dvd /> "yes" "+">>\
      <ifeq <get-var dvd /> "yes" "DVD">\
    </td>
    <td><get-var architectures /></td>
    <td><ship <get-var ship />></td>
    <td><email <get-var email />></td>
  </tr>
  # Ensure that the list is sorted:
  <ifeq <string-compare "<get-var name />" "<get-var prevname />" caseless="true" />
        "less"
        <exit status="1" message="CD/DVD Vendor entries not sorted - '<get-var name />' should appear before '<get-var prevname />' in the list!" />
  />
  <set-var prevname="<get-var name />" />
  <restore dvd />
  <restore cd />
  <restore email />
  <restore ship />
  <restore contribution />
  <restore deburl />
  <restore url />
  <restore name />
</define-tag>

<define-tag contribution whitespace=delete>
  <ifeq "%0" "yes" <yes>>
  <ifeq "%0" "no"  <no>>
</define-tag>

<define-tag ship whitespace=delete>
  <ifeq "%0" "yes" <yes>>
  <ifeq "%0" "no"  <no>>
  <ifeq "%0" "europe" <europe_only>>
  <ifeq "%0" "some" <some_areas>>
</define-tag>

<define-tag europe_only whitespace=delete>
  <gettext domain="vendors">within Europe</gettext>
</define-tag>

<define-tag some_areas whitespace=delete>
  <gettext domain="vendors">To some areas</gettext>
</define-tag>

<define-tag email whitespace=delete>
  <a href="mailto:%attributes"><gettext domain="vendors">email</gettext></a>
</define-tag>

<define-tag source whitespace=delete>
  <gettext domain="vendors">source</gettext>
</define-tag>

<define-tag and whitespace=delete>
  <gettext domain="vendors">and</gettext>
</define-tag>

#use wml::debian::url
