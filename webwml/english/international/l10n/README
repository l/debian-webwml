Hello, welcome in this part of the Debian web pages. Its purpose is to
make beauty full stats about the localization of the debian packages.

===================
= Commented ls -R =
===================

data/ 
 data/synonyms
   There is a lot of typos in the 'section' fields of packages. This is a list
    of synonyms to fix most of them.
 data/{stable|freeze|testing|unstable}
   These are the DBs (as plain file) of the state of translations in each
     version of Debian.
   They are generated/modified by scripts/transmonitor-check, and used by all
     others scripts.
   FIXME: for now, only unstable exists.
 data/langs
   Autogenerated file containing the list of all languages present in DB 
     (to avoid to parse the DB each time we need this list)
 data/countries.wml
   List of countries name and translation. 
      Should be merged with scripts/Countries.pm

scripts/
 scripts/transmonitor-check 
   The (big) script to maintain the dbs in 'data/'. Ie, to check the current
     state of l10n in Debian
 scripts/utils.pl
   Some subs to read and write the DB file (used in all scripts, including
     transmonitor-check)
 scripts/Country.pm
 scripts/Language.pm
   Part of the liblocale-codes-perl package. It was easier to include these
     files here to get someone install this package on the right machine.

 scripts/i18n.pl :        \ 
 scripts/l10n-errors.pl :  \
 scripts/l10n-packages.pl : \
 scripts/l10n.pl :           > included by the corresponding .wml to generate
 scripts/l10n-lang.pl       /   the tables on each page
 scripts/l10n-rank.pl      /
 scripts/team-po.pl        |
 scripts/team-templates.pl |

 scripts/init.pl
   Included by all .pl which generate a page. Its purpose is to read the DBs.

 scripts/ranking.pl 
   Define some subs which are used to rank the languages.

 scripts/l10nheader.wml
   wanna be navbar. For now, pretty incomplete.

Makefile
   It's not an easy cut/paste from the standard one, and can be seen as freaky
dtc.def 
   All slices used by this pages

i18n.wml           \
l10n-lang.wml       \ 
l10n-rank.wml        \
l10n-packages.wml     > The "wanna be" pages :)
l10n-errors.wml      / 
index.wml           /
l10n.wml           /
team-po.wml       |
team-templates.wml|

=============
= Data flow = (How does it works ?)
============= 

* How is the DB refreshed ?

First, I have a crontab on my machine to refresh the DB. It automatically
runs the following script each night.

>>>>>>>>>>>>>>>>>> BEGIN OF SCRIPT
#! /bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
L10N_HOME=/home/mquinson/src/DEBIAN/webwml/english/international/l10n
if [ ! -x $L10N_HOME/scripts/transmonitor-check ] ; then
  echo "Script does not exist";
  exit 1;
fi
cd $L10N_HOME/scripts || exit 1
for d in unstable ; do #stable testing unstable ; do
  ./transmonitor-check \
      ftp:/ftp.fr.debian.org/debian/dists/$d/main/source\
      ftp:/ftp.fr.debian.org/debian/dists/$d/contrib/source\
      ftp:/ftp.fr.debian.org/debian/dists/$d/non-free/source\
      \
      ftp:/ftp.fr.debian.org/debian-non-US/dists/$d/non-US/main/source\
      ftp:/ftp.fr.debian.org/debian-non-US/dists/$d/non-US/contrib/source\
      ftp:/ftp.fr.debian.org/debian-non-US/dists/$d/non-US/non-free/source\
      \
      \
      --careful --db=../data/$d \
      --po=../material/po/$d --templates=../material/templates/$d --menu=../material/menu\
      $@ \
      \
      || exit 1; 
done;
cd ../data || exit 1;
echo "COMMIT ! Cross the fingers !";
#cvs commit -m "New DB (automatic commit)" unstable;
cd ..
for mat in po templates ; do
  echo "Syncronise $mat";
  rsync -R -r --stats --delete -e ssh material/$mat/unstable/ info:/home/mquinson/public_html/debian/;
done;
<<<<<<<<<<<<<<<< END OF SCRIPT

As you can see, this script runs the transmonitor-check script with the good
options, commit the new DB trought CVS, and rsync the material (po,
templates and menu) to the machine on which I have a ~/public_html.


* How are the pages rebuilded ?

I changed the makefile in the CVS so that all pages depends on the DB. So,
when I commit a new version, the pages are rebuilded at the next automatic
build.


========================================
= What to do to translate this pages ? =
========================================
1. Add the slices for your language to the file dl10n.def 
   (and leave it in the english dir).
2. Translate all the .wml files (and put them in <your language>/international/l10n).

That's all, folks ! You don't need to change any script.

