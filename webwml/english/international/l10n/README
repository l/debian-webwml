Hello, welcome to the intl/l10n part of the Debian web pages.
Its purpose is to make beautiful stats about the localization of Debian
packages.

===================
= Commented ls -R =
===================

data/ 
 data/synonyms
   There are a lot of typos in the 'section' fields of packages. This is a
     list of synonyms to fix most of them.
 data/unstable.{gluck,non-US}
   These are the plain text databases (stanza files) of the state of
     translations.
   They are generated/modified by scripts/transmonitor-check, and used by
     all other scripts.
   They can be retrieved from
       http://i18n.debian.net//material/data/unstable.gz
     Make sure to uncompress and rename these files!
 data/langs
   Generated file containing the list of all languages present in DB 
     (to avoid to parse DB file each time this list is needed)

scripts/
 scripts/transmonitor-check
   The (big) script to maintain the DBs in 'data/', that is, to check the
     current state of l10n in Debian
 scripts/gen-files.pl
   Generate date.gen, data/langs and all files under po/gen/ and
   templates/gen/.
 scripts/fix-files.sh
   Feed a templates file with statistics generated by
   scripts/gen-files.sh

dtc.def 
   All of the slices used by these pages
menu.def 
   Slices for menus

po/
 po/menu.inc
   Submenu for /intl/l10n/po/
 po/tmpl.src
   Template to generate statistics for PO files.  This file can be
   copied and translated.
 po/{translated,untranslated}.inc
   These files contain no translatable material and must not be copied.
 po/*.wml
   Normal wml source files

The templates/ directory is organized the same way as po/

=====================
= How does it work? =
=====================

* How is the DB refreshed?

Run a script similar to this one on a Debian mirror:

>>>>>>>>>>>>>>>>>> BEGINNING OF SCRIPT
#! /bin/sh

root=/org/ftp.debian.org/ftp

l10ndir=$HOME/webwml/english/international/l10n
destdir=$HOME/public_html/l10n/material

if [ ! -x $l10ndir/scripts/transmonitor-check ] ; then
  echo "Script $l10ndir/scripts/transmonitor-check does not exist";
  exit 1;
fi

[ -d $destdir || mkdir -p $destdir

[ -f $destdir/data/unstable.gz ] && \
        gzip -dc $destdir/data/unstable.gz > $destdir/data/unstable

gzip -dc \
    $root/dists/unstable/main/source/Sources.gz \
    $root/dists/unstable/contrib/source/Sources.gz \
    $root/dists/unstable/non-free/source/Sources.gz \
| grep-dctrl -n -s Directory,Files '' \
| sed -n -e '/^pool\//{N;s/\n.* /\//g;p;}' \
| sed -e "s,^,$root/," \
| $l10ndir/scripts/transmonitor-check  \
      --careful                         \
      --files-from=-                    \
      --syn=$l10ndir/data/synonyms      \
      --db=$destdir/data/unstable       \
      --po=$destdir/po/unstable         \
      --templates=$destdir/templates/unstable \
      --menu=$destdir/menu/unstable

gzip -f $destdir/data/unstable

<<<<<<<<<<<<<<<< END OF SCRIPT

Note that you need a recent gettext (0.10.40 is fine) to handle plural
forms, and libiconv if libc6 does not provide character conversion
routines.

Then unstable.gz is put under
   webwml/english/international/l10n/data/unstable.gluck
and a similar script must be run to generate unstable.non-US

* How are the pages rebuilt?

Pages are divided into 2 parts: text and data.  Text is found in
po/tmpl.src, templates/tmpl.src and dtc.def.  These files generate
po/tmpl.$(LANGUAGE).html and templates/tmpl.$(LANGUAGE).html.  Data are
extracted from DB file by scripts/gen-files.pl, and put in an adequate
format into po/gen/ and templates/gen/ directories.  HTML files are
generated by inserting those files into tmpl.$(LANGUAGE).html in the
right place, which is done by scripts/fix-files.sh

=================================
= How to translate these pages? =
=================================

1. Add the slices for your language to the dtc.def and menu.def files in
   the English directory.
2. Copy and translate all the .wml files.
3. Copy and translate po/tmpl.src and templates/tmpl.src

That's all, folks!  You don't need to change any of the scripts.
