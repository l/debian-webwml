#use wml::debian::common_tags

<define-tag subscribe>
  <gettext>To receive this newsletter weekly in your mailbox, <a href="m4_HOME/MailingLists/subscribe#debian-news">subscribe</a> to the debian-news mailing list.</gettext>
</define-tag>

<define-tag backissues whitespace=delete>
  <gettext><a href="../../">Back issues</a> of this newsletter are available.</gettext>
</define-tag>

<define-tag editor_form_singular whitespace=delete>
# One editor name only
  <gettext><void id="singular" />Debian Weekly News is edited by <a href="mailto:dwn@debian.org">%s</a>.</gettext>
</define-tag>

<define-tag editor_form_plural whitespace=delete>
# Two or more editors
  <gettext><void id="plural" />Debian Weekly News is edited by <a href="mailto:dwn@debian.org">%s</a>.</gettext>
</define-tag>

<define-tag editor whitespace=delete>
<:{
   my $editor = "$(editor)";
   my $plural = 0;
   if (!length ($editor)) {
     my $path = q|<get-var WML_SRC_DIRNAME>|;
     my ($issue, $year, $null) = split /\//, scalar reverse $path;
     $year = reverse $year;
     $issue = reverse $issue;
     if ($year =~ /^\d+$/) {

	  # This is a normal issue
     } elsif ($issue =~/^\d+$/) {
	  # year/index.wml or equvalient.
	  $year = $issue;
	  $issue = 999;
     } else {
	  $year = 9999;
	  $issue = 0;
     }

     if (($year > 2002) or (($year == 2002) and ($issue >= 31))) {
	  $editor = "Martin 'Joey' Schulze";
     } elsif (($year > 2002) or (($year == 2002) and ($issue >= 2))) {
	  $editor = "Yooseong Yang, Martin 'Joey' Schulze";
     } elsif (($year > 2001) or (($year >= 2001) and ($issue >= 20))) {
	  $editor = "Joe 'Zonker' Brockmeier, Martin 'Joey' Schulze";
     } elsif (($year > 2001) or (($year >= 2001) and ($issue >= 10))) {
	  $editor = "Joe 'Zonker' Brockmeier, Jean-Christophe Helary, Tollef Fog Heen";
     } else {
	  $editor = "Joey Hess";
     }
   }

   $plural = 1 if $editor =~ /,/;

   if ($CUR_ISO_LANG eq 'en') {
     $editor =~ s/,([^,]+)$/ and $1/;
     $editor =~ s/,/, /g;
   } elsif ($CUR_ISO_LANG eq 'de') {
     $editor =~ s/,([^,]+)$/ und $1/;
     $editor =~ s/,/, /g;
   } elsif ($CUR_ISO_LANG eq 'sv') {
     $editor =~ s/,([^,]+)$/ och $1/;
     $editor =~ s/,/, /g;
     $editor =~ s/'/"/g;
   } elsif ($CUR_ISO_LANG eq 'no' || $CUR_ISO_LANG eq 'da') {
     $editor =~ s/,([^,]+)$/ og $1/;
     $editor =~ s/,/, /g;
   } elsif ($CUR_ISO_LANG eq 'hr') {
     $editor =~ s/,([^,]+)$/ i $1/;
     $editor =~ s/,/, /g;
     $editor =~ s/'/"/g;
   } elsif ($CUR_ISO_LANG eq 'fr') {
     $editor =~ s/,([^,]+)$/ et $1/;
     $editor =~ s/,/, /g;
     $editor =~ s/'([^',]+)'/« $1 »/g;
   } elsif ($CUR_ISO_LANG eq 'ru') {
     $editor =~ s/,([^,]+)$/ É $1/;
     $editor =~ s/,/, /g;
   } else {
     # Fallback to the english style if there's no translation yet
     $editor =~ s/,([^,]+)$/ and $1/;
     $editor =~ s/,/, /g;
   }

   printf q{<editor_form_singular>}, $editor unless $plural;
   printf q{<editor_form_plural>}, $editor if $plural;
}:>
</define-tag>

<hrline/>

<p>
<subscribe/>

<ifeq "$(NOBACKISSUES)" ""
"<p><backissues/></p>"
/>

<p>
<editor/>
