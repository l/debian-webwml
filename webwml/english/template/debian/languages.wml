<perl>

my %langs = ("english"  => "en",
             "french"   => "fr",
             "german"   => "de",
             "italian"  => "it",
             "spanish"  => "es",
             "korean"   => "kr",
             "japanese" => "jp");

sub languages {
  my ($base_url, $rel_dir, $file, $cur_lang) = @_;
  my $str = "";

  # print "$base_url $rel_dir $file $cur_lang\n";

  # the following works, but should do this the right way
  foreach(keys %langs) {
     # print "$base_url/../$_/$rel_dir/$file.wml\n";
     if ( -f "$base_url/../$_/$rel_dir/$file.wml" ) {
        if ($_ ne lc($cur_lang)) {
           @used_langs = (@used_langs, $_);
        }
     }
  }
  if (@used_langs) {
     $str = "<hr>\nThis page is also available in the following languages:<BR>\n";
     foreach (@used_langs) {
        $t = ucfirst;
        $str .= "<a href=\"$file.html.$langs{$_}\">$t</a>&nbsp;\n";
     }
     $str .= "\n<BR><a href=\"$base_url/intro/cn.html.en\">How to set the ".
             "default document language</a>\n";
  }

  return $str;
}

</perl>
