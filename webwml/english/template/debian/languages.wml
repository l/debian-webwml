#use wml::sup::path
<perl>

# Add your language directory along with its ISO abbreviation here.
# Do not translate the directory names
#            Directory   Abbrev
my %langs = (english  => "en",
             danish   => "da",
             french   => "fr",
             german   => "de",
             italian  => "it",
             spanish  => "es",
             korean   => "kr",
             japanese => "ja",
             croatian => "hr",
);

# Add a new entry for your language. Also add the english name for your
# country to the existing entries. Use the same word for the translation
# and make a request on debian-www for people to add the translations
# for your country name.
my %trans = (
	hr => {
		croatian => "hrvatski",
		english  => "engleski",
		danish   => "danski",
		french   => "francuski",
		german   => "njemaèki",
		italian  => "talijanski",
		japanese => "japanski",
		korean   => "korejski",
		spanish  => "¹panjolski",
	},
	en => {
		croatian => "Croatian",
		english  => "English",
		danish   => "Danish",
		french   => "French",
		german   => "German",
		italian  => "Italian",
		japanese => "Japanese",
		korean   => "Korean",
		spanish  => "Spanish",
	},
	da => {
		croatian => "",
		english  => "",
		danish   => "",
		french   => "",
		german   => "",
		italian  => "",
		japanese => "",
		korean   => "",
		spanish  => "",
	},
	fr => {
		croatian => "croatian",
		english  => "anglais",
		danish   => "Danois",
		french   => "français",
		german   => "allemand",
		italian  => "italien",
		japanese => "japonais",
		korean   => "coréen",
		spanish  => "espagnol",
	},
	de => {
		croatian => "Croatian",
		english  => "English",
		danish   => "Danish",
		french   => "French",
		german   => "German",
		italian  => "Italian",
		japanese => "Japanese",
		korean   => "Korean",
		spanish  => "Spanish",
	},
	it => {
		croatian => "croatian",
		english  => "inglese",
		danish   => "danish",
		french   => "francese",
		german   => "tedesco",
		italian  => "italiano",
		japanese => "giapponese",
		korean   => "coreano",
		spanish  => "spagnolo",
	},
	ja => {
		croatian => "croatian",
		english  => "±Ñ¸ì",
		danish   => "¥ª¥é¥ó¥À¸ì",
		french   => "¥Õ¥é¥ó¥¹¸ì",
		german   => "¥É¥¤¥Ä¸ì",
		italian  => "¥¤¥¿¥ê¥¢¸ì",
		japanese => "ÆüËÜ¸ì",
		korean   => "´Ú¹ñ¸ì",
		spanish  => "¥¹¥Ú¥¤¥ó¸ì",
	},
	kr => {
		croatian => "",
		english  => "",
		danish   => "",
		french   => "",
		german   => "",
		italian  => "",
		japanese => "",
		korean   => "",
		spanish  => "",
	},
	es => {
		croatian => "",
		english  => "",
		danish   => "",
		french   => "",
		german   => "",
		italian  => "",
		japanese => "",
		korean   => "",
		spanish  => "",
	},
);
	
<define-tag langtext whitespace=delete>
	[EN:This page is also available in the following languages:]
	[HR:Ova stranica je takoðer dostupna na slijedeæim jezicima:]
	[FR:Cette page est aussi disponible dans les langages suivants:]
	[DE:This page is also available in the following languages:]
	[IT:Questa pagina è disponibile anche nelle lingue seguenti:]
	[JA:¤³¤Î¥Ú¡¼¥¸¤Ï°Ê²¼¤Î¸À¸ì¤Ç¤â¤´Í÷¤Ë¤Ê¤ì¤Þ¤¹:]
	[PL:Ta strona jestrównie¿ dostêpna w nastêpuj±cych jêzykach:]
	[ES:nEsta p&aacute;gina est&aacute; tambi&eacute;n disponible en los siguientes idiomas:]
</define-tag>
<define-tag setlang whitespace=delete>
	[EN:How to set the default document language:]
	[HR:Kako postaviti predodreðeni jezik dokumenata:]
	[FR:Comment configurer le langage par défaut du document:]
	[DE:How to set the default document language:]
	[IT:Come configure il linguaggio predefinito per i documenti:]
	[JA:¥Ç¥Õ¥©¥ë¥È¤Î¸À¸ì¤òÀßÄê¤¹¤ë¤Ë¤Ï:]
	[PL:Jak ustawiæ domy¶lny jêzyk dokumentu:]
	[ES:Como modificar el idioma por defecto de los documentos:]
</define-tag>

# DO NOT translate anything below here. If you feel something needs to be modified.
# write to debian-www first.

sub languages {
  my $str = "";

  $base_url = "$(HOME)";
  $file = "$(WML_SRC_BASENAME)";
  $cur_lang = "$(CUR_LANG)";
  $cwd = `pwd`;
  $full_base_url = &canonpath("$cwd/$base_url");
  $rel_dir = &relpath($full_base_url, $cwd);
  chop $rel_dir; chop $rel_dir;

  # printf STDERR "base=$base_url rel_dir=$rel_dir file=$file cur_lang=$cur_lang\n";

  foreach(keys %langs) {
     # printf STDERR "$base_url/../$_/$rel_dir/$file.wml\n";
     if ( -f "$base_url/../$_/$rel_dir/$file.wml" ) {
        if ($_ ne lc($cur_lang)) {
           push @used_langs, $_;
           # printf STDERR "found file in $_\n";
        }
     }
  }
  # printf STDERR join(', ', @used_langs);
  if (@used_langs) {
     $str = "<hr>\n<langtext>:<BR>\n";
     foreach (@used_langs) {
        $str .= "<a href=\"$file.$langs{$_}.html\">$trans{$CUR_ISO_LANG}{$_}</a>&nbsp;\n";
     }
     $str .= "\n<BR><a href=\"$base_url/intro/cn.html\"><setlang></a>\n";
  }

  return $str;
}

</perl>
