<define-tag selectserver whitespace=delete>
	[EN:Select a server near you:]
	[EL:Åğéëİîôå åíáí êïíôéíü óáò  äéáêïìéóôŞ:]
	[RO:Alegeşi un server apropiat:]
	[EO:Elektu servilon proksiman:]
	[TR:Yakınınızda bir sunucu seçiniz:]
	[FI:Valitse läheinen palvelin:]
	[PT:Escolha um servidor próximo de você:]
	[HR:Izaberite vama blizak poslu¾itelj:]
	[FR:Sélectionnez un serveur proche de vous:]
	[NL:Kies een server dicht bij jou:]
	[DE:W&auml;hlen Sie einen Server in Ihrer N&auml;he:]
	[IT:Scegli il server più vicino:]
	[JA:¤ª¶á¤¯¤Î¥µ¡¼¥Ğ¤ò¤ªÁª¤Ó²¼¤µ¤¤:]
	[PL:Wybierz najbli¿szy serwer:]
	[ES:Elija un servidor cerca de usted:]
	[DA:Vælg en server nær dig:]
	[NO:Velg en tjenere nær deg:]
	[ZH:½Ğ[CN:´Nªñ¿ï¾ÜªA°È¾¹:][HKTW:¿ï¾Ü´Nªñªº¦øªA¾¹:]:]
	[SV:Välj en server nära dig:]
	[KO:°¡±î¿î °÷À» ¼±ÅÃÇÏ¼¼¿ä:]
	[HU:Válassz hozzád közeli szervert:]
	[AR:ÍÏøÏ ÎÇÏãÇ ŞÑíÈÇ ãäøß:]
	[RU:÷ÙÂÅÒÉÔÅ&nbsp;ÂÌÉÖÁÊÛÉÊ&nbsp;ÓÅÒ×ÅÒ:]
	[CA:Tria un servidor a prop teu:]
</define-tag>

# Don't change anything below this point.

#use wml::debian::countries
#use wml::debian::languages
#use wml::sup::path
#use wml::std::tags

<define-tag mirrors-serverlist>
<form method="GET" action="http://cgi.debian.org/cgi-bin/redirect.pl">

<perl> 
  my $rootdir = &canonpath('$(WML_SRC_DIRNAME)/$(HOME)');
#    print STDERR "rootdir = $rootdir\n";
  my $curdir = &relpath($rootdir, '$(WML_SRC_DIRNAME)');
#    print STDERR "curdir = $curdir\n";
  my $file = "/".$curdir."/".'$(WML_SRC_BASENAME)';
#    print STDERR "file = $file\n";
  (my $path = &canonpath($file)) =~ s/index$//;
#    print STDERR "path = $path\n";
  print "<input type=\"hidden\" name=\"page\" value=\"$path\">\n";
</perl>

<if "$(usefonts)" "<font"><if "$(fontface)" " face="$(fontface)""><if "$(fontcolor)" " color="$(fontcolor)""><if "$(usefonts)" ">">
<if "$(small)" "<small>">
<selectserver>:
<if "$(small)" "</small>">
<if "$(usefonts)" "</font>">
<br>
# note: the values for site don't have an ending slash on purpose, that's page
<select name="site"<if "$(small)" " style=font-size:90%;">>
<perl>
my %mirrors = (
    "<ATc>" => "at",
    "<AUc>" => "au",
    "<BGc>" => "bg",
    "<BRc>" => "br",
    "<CNc>" => "cn",
    "<DEc>" => "de",
    "<DKc>" => "dk",
    "<ESc>" => "es",
    "<FRc>" => "fr",
    "<HKc>" => "hk",
    "<IDc>" => "id",
    "<ITc>" => "it",
    "<JPc>" => "jp",
    "<KRc>" => "kr",
    "<NLc>" => "nl",
    "<PLc>" => "pl",
    "<RUc>" => "ru",
    "<TRc>" => "tr",
    "<UKc>" => "uk",
# no USc=us because it's the same as www.d.o
    "<ZAc>" => "za",
              );
# Transform this list
my $mirrors_lang = {};
foreach $m (keys %mirrors) {
    while ($m =~ m/\[([A-Z_]+):(.*?):\]/g) {
        $mirrors_lang->{$1}->{$2} = $mirrors{$m};
    }
}
foreach $l (keys %$mirrors_lang) {
  foreach $m (sort langcmp keys %{$mirrors_lang->{$l}}) {
  <perl:print>[$l:<option value=\"$mirrors_lang->{$l}->{$m}\">$m</option>\n:]</perl:print>
  }
}
</perl>\
<option value="http://www.debian.org" selected>www.debian.org</option>
</select>
<input type="SUBMIT" value=" <go> "<if "$(small)" " style=font-size:90%;">>
<br>
</form>
</define-tag>
