#use wml::debian::countries
#use wml::debian::languages
#use wml::debian::common_tags
#use wml::sup::path
#use wml::std::tags

<define-tag selectserver whitespace=delete>
  <gettext>Select a server near you</gettext>
</define-tag>

<define-tag mirrors-serverlist>
<!--UdmComment-->
<form method="get" action="http://cgi.debian.org/cgi-bin/redirect.pl">

<perl> 
  my $rootdir = &canonpath('$(WML_SRC_DIRNAME)/$(HOME)');
  my $curdir = &relpath($rootdir, '$(WML_SRC_DIRNAME)');
  my $file = "/".$curdir."/".'$(WML_SRC_BASENAME)';
  (my $path = &canonpath($file)) =~ s/index$//;
  print "<input type=\"hidden\" name=\"page\" value=\"$path\" />\n";
</perl>

#  See wml_p1_ipp(1) for details on these constructs
$(usefonts:+<font$(fontface:+ face="$(fontface)")$(fontcolor:+ color="$(fontcolor)")>)
$(small:+<small>)<selectserver/>:$(small:+</small>)
$(usefonts:+</font>)
<br />
# note: the values for site don't have an ending slash on purpose, that's page
<select name="site"$(small:+ style="font-size:90%;")>
<perl>
my %mirrors = (
    "<ATc/>" => "at",
    "<AUc/>" => "au",
    "<BGc/>" => "bg",
    "<BRc/>" => "br",
    "<CNc/>" => "cn",
    "<DEc/>" => "de",
#    "<DKc/>" => "dk",
    "<ESc/>" => "es",
    "<FRc/>" => "fr",
    "<HKc/>" => "hk",
    "<IDc/>" => "id",
    "<ITc/>" => "it",
    "<JPc/>" => "jp",
    "<NLc/>" => "nl",
    "<RUc/>" => "ru",
    "<UAc/>" => "ua",
    "<UKc/>" => "uk",
    "<USc/>" => "us",
    "<ZAc/>" => "za",
              );
foreach my $m (sort langcmp keys %mirrors) {
    my $s = " selected" if $mirrors{$m} eq "us";
    <perl:print><option value=\"$mirrors{$m}\"$s>$m</option>\n</perl:print>
}
</perl>\
</select>
<input type="submit" value=" <go/> "$(small:+ style="font-size:90%;") />
<br />
</form>
<!--/UdmComment-->
</define-tag>
