# Please keep slices sorted alphabetically with the exception of English.

<define-tag selectserver whitespace=delete>
	[EN:Select a server near you:]
	[AR:ÍÏøÏ ÎÇÏãÇ ŞÑíÈÇ ãäøß:]
	[CA:Tria un servidor a prop teu:]
	[DA:Vælg en server i nærheden af dig:]
	[DE:W&auml;hlen Sie einen Server in Ihrer N&auml;he:]
	[EL:Åğéëİîôå åíáí êïíôéíü óáò åîõğçñåôçôŞ:]
	[EO:Elektu servilon proksiman:]
	[ES:Elija un servidor cerca de usted:]
	[FI:Valitse läheinen palvelin:]
	[FR:Choisissez un serveur proche de vous:]
	[HR:Izaberite vama blizak poslu¾itelj:]
	[HU:Válassz hozzád közeli szervert:]
	[ID:Pilih server terdekat:]
	[IT:Scegli il server più vicino:]
	[JA:¤ª¶á¤¯¤Î¥µ¡¼¥Ğ¤ò¤ªÁª¤Ó²¼¤µ¤¤:]
	[KO:°¡±î¿î °÷À» ¼±ÅÃÇÏ¼¼¿ä:]
	[NL:Kies een server dicht bij:]
	[NO:Velg en tjener nær deg:]
	[PL:Wybierz najbli¿szy serwer:]
	[PT:Escolha um servidor próximo de você:]
	[RO:Alegeşi un server apropiat:]
	[RU:÷ÙÂÅÒÉÔÅ&nbsp;ÂÌÉÖÁÊÛÉÊ&nbsp;ÓÅÒ×ÅÒ:]
	[SV:Välj en server nära dig:]
	[TR:Yakınınızda bir sunucu seçiniz:]
	[ZH:½Ğ[CN:´Nªñ¿ï¾ÜªA°È¾¹:][HKTW:¿ï¾Ü´Nªñªº¦øªA¾¹:]:]
</define-tag>

# Don't change anything below this point.

#use wml::debian::countries
#use wml::debian::languages
#use wml::sup::path
#use wml::std::tags

<define-tag mirrors-serverlist>
<!--UdmComment-->
<form method="get" action="http://cgi.debian.org/cgi-bin/redirect.pl">

<perl> 
  my $rootdir = &canonpath('$(WML_SRC_DIRNAME)/$(HOME)');
#    print STDERR "rootdir = $rootdir\n";
  my $curdir = &relpath($rootdir, '$(WML_SRC_DIRNAME)');
#    print STDERR "curdir = $curdir\n";
  my $file = "/".$curdir."/".'$(WML_SRC_BASENAME)';
#    print STDERR "file = $file\n";
  (my $path = &canonpath($file)) =~ s/index$//;
#    print STDERR "path = $path\n";
  print "<input type=\"hidden\" name=\"page\" value=\"$path\" />\n";
</perl>

#  See wml_p1_ipp(1) for details on these constructs
$(usefonts:+<font$(fontface:+ face="$(fontface)")$(fontcolor:+ color="$(fontcolor)")>)
$(small:+<small>)<selectserver/>:$(small:+</small>)
$(usefonts:+</font>)
<br />
# note: the values for site don't have an ending slash on purpose, that's page
<select name="site"$(small:+ style="font-size:90%;")>
<perl>
my %mirrors = (
    "<ATc/>" => "at",
    "<AUc/>" => "au",
    "<BGc/>" => "bg",
    "<BRc/>" => "br",
    "<CNc/>" => "cn",
    "<DEc/>" => "de",
    "<DKc/>" => "dk",
    "<ESc/>" => "es",
    "<FRc/>" => "fr",
    "<HKc/>" => "hk",
    "<IDc/>" => "id",
    "<ITc/>" => "it",
    "<JPc/>" => "jp",
    "<NLc/>" => "nl",
    "<PLc/>" => "pl",
    "<RUc/>" => "ru",
    "<TRc/>" => "tr",
    "<UKc/>" => "uk",
    "<USc/>" => "us", # the same as www.d.o
    "<ZAc/>" => "za",
              );
# Transform this list
my $mirrors_lang = {};
foreach $m (keys %mirrors) {
    while ($m =~ m/\[([A-Z_]+):(.*?):\]/g) {
        $mirrors_lang->{$1}->{$2} = $mirrors{$m};
    }
}
foreach $l (keys %$mirrors_lang) {
  foreach $m (sort langcmp keys %{$mirrors_lang->{$l}}) {
    my $s = " selected" if $mirrors_lang->{$l}->{$m} eq "us";
    <perl:print>[$l:<option value=\"$mirrors_lang->{$l}->{$m}\"$s>$m</option>\n:]</perl:print>
  }
}
</perl>\
</select>
<input type="submit" value=" <go/> "$(small:+ style="font-size:90%;") />
<br />
</form>
<!--/UdmComment-->
</define-tag>
