#use wml::debian::template title="PowerPC Port (Booting)" NOHEADER="yes"
[ <a href="../..">Ports</a> ] 
[ <a href="../">Debian PowerPC</a> ]
[ <a href="../news">News</a> ]
[ <a href="../devel">Devel</a> ]
[ <a href="../docu">Documentation</a> ]
[ <a href="../supply">Supply</a> ]
[ <a href="install">Install</a> ]<p>

<p>

Yaboot is an OpenFirmware based bootloader for newworld machines. 
It requires the very latest 2.2.14pre9 kernel from Paul Mackerras or the
iBook/iMac/G4 kernel above. The format of the config file (yaboot.conf) 
is the same as quik, it should be next to yaboot itself. Netbooting works
via bootp/tftp (including loading the ramdisk). Version 0.4 fixes a problem 
with kernels containing more than one ELF section. <p>

Note: ext2 support works but is very slow in this version. Also, symbolic 
links for the kernel or the ramdisk are not supported yet. I'll post a
small documentation and sample config files as soon as I find time to write 
them. If you want to boot with the installer ramdisk, add an
"initrd=path_to_ramdisk" line to the config file section of the kernel image. 
You should probably also add "initrd-size = 8192". <p>

sources: <a href="http://calvaweb.calvacom.fr/bh40/">http://calvaweb.calvacom.fr/bh40/yaboot_*.src.tgz</a>
binary : <a href="http://calvaweb.calvacom.fr/bh40/">http://calvaweb.calvacom.fr/bh40/yaboot_*.gz</a>

These machines instead require a small bootstrap partition with an
HFS filesystem containing yaboot and its configuration file (and a OF
CHRP wrapper to satisfy OF's default settings) this partition should
be type Apple_Bootstrap to avoid macos from messing with it. <p>

Assuming yaboot 0.5 is used and its configuration is set to point at
the kernel symlink /vmlinux or /boot/vmlinux yaboot or its config
file need not be updated on kernel upgrades as it knows how to read
ext2 filesystems and will now follow the symlinks to whereever they
point (unless it crossed partitions i would assume). <p>

Ethan Benson <erbenson@alaska.net> wrote some scripts that the user can
use to setup and update a bootstrap partition, these scripts are
capable of making a newworld mac OF bootable even when leaving OF at
its default configuration, assuming you use the internal apple
supplied hard disk and the bootstrap partition appears before any
macos partitions that may exist. <p>

These scripts do however depend on hfsutils to at the very least create
the hfs filesystem and the bootstrap partition will only work with
default OF configuration if hfsutils are used (there are some
things that simply cannot be done with the kernel space hfs driver).
So currently the bootstrap partition cannot be set up with a base
system install... the utilities from hfsutils that are required are:
hformat, hmount, humount (this one I could live with out if i made
the check for it optional, it really does not do much) hcopy, and
hattrib. <p>

The scripts from Ethan Benson are here:
<a href="http://www.alaska.net/~erbenson/ybin/">http://www.alaska.net/~erbenson/ybin/</a>
