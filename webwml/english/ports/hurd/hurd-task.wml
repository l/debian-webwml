#use wml::debian::template title="Debian GNU/Hurd --- Task Lists" NOHEADER="yes"
[ <a href="..">Ports</a> ]
[ <a href="index">Debian GNU/Hurd</a> ]
[ <a href="hurd-news">News</a> ]
[ <a href="hurd-install">Installation</a> ]
[ <a href="hurd-doc">Documentation</a> ]
[ <a href="hurd-port">Porting</a> ]
[ <b>Task Lists</b> ]
[ <a href="hurd-links">Links</a> ]
[ <a href="hurd-contact">Contact</a> ]<p>

<h1>Debian GNU/Hurd</h1>
<H2>Known Bugs or Limitiations</H2>
<P>
Here is a quick list of known user visible bugs and limitations. It may be
out of date. These are not official lists. These lists are mostly for me,
so I don't forget important stuff.
</P>
<UL>
<LI>GNU Mach
	<UL>
	<LI>Support for Linux Character Devices (needed for X) is missing.</LI>
	<LI><a href="#fpe" name="TOC_fpe">Floating point emulator code</a>
	is broken and non-free.
	<LI>Use Corba instead MiG (?).</LI>
	<li>The official task list from CVS:
<pre>
GNU Hurd Task List Version 1.21.  Last updated 29 June 1999.

If you would like to work on one of these, please contact tb@mit.edu.
It's important that you let me know what's being worked on, because
someone else might also be interested, and you should coordinate work.

Items that we want done with more priority are marked with !!!.

Mach 3.0 Work

We now have our own distribution of the microkernel.  Please discuss
proposed microkernel work there as well as with thomas@gnu.ai.mit.edu.

!!!
 * Mach 3.0 serial drivers support only a small subset of the
   available possibilities in the Posix c_cflag termios field.  Fix
   this, by adding a new device_set_status call that sets the whole
   thing and not just the old limited possibilities.

!!!
  * Mach 3.0 needs many new device drivers for popular PC devices.
  Shantanu Goel is doing work in this area; coordinate with him.

!!!
  * A replacement for MiG that understands C .h files.

!!!
  * Mach 3.0 needs to provide support for task virtual timers similar
  in functionality to the Unix ITIMER_PROF and ITIMER_VIRTUAL timers.

!!!
  * Mach 3.0 needs to make switches from MEMORY_OBJECT_COPY_DELAY to
  MEMORY_OBJECT_COPY_NONE have the effect of immediately completing any
  delayed copies.

  * Mach 3.0 needs a facility to automatically send task and thread
  status on task/thread exit to a port that can only be changed by
  a privileged user; this would be used to implement process
  accounting.

  * Mach 3.0 needs a facility to find out what task is the parent of
  a given task.

  * Mach 3.0 needs a facility to find out which pages of a task's
  address space are in core to implement Unix's mincore call.

  * Mach 3.0 needs a facility to do msync.

  * Utah Mach needs the OSF vm_remap call.

  * Mach 3.0 needs a replacement for MEMORY_OBJECT_COPY_CALL that
  works at least for the cases needed in ordinary files.  (Write
  thomas if you want to know what the problem is and some ideas about
  how to solve it.)

!!!
  * Mach 3.0 needs proxy memory objects.  (thomas can tell you what
  these are and why they are important.)

  * Mach 3.0 needs a way to do per-task resource counters that are
  accessible to servers called by the task.

  * Mach 3.0 needs facilities to implement resource limits of various sorts.

  * Mach 3.0 needs a way to have a thread's CPU time statistics
  include time spent by servers on its behalf.  [This has been done
  for the migrating-threads version of Mach; talk to thomas before starting
  work on it.]

  * Of course, free ports are always necessary to machines that don't
  already have free ports.

  * Much work can be done doing research in how to improve Mach VM
  performance and timesharing scheduling policy.

  * Mach 3.0 needs facilities to get a list of all the devices which
  can be device_open'd, as well as to get the type of a device.

  * A way to have the kernel send a message on some designated port
  everytime a new task is started.

  * OSF has enhanced the exception_raise protocol to include thread_state
    information.  This code should be merged into the kernel; OSF people
    have said their could could be released to the public (but it has not
    appeared).

  * Implement TASK_EVENTS_INFO.

  * Add a timestamp for task and thread creation to the relevant info
  structures (and make sure it works for the kernel task and threads).

  * Add an anonymous swap allocation statistic to the task info structure.
</pre>
	</UL>
<LI>GNU Hurd
	<UL>
	<li>The <a href="#pfinet" name="TOC_pfinet"><code>pfinet</code>
	server</a> does not provide a local network if no network device
	is available.</li>
	<LI>Disk partition size is limited by Memory Mapping (about 1 GB)</LI>.
	<LI>Support for multiple network interfaces.</li>
	<LI>PPP is missing (depends on character device drivers, too).</LI>
	<LI>Needs to be profiled for performance.</LI>
	<lI>Collect bugs of the <code>nfsd</code> server. It partially
	works, but there are definitely problems in it.</li>
	<li>exec server can't run gzip and bzip2 executables. Nothing is
	known about this bug. It doesn't seem to be a bug in the exec server
	itself, because it seems to unzip and start the program. OKUJI says,
	<code>S_exec_exec</code> returns successfully.</li>
	<LI>The official Hurd task list fresh from CVS (3 Jul 1999):
<pre>
General system work

  * Compile all the free programs you can find to help us fix bugs in
  the system, and to submit necessary ports to the maintainers of
  those programs.

  * Do whatever magic is necessary for Perl to take advantage of all
  the nifty Hurd features that Unix doesn't have.

  * Something to deal with the case where the system clock is in local
  time instead of UCT.  Linux deals already; we should too.


Hurd work (these are brief descriptions; thomas can give more information):

  * Make the thread timeout in libports/manage-multithread.c work.

  * Make thread death in C threads really free resources.

!!!
  * An RPC trace program to aid debugging.  Ask roland for more info.

  * Programs that use utmp need to be changed to use /utmp and utmp.defs.

  * We need some standard translators for /utmp nodes; most importantly
  one for ordinary terminals (set up by login) and one for X displays
  (set up by xdm).

!!!
  * We need some existing shell programs changed to do Hurd things:
  like ls, tar, cpio, etc.  Some of this work has already been
  done, but more is still needed.

!!!
  * Extend bash to call shell functions when various Hurdish async
  events happen.

  * Handy shell programs to send msgport msgs, and change default init
    ports and ints.

  * Shadow directory translators.

  * A system for write, send, talkd and so forth to bleep users;
  this should be integrated with the utmp replacement above.

  * A filesystem for /tmp that uses virtual memory instead of disk.
  (Roland has some ideas about this.)

  * Filesystem implementations (using libdiskfs) for other popular
  formats.  Importantly, MSDOS FAT format.

  * A fancy terminal driver that uses readline and supports detach/attach.

  * A notepad program to hold and keep track of ports for shell scripts.
</pre>
	</UL>
<LI>GNU Lib C
	<UL>
	<LI>POSIX Threads!</LI>
	<LI>POSIX (partial) file locking.</LI>
	<LI>Consider allowing <tt>mkdir("foo/bar/")</tt> and
	<tt>rename("foo", "bar/")</tt>.</li>
	<LI>Network Monitoring Tools!</li>
	<lI><net/*.h> and support for these ioctls().</li>
	<li>Implement functional code for the stubs in
	<code>gnu/stubs.h</code></li>
	<li>The official task list:
<pre>
C library work.  See roland@gnu.ai.mit.edu if you are interested in working
on anything in the C library.

  * Useful response to SIGINFO.

  * Better integration with cthreads.
</pre>
	</UL>

<LI>Debian
	<UL>
	<LI>dpkg and dpkg-architecture!</LI>
	<LI>SysV Init emulation. (Almost done).</LI>
	<LI>Port Linux <code>syslogd</code>.</li>
	<li>Port <a href="#fdisk" name="TOC_fdisk"><code>fdisk</code></a>.</li>
	<LI>Build daemon.</LI>
	<LI>Smarter handling of Architectures via Depends.</LI>
	<LI><a href="hurd-port">Port more packages</a>.</li>
	</UL>
<lI>GRUB
	<ul>
	<li>iso9660 support for installation cd's.</li>
	</ul>
</UL>

<h2>More Infos On Particular Tasks</h2>

<h3>GNU Mach</h3>

<a href="#TOC_fpe" name="fpe"><h4>Floating Point Emulator Code</h3></a>
<p>
GNU Mach currently contains an Intel-proprietary floating point
emulator.  We don't have the source code for it (<code>fpe.o</code>
is uudecoded from <code>gnumach/i386/i386/fpe.b_elf</code>).
Even worse, it doesn't work. <tt>:(</tt></p>
<p>
This is the reason why machines without an FPU (such as 486SX
machines) cannot boot the Hurd.  If anybody has the time or energy to
port the Linux or BSD fpu's to gnumach, please do so... this would be
a valuable contribution that would enable people with older hardware
(which make cheap second machines) to run the Hurd.</p>
<p>
If you're willing to take on this work, please send mail to the
<a href="hurd-contact">developer list</a> or
<a href="mailto:gord@trick.fig.org">Gordon Matzigkeit</a> if you'd
rather discuss this privately.</p>

<h3>The Hurd</h3>

<a href="#TOC_pfinet" name="pfinet"><h4><code>pfinet</code> server and Local Network</h4></a>
<p>
Even if there is no network device available, <code>settrans
/servers/socket/2 /hurd/pfinet</code> should at least provide a local
network (try with <code>ping 127.0.0.1</code>). This doesn't work.</p>
<p>
Find out which bug in the Hurd, glibc or GNU Mach is preventing this from
working and find a fix.</p>

<h3>Debian</h3>

<a href="#TOC_fdisk" name="fdisk"><h4><code>fdisk</code></h4></a>
<p>
There is an old version of <code>fdisk</code> on alpha.gnu.org, but this
should not be used anymore. Yoshinori says:</p>
<p><blockquote>
<code>fdisk</code> will not detect the geometry of a drive automatically,
and the original <code>fdisk</code> is quite old. I think
<code>storeio</code> should support the <code>V_GETPARMS
device_get_status</code> call and then <code>fdisk</code> should use the
call to detect the geometry before you make the <code>fdisk</code> package,
because that should make trouble if the user sets the geometry manually.</p>
