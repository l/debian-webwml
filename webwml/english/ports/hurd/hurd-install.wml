#use wml::debian::template title="Debian GNU/Hurd --- Installation" NOHEADER="yes"
#include "$(ENGLISHDIR)/ports/hurd/menu.inc"

<h1>
Debian GNU/Hurd</h1>

<h2>
Installation</h2>

<h3>
Hardware</h3>
<p>
Please check the <a
href="http://www.urbanophile.com/arenn/hacking/hurd/hurd-hardware.html">Hardware
Compatibility Guide</a> to learn which hardware is supported under the
Hurd.</p>

<h3>
Software</h3>
<p>
<a href="http://www.gnu.org/software/hurd/install.html">The Hurd
Installation Guide</a></p>

<p>
There are two ways to install a Debian GNU/Hurd system. The first way
makes it possible to install directly from the Debian packages, but
requires <code>dpkg</code>, the Debian package manager. This may be
difficult if you use another Linux distribution beside Debian, or if
you don't run Linux at all. Therefore, there is a second method using
a prepared <code>tar</code> archive file. After installing that, you
can update your system to the most up to date versions of the Debian
packages natively. Both methods are described in more detail
below.</p>

<h4>
Common Preparations</h4>
<p>
To start the installation, make the Hurd partition with <code>mke2fs
-O sparse_super -o hurd /dev/PARTITION</code>, where <code>PARTITION</code> is the
partition of the hard disk you want to dedicate to the Hurd. Note that
the partition size should not exceed about 1 GigaByte currently, due
to a known limitation in the Hurd.
<p>
Then mount your partition somewhere safe. I use <code>/gnu</code> as
the mount point, mostly because this is our default for cross
compilation. Any other place is good enough, as well as doing this
into a disk image inside a file (loop mount). From here, I will assume
that you use <code>/gnu</code>. Please change the commands accordingly
if you use something else.</p>

<h4>
Two Alternatives</h4>

<h5>
Installation Using Debian Packages</h5>
<p>
To install Debian GNU/Hurd, you need to fetch the Debian software packages
and my installation scripts. First get the following scripts:
<ul>
<li>
<a href="extra-files/cross-install"><code>cross-install</code></a> -
Installing a bunch of packages from Linux</li>
<li>
<a href="extra-files/native-install"><code>native-install</code></a> -
Configuring the new system</li>
<li>
<a href="extra-files/dpkg-hurd"><code>dpkg-hurd</code></a> - Use dpkg
on the Hurd partition from Linux</li></ul>
<p>
If you don't have Debian, you will also need a version of
<code>dpkg</code> for your system.</p>
<p>
Last but not least, the Debian packages are required. They are located
on any <a href="../../distrib/ftplist">Debian FTP mirror</a>, in the
directory <code>debian/dists/unstable/main/binary-hurd-i386/</code>.
You need a certain set which is specified at the top of the
<code>dpkg-hurd</code> script. Recent versions of
<code>cross-install</code> offer an automatical download feature for
your convenience. This option requires a network connection and the
<code>wget</code> utility. Otherwise you can manually download the
packages and save them in a single directory or spread in
subdirectories in the way they are organized at the FTP site.</p>
<p>
Now <code>cd</code> into the directory you keep your scripts and the
Debian packages in. If you use a single directory, it must contain all
files. If you use the FTP organization for packages, be sure that the
scripts are in the top level directory, so they can find the packages
in <code>base/</code> etc.  Run <code>./cross-install /gnu</code>. If
all goes well, the packages will be installed and some patches will be
applied to fix known problems. Now continue with <a
href="#reboot">Rebooting the System</a>.</p>

<h5>
Installation Using the <code>tar</code> Archive File</h5>
<p>
Sometimes I upload snapshots of the current base system to <code><a
href="ftp://alpha.gnu.org/pub/gnu/hurd/contrib/marcus/">ftp://alpha.gnu.org/pub/gnu/hurd/contrib/marcus/</a></code>
Those files are named <code>gnu-YYYYMMDD.tar.gz</code>, where
<code>YYYYMMDD</code> is the date of the snapshot. Those files can be
used to install the Hurd even if you don't have a working version of
the <code>dpkg</code> package manager available.
<p>
Download the tar file of the most recent date. This is the only file
you will need to get a working system (beside GRUB). <code>cd
/gnu</code> to get to the root of the Hurd partition. Now extract the
tar file with the command <code>tar --same-owner -xpzf
/somewhere/gnu-YYYYMMDD.tar.gz</code> using the correct path and
date.</p>

<h4><a name="reboot">
Rebooting the System</a></h4>
<p>
Now reboot the system and use GRUB to boot the Hurd partition. I won't
give detailed information on GRUB and partition naming schemes here,
this is covered in the GRUB manual.</p>
<p>
After rebooting, you only need to run <tt>./native-install</tt> to
finish the installation. Have fun!</p>
