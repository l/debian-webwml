#use wml::debian::template title="Debian GNU/Hurd --- Hurd-CDs" NOHEADER="yes"
#include "$(ENGLISHDIR)/ports/hurd/menu.inc"

<H1>Debian GNU/Hurd</h1>

<h2>Using the unofficial Debian GNU/Hurd installation CD-ROMs</H2>

<p>While many people call the GNU system GNU/Hurd this is not strictly true. 
The kernel is GNU mach not the Hurd.  The Hurd is a series of servers which 
run on top of the microkernel, GNU mach.  Both the Hurd and GNU mach are 
part of the GNU project while the Linux kernel is an independent project.</p> 

<P>Current series, GNU-K4.</P>

<P>Only the first four of five images have been release for this series. </p>

<P>baseGNU.tgz (a tarball of the base GNU system) has been specially 
built for this CD set.</P>

<H3>Download.</H3>

<P>The current iso images are GNU-K4-CDx.iso. All of the binaries 
specific to a GNU system are found on this first two CDs, and all the required, 
important and standard packages are found on the first CD.  So a basic GNU 
system can be installed using the first CD.</P>

<P> These sites usually mirror the images, but check first.</P>

<P>The main site for these images is 
<A HREF="ftp://ftp.gnu.org/pub/iso/hurd-K4/">ftp://ftp.gnu.org</A> and they can 
also be fetched from some of its mirrors.</P> 
<ul>
<li>
<A HREF="ftp://ftp.fsn.hu/pub/CDROM-Images/hurd">ftp.fsn.hu/pub/CDROM-Images/</A> -  Hungary (Primary site)
<li>
<A HREF="ftp://www.che.iitm.ac.in/pub/hurd-cd">ftp://www.che.iitm.ac.in/pub/hurd-cd</A> - The Indian sub-continent only please.
<li>
<A HREF="http://www.mirror.ac.uk/sites/ftp.gnu.org/iso/"> mirror.ac.uk</A>
</ul>

<P>A search at 
<a href="http://www.filesearching.com/">http://www.filesearching.com</a> 
for hurd-K could find a closer site.</P>

<p> Instructions for burning CDs from the images can be found at <A
HREF="http://cdimage.debian.org/faq.html">http://cdimage.debian.org/faq.html</A>
</P>

<H3>CD-ROMs</H3>

<P>See <A HREF="../../CD/vendors/"> this page for GNU/Hurd CD vendors</A>.  
Look for "hurd" using your browser's search facility. 
<url "http://www.copyleft.co.nz/"> will 
definitely have the latest CDs (warning, that is me).</P>

<H3>How the Installation Disc works</H3>

<P>The potato Debian GNU/Linux installation CDs used the cross
install method to install the base system.  A ramdisk is created in
memory and a mini GNU/Linux system installed into this disk.  This
mini system is used to partition and format drives, and to prepare the
target machine for the main installation.  The critical phase is to
unpack a tarball with the essential base packages onto the drives of
the target system.  The new system is then rebooted using the packages
unpacked onto the HDD.  Further packages are then installed and
configured to create the desired system.</P>

<P>As GNU also uses the cross install method, this meant that the
scripts to build the GNU installation CDs could be adapted from the
Debian GNU/Linux boot and CD scripts so that the GNU rather than the 
GNU/Linux tarball would be unpacked.</P>

<P>Installing a GNU system using a cd-rom set has several advantages.
<ul>
<li>
As the GNU/Linux system runs in a ramdisk and the tarball is on the cdrom,
a GNU system can be installed onto a bare machine, or onto a machine where
people do not want to use the installed operating system.

<li>
The file system storing the packages on the CDs could be reorganised
to incorporate work-arounds.

<li>
While a GNU/Hurd version of "parted" is available, some people 
may prefer to use the GNU/Linux "cfdisk" in the boot-disks.

<li>
It is faster, less fiddle and most people are familiar with the process.
</ul>


<H3>Hurd Partitions</H3>

<P>The GNU/Hurd does not support partition sizes greater than about 2 Gb.
However, several partitions can be created during the installation
process.  The Hurd also uses extensions to the ext2 file system, the
call is "mke2fs -o hurd /dev/*".  The installation CDs
use this when creating Hurd partitions.</P>


<H3>Using the Installation CD</H3>

<H4>Preparation.</H4>

<p>
Hurd specific documentation is found in ./doc/hurd.  hurd-install-guide
and Cook-book are "must read" documents before you start.
</p>

<ol>
<li><P><em>Make a GRUB boot-disk</em>
<p>
The image file is /install/grub_0.92 image on the CDROM.  You
can use "dd" if you are working in GNU/Linux or rawrite if you are working
in MS.</P>

<li><P>Make certain that you understand Linux, GRUB and Hurd methods
of naming drives and partitions. You will be using all three and the
relationship between them can be confusing.
</ol>

<p> Hurd uses different partition names to Linux, so be careful. IDE
hard disks are numbered in order, beginning from hd0. The second IDE
drive will be hd1, regardless of whether it is a slave or a second
master. SCSI drives are also numbered in absolute order.  They will
always be sd0, sd1, and so on regardless of whether the two drives are
SCSI id 4 and 5 or whatever. Experience has shown that CD-ROM drives
can be tricky.  More about this later.

<p> Linux-style partitions are always called sn when using the Hurd,
where n is the partition number, so the first partition on the first
IDE drive will be hd0s1, the third partition on the second SCSI drive
will be sd1s3, and so on.
				
<p> GRUB has yet another partition naming system. It calls partitions
(hdN,n), but this time the disk number and partition number are both
zero indexed, and the disks run in order, all the IDE disks first, and
the SCSI ones second.  This time, the first partition on the first IDE
drive will be (hd0,0).  To really cause a confusion, (hd1,2) could
refer to the first SCSI drive if you only have one IDE drive, or it
could refer to the second IDE drive.  So it is important that you have
worked out the various names of your partitions before you start.</P>
						      
<H4>Installation</H4>

<ol>
<li><em>Boot the CD.</em>
<p>
Any of the methods of booting a Debian 3.0 beta (woody) CD will
work, ie. from the CD, from MS and by any of the boot/root floppy images.
A complete set of base floppies can created if there is no cdrom drive.

<li><em>After the opening screens, open "Partition a Hard Disk".</em>
<p>
If you are going to copy the .deb packages onto the HDD then you will need 
to create  other partitions, one for each CD. While parted is available 
for GNU/Hurd you may as well use this facility. About 
500 Mb will be enough to start with for the main system.  If you need to 
create another partition then you may find it easier to reboot the first CD 
and use the tools in the Linux ramdisk to do this.
			    
<li><em> Work out the GRUB and Hurd names of the partition you will be using.</em>

<li><em>Prepare your partitions using "Partition a Hard Disk"</em>
and make certain that you have a swap partition. GNU/Hurd is fussy about swap.

<li><em> Format your Hurd partition</em>
using "Initialize a Hurd Partition" and mount it on "/".
Do not mount  any other partitions.

<li><em>Install the base system using "Install the Base System".</em>
				    
<li><em>Insert a GRUB floppy in the drive and reboot with "Reboot the System"</em>
(don't forget to reset the bios).  That is it!  [First reboot]
</ol>   

<P>If your GNU/Hurd partition is "(hd0,0)" [GRUB nomenclature]
and "sd0s1" [GNU/Hurd], which being interpreted means the first
partition on the first HDD which is SCSI and there are no IDE drives,
then the system will boot with no intervention.<BR>

The GRUB image has been prepared so little editing is needed to boot the GNU 
system.</p>
<P>Keep you hands off the keyboard until the boot process has
completed.</P>

<P>"/boot/grub/menu.lst" on the GRUB floppy can be edited so your
system will boot the way you want.</P>


<H3>The next steps.</H3>

<ol>
<li><em>After the system has booted run ./native-install.</em> Reboot
the system using "reboot".  THIS IS IMPORTANT watch the boot messages
and note carefully where the cdrom is.  [Second reboot]
    
<li><em>After the reboot has completed run ./native-install a second time.</em> 
This time a whole bundle of packages will be configured.  Reboot yet again. 
[Third reboot]. You will now have a system to configure.<BR> 
Login as root, "login root".

<li><em>cd to /dev.  Make the necessary devices.</em> Ie, for the
cdrom, the swap partition and any other HDD partitions.

<p> Eg
"MAKEDEV hd2 hd0s2 hd0s3"</P>
		
<li><em>Edit /etc/fstab, "nano /etc/fstab"</em>.
nano is not a bad editor.<p>
Add the HDD partitions, eg,<br>
/dev/[Hurd partition name]   none    swap    sw    0       0<BR>
/dev/[Hurd partition name]   /CD1     ext2    rw    1       1<BR>
/dev/[GNU drive name]   /cdrom iso9660fs   ro,noauto  1    1</p>  

<P>The Hurd uses the ext2 fs.  "/CD1" is a suggested mount-point for 
the partition which contains the packages from GNU-K4-CD1. 
Swap can be shared with Linux.</P>
					
<li><em> Activate the swap "swapon -a".</em>
Check to see that is has worked.  Swap is HIGHLY recommended with the Hurd.

<li><em>Set up the translator that accesses the cdrom,</em> eg
<p>
"settrans -a /cdrom /hurd/iso9660fs /dev/[Hurd drive name]"<br>
While this is the GNU way of doing it, "mount /cdrom" will also work.
	
<li><em>Run "/cdrom/upgrade/install.sh"</em>.
<p>This will install the required, important and standard packages.</p>

<li><em>You may want to run "/cdrom/upgrade/gui.sh"</em>.
<p>This will install the X Window System.</p>
				
<li><em> Further packages can be installed using "apt or "dselect".</em>
<p>If you are unfamiliar with these Debian tools, see 
"info apt" and "info dselect".</p>

<li><em>Unmounting the cdrom</em>
<P>The cdrom drive is unmounted with "settrans -agf /cdrom"<BR>
The cdrom drive drawer should then be unlocked.</p>

</ol>

<P>This is where this guide finishes and you start exploring.  Enjoy the Hurd.</P>
<P>Comments about the CDs are welcome.<BR>  
Philip Charles, philipc@debian.org
