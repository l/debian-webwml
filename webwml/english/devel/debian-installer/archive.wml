#use wml::debian::template title="Setting up your apt-able d-i archive" NOHEADER="true"
#use wml::debian::recent_list

    <h1>Setting up apt-ftparchive to handle udebs</h1>

    <p>apt-ftparchive needs some tweaking to handle udebs properly.  I
    use something like</p>

<pre>
Dir {
    ArchiveDir "/home/tfheen/public_html/d-i";
    OverrideDir "indices";
    CacheDir "indices";
};

TreeDefault {
        Directory "pool/";
};

BinDirectory "pool/main" {
     Packages "dists/sid/main/debian-installer/binary-i386/Packages";
     BinOverride "override";
     ExtraOverride "override.extra";
};

Default {
        Packages {
                 Extensions ".udeb";
                 };
};
</pre>

    <p>You will have to tweak the paths and such for yourself, naturally.  To
    actually generate the Packages files:</p>
    <ol> 
      <li>Make sure that all the path components exists (<code>mkdir
    -p dists/sid/main/debian-installer/binary-i386</code>)</li>
      <li>use a command like
        <code>apt-ftparchive generate config</code> (if you put the above
        configuration in a file called config.)</li>
    </ol>

    <hrline>
    <address><a href="mailto:tfheen@debian.org">Tollef Fog Heen</a></address>
<!-- Created: Mon Dec  2 23:39:23 CET 2002 -->
<!-- hhmts start -->
Last modified: Thu Aug 14 11:18:08 CEST 2003
<!-- hhmts end -->

