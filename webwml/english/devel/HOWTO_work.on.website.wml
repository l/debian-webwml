#use wml::debian::template title="HOWTO Work on the Debian web pages"

<p>The Debian web pages are generated in one of three ways: Documentation
is mirrored from the
<a href="">Debian Documentation Project (DDP)</a>, parts of the web site
are generated using scripts (the Bug pages and Lists-Archives are two good
examples), and the rest are generated using wml.

<h3>What is wml?</h3>
WML looks very much like html for the most part, but has a number of filters
run over it before generating the final html. This allows us to have static
pages (a necessity for the web pages to be mirrored) while having most of the
benefits of dynamically created pages.

<p>One of the features of wml that we make extensive use of is the use of perl.
Remember, these are not dynamic pages. The perl is used at the time the html
pages are generated to do, well, whatever you like. Two good examples of how
we are using perl in the pages is to create the list of most recent news items for
the main page and to generate the links to translations at the end of the page.

<p>The documentation for wml is not easy to learn from. It is actually quite
complete, but until you begin to understand how it works (and it is quite
powerful) it is easiest to simply use existing pages as examples.

<h3>Accessing the wml source: using CVS</h3>
The wml source for the web pages is kept in CVS. With CVS, there is a central
site that keeps the master source and individuals 'checkout' a copy from the
repository to create a local copy. Even the copy on master, which is used to
generate the actual web pages, are updated daily by doing a '<kbd>cvs update</kbd>'
from the repository.

<p>Anyone can checkout a read-only copy from the repository using the username
<kbd>anonymous</kbd>. In order to have write access you need to write to
<a href="mailto:webmaster@debian.org">webmaster@debian.org</a>. If you are
not familiar with CVS, you can read the discussion with some examples on using
it in the <a href="HOWTO_translate">HOWTO translate pages</a> document.

<h3>Adding New Pages</h3>
<p>Adding new pages to Debian is quite easy. All the work of
getting the header and footer right are done using wml. All
you need to do is to include a line such as the following
at the top of the new file:
<pre><protect>
#use wml::debian::template title="TITLE OF PAGE" 
</protect></pre>
followed by the body. All pages should use the wml::debian::template
template file unless they are using a special one created just
for that section, e.g. the News or security pages.

<p>The template, wml::debian::template,  allows you to define certain
variables which will affect the pages created. This should avoid having
to create different templates for every situation and allow improvements
to be easier to implement. The variables currently available and their
purpose are:
<dl>
<dt>NOHEADER="yes"
	<dd>Removes the initial header from the page. A custom header
   can, of course, be included in the body.
<dt>NOHOMELINK="yes"
	<dd>Removes the link at the bottom of the page back to the
	main Debian page.
<dt>NOLANGUAGES="yes"
	<dd>Removes the links at the bottom of the page to versions in
	other languages.
<dt>NOCOPYRIGHT="yes"
	<dd>Removes the copyright notice at the bottom of the page.
</dl>

<p>An example of the use of this is in the ports pages which have
their own headers. ports/arm/index.wml uses:
<pre><protect>
#use wml::debian::template title="ARM Port" NOHEADER="yes"
</protect></pre>

<p>If you want to do something that can't be done using the existing
templates, first consider extending one of them. If it isn't
possible to extend one in a backward compatible way, try to make
the new template a superset of an existing one so the pages can
be converted to it at the next major upgrade (hopefully never more
than every 6 months).

<p>If you are creating a page that is generated by a script or has
little prose, consider using the slices filter within wml to ease
the task of keeping translations up to date. A good example of this
is in <kbd>distrib/vendors.wml</kbd>. New vendors can be added to this page and the
addition will be generated in every language automatically.
<kbd>vendors.wml</kbd> includes <kbd>vendors.CD</kbd> which contains the actual
list of vendors. This file in turn includes <kbd>distrib/vendors.CD.def</kbd>
which contains the definition of all the phrases in <kbd>vendors.CD</kbd>.
Translators simply need to add translations wherever there is a
slice, e.g.
<pre><protect>
	[EN:Country:]\
	[ES:Pa-is:]\
	[DE:Land:]\
</protect></pre>


