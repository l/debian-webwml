#use wml::debian::template title="HOWTO translate Debian pages"

<P>Thank you for helping to translate the Debian web pages.
Instead of having a number of different sites hosting language
specific versions of the web pages, it is hoped that people
will concentrate on translating the primary site which will host
translations of a common set of web pages.

<H3>Background</H3>
<P>All the hand written, non-documentation, html files on the web site are
generated using wml. They are stored on cvs.debian.org using CVS.
You will want to check out a local copy of the wml files to edit
on your home machine. When you are done making changes, you can then
commit the changes back to cvs.debian.org. Once a day, the copy of
the repository on master.debian.org will be updated. A Makefile is then
run on them to create the updated web pages. Finally, the pages are
distributed to all the web mirrors.

<H3>Current Translation Coordinators</H3>
<ul>
<li>French: Christophe Le Bars &lt;clebars@debian.org&gt;
    <br>See <a href="http://www.debian.org/~clebars/f2dp/ltcp.html">
    http://www.debian.org/~clebars/f2dp/ltcp.html</a> for more information.
<li>Spanish: Javier Fdz-Sanguino Pe&ntilde;a &lt;jfs@ieeesb.etsit.upm.es&gt;
<li>Danish: Flemming Mahler Larsen &lt;mahler@DK.net&gt;                                                 
    <br>See <a href="http://www.netfactory.dk/debian/">http://www.netfactory.dk/debian/</a>
    for more information.
<li>Japanese: Keita Maehara &lt;maehara@debian.org&gt;
<li>German: Thimo Neubauer &lt;thimo@debian.org&gt;
<li>Italian: Giuseppe Sacco &lt;gsacco@hsomail.com&gt;
<li>Russian: D'jinnie &lt;jinn@irony.org&gt;
<li>Croatian: Matej Vela &lt;mvela@public.srce.hr&gt;
<li>Polish: Marcin Owsiany &lt;porridge@pandora.info.bielsko.pl&gt;
<li>Dutch: Both Florus NTC/Zurich &lt;florus.both@usa.net&gt;
<li>Portuguese: Eduardo Marcel Macan &lt;thecore@thecore.com.br&gt;
<li>Chinese: Anthony Wong &lt;ypwong@debian.org&gt;
<li>Finnish: Antti-Juhani Kaijanaho &lt;gaia@iki.fi&gt;
<li>Swedish: peter karlsson &lt;peter@softwolves.pp.se&gt;
<li>Norwegian: Tor Slettnes &lt;tor@slett.net&gt;
<li>Korean: Seongtae Yoo &lt;alloying@nownuri.net&gt;
<li>Turkish: Andreas Mueller &lt;amu@tr.debian.net&gt;
<li>Esperanto: Eduardo Trapani &lt;etrapani@unesco.org.uy&gt;
<li>Arabic: Shaheen &lt;hchahine@magic.fr&gt;
<li>Hungarian: NAGY Viktor &lt;chaos@inf.elte.hu&gt;
<li>Romanian: Aurelian Melinte &lt;amelinte@ALIS.COM&gt;
</ul>
Contact them directly to get involved in a translation project.
Send mail to <a href="mailto:webmaster@debian.org">webmaster@debian.org</a>
if you would like to coordinate the translation to a new language.
Alternatively, you can join the Debian web mailing list,
debian-www@lists.debian.org, and ask there. See
<a href="http://www.debian.org/MailingLists/subscribe">
http://www.debian.org/MailingLists/subscribe</a> for subscription information.

<H3>Using CVS</H3>
<P>In what follows anonymous access will be used as an example. If
you have access to another account which gives you write permission to
the repository then you should use that account instead.
To begin using CVS, you must first <pre>login</pre> to the CVS server
<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml login
</pre>
(just hit return for the password for anonymous)

<P>To check out a copy of the wml files on your local machine, you need to use
<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout webwml/&lt;lang&gt;
</pre>
where &lt;lang&gt; is the language you want. You will probably want
the English version in addition to the language you are working on.
If you only need a subset of the pages you can check out only those needed, e.g.
<kbd>cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout webwml/english/SPI</kbd>.
or if you have been given a username/password, insert it instead of anonymous
<kbd>cvs -d :pserver:username@cvs.debian.org:/cvs/webwml checkout webwml/english/SPI</kbd>.

<P>From then on, you will not need to use the '-d :pserver:...' part.
Every few days you will want to do a
<pre>
   cvs update -d
</pre>
to retrieve any files from the repository which have changed.  The -d will add
any new directories, automatically.

<P>The following is for those who have write permission on the repository.
When you are done with a page, you can commit your changes to the repository using
<pre>
   cvs commit &lt;file&gt;.wml
</pre>
or
<pre>
   cvs commit &lt;dir&gt;   (to commit the changes in &lt;dir&gt;)
</pre>
or
<pre>
   cvs commit          (to commit all changes from the current dir down)
</pre>

<P>If you are the first person translating a page, you need to do
<pre>
   cvs add &lt;file&gt;.wml
</pre>
before you commit it. Note that 'cvs add' is not recursive so you need to
add a directory before you can add its contents.

<P>For more information on CVS, use 'info cvs'.

<H3>CVS Access for Debian Developers</H3>
<P>Since Debian developers already have an account on cvs.debian.org, a more
secure mechanism can be used to access the CVS repository. This method is preferred
over the :pserver: method given above.
You need to write to webmaster@debian.org asking for CVS access. Once you are added
to the group, simply set the environment variable CVS_RSH to ssh
('export CVS_RSH=ssh' in your .bashrc) and checkout the repository using the following:
<pre>
   cvs -d :ext:&lt;account_name&gt;@cvs.debian.org:/cvs/webwml checkout webwml/english/
</pre>

Once you have checked out the repository everything else works as in the previous section.

<H3>Translating Pages</H3>
<P>To make the job of the translators as easy as possible the pages are generated
a bit differently than many of you will be used to. The web pages are actually generated
using source that is marked up with wml. There are separate directories for each
language.
To start a new translation, someone must first add translations to the wml template
files in english/template/debian/*.wml (not a big job).
Please follow the comments as there are items that should not be translated.
Comments may begin with a pound sign, '#', in wml.

<P>Because of the way the web servers are set up (using content negotiation),
you should not have to change any of the internal links. Write to debian-www
if you feel a link is incorrect before changing it. There are times when
you may want to make a change to the content when you are
translating. One example is on the support page; you will
probably want to include an example on subscribing to the
language specific mailing list, e.g. debian-french on the
French version of the pages. If you make any other changes,
please notify
<a href="mailto:debian-www@lists.debian.org">debian-www@lists.debian.org</a>
as it is desired to keep the content as similar as possible
between the different versions.

<P>I hope you find the work we've done will make translating
the pages as easy as possible.

<p>Note: when a page is first translated, the other languages will not create
links to your page until they are regenerated.

<H3>Adding New Directories</H3>
<P>Some care should be taken when adding a new directory to CVS.
If the current directory is listed in ../Makefile then the current directory should
contain a Makefile - otherwise 'make' will give an error message.
You do not need to worry about non-existant directories being listed in a SUBS variable
since make is intelligent enough to skip them.

<H3>Generating the images for the navbar</H3>
<P>This should be one of the first tasks done so that once you start generating
pages the navbar links will be usable by users who don't speak english.
Create the Pics directory and copy the following files from webwml/english/Pics:
<pre>
   Makefile
   makebuttons.sh
   debbar.pl
</pre>
Translate the variables in makebuttons.sh and follow the instructions in that file.
This relies on the gimp which has been undergoing rapid development,
so the script breaks often. Send mail to debian-www if you have problems.

<P>Note that if any of the characters used in the navbar are not in the
iso8859-1 charset, then you will need to either change the font to one
for your charset, or edit the images by hand.

<H3>How Does the Server Know Which File to Serve</H3>
<P>You will notice that internal links don't end in .html. This
is because the server is using content negotiation to decide
which version of the document to deliver. When there is more
than one choice, the server will make a list of all possible
files to serve, e.g. if the request is for 'about', then the list
of completions might be about.en.html and about.de.html.
The default for Debian servers will be to serve the English
document, but it is configurable.

<P>If a client has the proper variable set, for example to serve German,
then in the example above about.de.html would be served. The
nice thing about this setup is that if the desired language is
not available, a different language will be delivered instead
(which hopefully is better than nothing). The decision on which
document is served is a bit confusing so instead of describing
it here, you should get the definitive answer from
<a href="http://www.apache.org/docs/content-negotiation.html">http://www.apache.org/docs/content-negotiation.html</a>
if you are interested.

<P>Because many users will not even know of the existence of content-negotiation,
there are links at the bottom of every page pointing directly
to the version of that page in every other language available.
This is computed using a perl script called by wml when the
page is generated. 

<H3>Example of Starting a Translation</H3>
French will be used for the example
<pre>
   cvs checkout webwml/english
   cd webwml
   mkdir french
   cvs add french
   cd french
   cp ../english/.wmlrc .
   cvs add .wmlrc
edit and change: '-D CUR_LANG=English' to '-D CUR_LANG=French'
                 '-D CUR_ISO_LANG=en' to '-D CUR_ISO_LANG=fr'
                 'CHARSET=iso-8859-1' if needed
Don't make any other changes to .wmlrc
Edit english/template/debian/*.wml and add translations to all the define-tag entries.
This should be quite straightforward
   cp ../english/Make.* ../english/Makefile .
   cvs add Make*
edit Make.lang, change 'LANG=en' to 'LANG=fr' and change 'LANGUAGECAP=EN' to
'LANGUAGECAP=FR'. You should not need to make any other changes to the Makefiles
unless you are translating to a language which uses a multi-byte charset.

The makefile in each directory will compile every .wml file it finds.

When done adding pages, do a
   cvs commit
from the webwml directory.
</pre>
You can now start translating the pages.

<H3>Example of Translating a Page</H3>
A French translation of the social contract will be used for the example
<pre>
   cvs checkout webwml/english webwml/french   (if you hadn't already)
   cd webwml/french
   cp ../english/social_contract.wml .
   cvs add social_contract.wml
edit social_contract.wml and translate the text. Do not try to translate any
links or change them in any way. When done, type
   cvs commit -m "short description of the changes you made" social_contract.wml
</pre>

<H3>Compiling wml</H3>
This assumes that you have wml installed on your machine.
Simply type <kbd>make</kbd> in webwml/&lt;lang&gt;. If you do a <kbd>make install</kbd>
then the html files will be placed in the directory <kbd>../../debian.org/</kbd>.

<p>Multi-byte languages may need special pre- or post-processing of the wml files
in order to handle the character set properly. This can be done by changing
the variables <kbd>WMLPROLOG</kbd> and <kbd>WMLEPILOG</kbd>.
in <kbd>webwml/&lt;lang&gt;/Make.lang</kbd> appropriately.
Depending on how your <kbd>WMLEPILOG</kbd> program works, you may need to change
the value of <kbd>WMLOUTFILE</kbd>.

<H3>Special files and directories</H3>
<ul>
<li><b>News/</b><br>
This directory contains all the news items sent to debian-announce. The
news items are also used to create a list of the titles of the most recent 
news items for the main page. This is all done automatically using scripts.

<p>You may translate any news items you wish. It is expected that time
constraints will mean that only special items, such as the announcement of
a new release of Debian, will be translated. It is completely up to you
what you translate. The script that grabs news headlines to generate the
index page and the items for the main web page checks for translations of
news items and if it doesn't find one, uses the title from the english copy.

<li><b>security/</b><br>
This directory contains the status of all Debian related security problems
that have been reported. Indices are created similarly to the News/ directory.
Translations are up to you.

<li><b>devel/people.wml</b><br>
This contains the list of package maintainers and what packages they maintain.
The list of names and packages is generated automatically and is kept in
webwml/english/devel/people.names. The only text in there that is english
specific is 'main', 'non-free', 'non-us', 'contrib' and 'homepage'.
If translators feel it is necessary, 'homepage' could be translated.
Send mail to debian-www if you would like this done.

<li><b>MailingLists/subscribe.wml and MailingLists/unsubscribe.wml</b><br>
These pages are generated automatically from scripts. Do not bother
translating these yet. A system for adding translations will be developed.

<li><b>distrib/vendors.wml</b><br>
vendors.wml should be translated. It includes <kbd>../../english/devel/vendors.CD</kbd>
which contains the actual list of vendors. This file does not contain any
language specific information, but includes <kbd>vendors.CD.def</kbd> which contains
the translation of all phrases needed in <kbd>vendors.CD</kbd>. You should add
translations for all entries of the form <kbd><protect>[EN:...:]</protect></kbd>.
For example,
<pre>
	<protect>[EN:Country:]\</protect>
	<protect>[ES:Pa-is:]\</protect>
	<protect>[DE:Land:]\</protect>
</pre>
Do not translate any other text on the page.

</ul>

