#use wml::debian::template title="The debian-volatile Project"
<define-tag current_testing_name>lenny</define-tag>
<define-tag current_stable_name>etch</define-tag>
<define-tag current_oldstable_name>sarge</define-tag>

<h2>debian-volatile for developers</h2>

<h3>What is debian-volatile?</h3>
<p>Some packages aim at fast moving targets, such as spam filtering and virus
scanning, and even when using updated data patterns, they do not really
work for the full time of a stable release. The main goal of volatile
is allowing system administrators to update their systems in a nice,
consistent way, without getting the drawbacks of using unstable, even
without getting the drawbacks for the selected packages. Instructions for
using the volatile archive can be found at the 
<a href="$(HOME)/volatile/">debian-volatile users page</a>.
</p>

<h3>Acceptance rules</h3>
<p>In order to include a package into debian-volatile, it has to meet the
following criteria:</p>
<ul>
 <li>The package should only be prepared in cooperation with its maintainer(s).<br />
 In other words: a package should be uploaded to debian-volatile
 only by its own package maintainer(s). This is the only way we can ensure
 security support for packages in debian-volatile as well as proper packaging
 and a smooth upgrade path.</li>

 <li>debian-volatile is not "just another place" for backports, but should only
  contain changes to stable programs that are necessary to keep them
  functional. A special section of the archive, named <em>sloppy</em>, can be considered to
  include packages with a bit more relaxed constraints, in respect with the main
  regular debian-volatile archive. That needs to be discussed on the list.
  </li>

 <li>The package should allow any administrator to "just use" volatile, as they "just
   use" security.d.o, and they can be confident that nothing could be broken by
   that.</li>

 <li>The usual Debian bug tracking system should be used for bugs.</li>

 <li>Packages in debian-volatile cannot require any package 
   outside of stable main (or any later version of it) to
   run or build. Packages need to be auto-buildable within the
   same (stable) release. This constraint could be relaxed for the sloppy
   archive, on case by case basis. That needs to be discussed on the list.
 </li>

 <li>Packages need to be conformant to stable policy; we currently take
   <a href="http://release.debian.org/<current_stable_name>_rc_policy.txt">http://release.debian.org/<current_stable_name>_rc_policy.txt</a>
   as a hint about what is ok and what not.</li>

 <li>The upgrade path from volatile to the next stable release needs to be at
  least as easy as for the stable release; version numbers in volatile 
  must not be higher than those in testing, for instance.</li>
</ul>

<h3>Procedure to include a package</h3>
<p>We experienced that the procedure below works quite well for new
packages inclusion in debian-volatile:</p>
<ol>
<li><em>Send an e-mail to the mailing list 
   <a href="mailto:debian-volatile@lists.debian.org">debian-volatile@lists.debian.org</a></em><br />
   
   This is for discussing your changes in public. It is also a good idea to
   include a link to a unified diff. Please, respect the debian-volatile
   guidelines, i.e. apply necessary changes only.<br />
   Fellow developers are encouraged to join this
   discussions, so that  the <a href="team">debian-volatile team</a> would know what changes
   the users like, and what not. Everybody on the list is encouraged
   to review the proposed changes.</li>

<li><em>Upload to debian-volatile</em><br />
   After receiving consensus from the list, please upload at least
   source and binary-all packages to <tt>volatile-master.debian.org</tt> (see below)
   using FTP. Please document changes in <tt>debian/changelog</tt>.
   Just writing<br />
   <code>* Upload package to volatile</code><br />
   is <em>NOT</em> acceptable. If you already did an upload to volatile for the package, and your proposed changes to the
   previous version are security fixes, please tell us in advance. If
   you already have got one or more CVE identifiers, please put them in the changelog for
   tracking the security issues. If you
   do not have any CVE id, please tell us anyway, because we can obtain them for you. If you
   want to contact the <a href="team">debian-volatile team</a> in private, please contact one
   of its members. Sometimes there are embargo dates on publication of security bugs and
   their fixes. We respect them.</li>

<li><em>Packages are built automatically</em><br />
Packages are built by the autobuilder network. No interaction or manual processing is
needed for that.</li>

<li><em>A Volatile Update Announce is being prepared</em><br />
While the package is autobuilt, the <a href="team">debian-volatile team</a> will contact
you about the content of the announcement mail, which will be sent via
<a href="mailto:debian-volatile-announce@lists.debian.org">debian-volatile-announce@lists.debian.org</a></li>

<li><em>Package is released.</em><br />
The package is finally reviewed and released.</li>
</ol>


<h3>How to upload to volatile</h3>
<p>You should add the following sniplet to your <tt>~/.dput.cf</tt>:</p>
<pre>
[volatile]
method = ftp
fqdn = volatile-master.debian.org
incoming = /pub/UploadQueue/
login = anonymous
hash = md5
</pre>

<p>Please note that uploads made by <a href="http://wiki.debian.org/Maintainers">Debian maintainers</a>
cannot currently be processed for volatile due to technical limitations.
You will need a sponsor who signs your upload.</p>

<p>If you are using dupload, the stanza below should be added to your <tt>~/.dupload.conf</tt>:</p>
<pre>
$cfg{'volatile'} = {
        fqdn => "volatile-master.debian.org",
        incoming => "/pub/UploadQueue/",
        \# files pass on to dinstall on ftp-master which sends emails itself
        dinstall_runs => 1,
        passive => 1,
};
</pre>

<h3>Installation times</h3>
<p>Unlike on <a href="http://ftp-master.debian.org/">ftp-master</a>, there are
no fixed <code>dinstall</code> times on <tt>volatile</tt>.
<code>dinstall</code> is run every 15 minutes by cron. First, any
<tt>changes</tt> file in the upload directory is checked. If there is any
<tt>changes</tt> file in <tt>queue/accepted</tt> after the check (means: at
least one package is accepted from the unchecked directory, or was accepted
by hand from the <tt>new</tt> queue) or any volatile ftpmaster gives a hint to
run <code>dinstall</code> in any case, <code>dinstall</code> is run and mirrors
are synced after the run.
</p>

<h3>Archive signing key, Mailing lists</h3>
<p>Please see the <a href="$(HOME)/volatile/">main volatile page</a> for details.</p>

