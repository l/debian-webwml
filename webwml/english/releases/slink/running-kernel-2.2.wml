#use wml::debian::template title="Errata: Running Linux 2.2.x in slink"

<p>

This page documents known problems with running the Linux 2.2.x kernel
in Debian 2.1 (slink).

<p>

The slink release is certified and officially tested for use with the
late 2.0.x Linux kernels.  Since the freeze of Debian occurred before
Linux 2.2's release, and the change of the kernel's major version
number can introduce complex issues, it was decided to stick with the
proven 2.0 line of kernels.

<p>

Debian releases, however, are not necessarily kernel version bound.
You may run any kernel you wish in Debian.  We simply can give no
assurances, however, that everything will function properly.  If you
do decide to move up to the Linux 2.2 line, and experience problems
with a package, you may have luck running the ``unstable'' (potato)
version of that package.

<p>

The <a
href="http://packages.debian.org/kernel-source-2.2.1">kernel-source-2.2.1</a>
package is shipped in the distribution to aid users who want to run
the Linux 2.2.x kernels.  However, it is recommended that you check
the standard kernel distribution sites, such as <a
href="http://www.kernel.org/">kernel.org</a>, for newer versions of
the 2.2.x source tree and additional errata.  There are known bugs in
2.2.1, and that version is known to have caused data corruption for
some.  You should get the patches for the newer 2.2 series kernel and
apply them to the Linux kernel source tree.


<h2>Potentially Problematic Packages</h2>

<p>

Note that this list is incomplete.  Please submit a bug against
www.debian.org if you find other problems not listed.  Check the bug
logs for the package in question as well as well; try to make sure
that the problem was introduced in Linux 2.2.

<dl>
	<dt><a href="http://packages.debian.org/sysutils">sysutils</a>
	<dd>
<tt>procinfo</tt> suffers from a segmentation fault.  The version from
<a href="http://www.debian.org/Packages/unstable/utils/sysutils.html">
unstable</a> fixes this.

	<dt><a href="http://packages.debian.org/netbase">netbase</a>
	<dd>
In Linux 2.2, <tt>ipautofw</tt> must be replaced by <tt>ipmasqadm</tt>
and <tt>ipfwadm</tt> is replaced with <tt>ipchains</tt>.  The
``unstable'' <a
href="http://www.debian.org/Packages/unstable/base/netbase.html">
netbase</a> package contains a wrapper script,
<tt>ipfwadm-wrapper</tt>, to ease the transition.
<p>
<tt>ifconfig</tt> won't show aliases interfaces, and <tt>ipchains</tt>
doesn't always clear packet counters.  Some routes built by the the
<tt>netbase</tt> init scripts will cause harmless warning messages.
<p>
All of these issues are solved in the <a
href="http://www.debian.org/Packages/unstable/base/netbase.html">
unstable</a> version.

	<dt><a href="http://packages.debian.org/pcmcia-source">pcmcia-source</a>
	<dd>
The version <tt>pcmcia-source</tt> in slink cannot be compiled with
the 2.2 kernel.  Fixed in the 
<a href="http://www.debian.org/Packages/unstable/admin/pcmcia-source.html">
unstable</a> version.

	<dt><a href="http://packages.debian.org/dhcpcd">dhcpcd</a>
	<dd>
Breaks for Linux 2.2, use the <a
href="http://www.debian.org/Packages/unstable/net/dhcpcd.html">
unstable version</a>.

	<dt><a href="http://packages.debian.org/dhcp-client-beta">dhcp-client-beta</a>
	<dd>
The <tt>/etc/dhclient-script</tt> doesn't work with 2.2. The version
from
<a href="http://www.debian.org/Packages/unstable/net/dhcp-client-beta.html">
unstable</a> fixes this.

	<dt><a href="http://packages.debian.org/wanpipe">wanpipe</a>
	<dd>
Version 2.0.1, in slink, is incompatible with the 2.2. kernels.
Version 2.0.4 and up, which you can get from 
<a href="http://www.debian.org/Packages/unstable/net/wanpipe.html">
unstable</a>, will work for the 2.2 kernels, but not with the 2.0
kernels (a kernel patch for 2.0 is included in the unstable version,
however).

	<dt><a href="http://packages.debian.org/lsof">lsof</a>
	<dd>
There doesn't seem to be a version of <tt>lsof</tt> which works with
the 2.2 kernels.

	<dt><a href="http://packages.debian.org/acct">acct</a>
	<dd>
The accounting structure has changed in the 2.2 kernel. Hopefully a
package that works with the new kernel will be available soon.

	<dt><a href="http://packages.debian.org/isdnutils">isdnutils</a>
	<dd>
<tt>isdnutils</tt> 3.0 or greater in Debian should work with both 2.0.x and 2.1.x kernels.
This is only the case because the Debian package maintainer took special trouble
to make sure this is the case. Other distributions may not be so lucky.

	<dt><a href="http://packages.debian.org/diald">diald</a>
	<dd>
The slink <tt>diald</tt> package has problems creating routes dynamically
in Linux 2.2.  There is not yet a version which fixes this in potato.

</dl>


<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-indent-data:nil
sgml-doctype:"../.doctype"
End:
-->
