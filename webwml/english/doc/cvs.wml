#use wml::debian::ddp title="Debian Documentation Project CVS"
#use wml::debian::toc

<p>The Debian Documentation Project stores its web pages and much of the
manual text on the Debian CVS server at <b>cvs.debian.org</b>.

<p>Everybody can download the sources from the CVS server. Only members of
the Debian Documentation Project can update files.</p>

<toc-display/>

<toc-add-entry name="access">Accessing the sources in CVS</toc-add-entry>
  
<p>You can use a viewCVS interface to access the files individually 
through the web and 
see changes to them at <url "http://cvs.debian.org/?cvsroot=debian-doc">

<p>For downloading an entire manual, direct access to the CVS server
is often a better option. You need the
<tt><a href="http://packages.debian.org/cvs">cvs</a></tt> package on your
own machine.

<h3>Connecting anonymously (read-only) to the CVS server</h3>

<p>To connect, enter this command:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:anonymous@cvs.debian.org:/cvs/debian-doc login</code>
</p>

<p>and just press enter when you are asked for a password.

<p>You can then use normal CVS commands (see the CVS info pages) to
check out files, but you cannot change and commit them.

<p>To download the files for the first time, create and move to a directory
to hold everything. Two directories, <strong>CVS</strong> and
<strong>ddp</strong>, will be created within this directory.

<p>Use this command to download all the files:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:anonymous@cvs.debian.org:/cvs/debian-doc -z3 checkout ddp/manuals.sgml</code>
</p>

<p>This will recursively create the directories and populate them.

<p>To update your local copy with any changes made by other people, enter
the <strong>ddp/manuals.sgml</strong> directory and run the command:

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<p>When you have finished a CVS remote session, use this command to
disconnect from the server:

<p style="margin-left: 2em">
  <code>cvs logout</code>
</p>

<h3>Connecting to the CVS server, with update privileges</h3>

<p>Before accessing the CVS server using this method you have to be
granted write access to it first.  Please read how to <a
href="#obtaining">request</a> update permission first.

<p>To connect, enter this command:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:<var>userid</var>@cvs.debian.org:/cvs/debian-doc login</code>
</p>

<p>and enter the password you have negotiated with the documentation coordinator.
In the above command, replace <var>userid</var> with your own user name on the
CVS password server. This is not necessarily the same as your login name in
<b>cvs.debian.org</b>, if you have one.

<p>You can then use normal CVS commands (see the CVS info pages) to
check out and commit files.

<p>To download the files for the first time, create and move to a directory
to hold everything. Two directories, <strong>CVS</strong> and
<strong>ddp</strong>, will be created within this directory.

<p>Use this command to download all the files:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:userid@cvs.debian.org:/cvs/debian-doc -z3 checkout ddp/manuals.sgml</code>
</p>

<p>This will recursively create the directories and populate them.

<p>To update your local copy with any changes made by other people, enter
the <strong>ddp/manuals.sgml</strong> directory and run the command:

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<p>When you have finished a CVS remote session, use this command to
disconnect from the server:

<p style="margin-left: 2em">
  <code>cvs logout</code>
</p>

<h3>Connecting to the CVS server, with update privileges, using SSH</h3>

<p>This method is only available to registered Debian developers and
is preferred over the pserver from above.  If you have recently become
a registered Debian developer, please notify the documentation
coordinator to nuke your pserver account.

<p>To connect using ssh, first tell CVS to use that with:

<p style="margin-left: 2em">
  <code>export CVS_RSH=ssh</code>
</p>

<p>Then create and move to a directory to hold everything, and enter this
command:

<p style="margin-left: 2em">
  <code>cvs -d :ext:<var>userid</var>@cvs.debian.org:/cvs/debian-doc -z3 checkout <var>module</var></code>
</p>

<p>In the above command, replace <var>userid</var> with your own user name on the
CVS server. This is the same as your login name on all Debian machines.
Replace <var>module</var> with the name
of the module you wish to check out, commonly that's <tt>ddp/manuals.sgml</tt>.
You are then prompted for your password to the CVS server. Do not confuse
this with your own machine.

<p>Two directories, <strong>CVS</strong> and <strong>ddp</strong>, will be
created within this directory. CVS will recursively create any modules (i.e.
directories) you requested and populate them with files.

<p>You can then use normal CVS commands (see the CVS info pages) to check
out and commit files.

<p>To update your local copy with any changes made by other people, move to
the <strong>ddp/manuals.sgml</strong> directory and run the command:

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<toc-add-entry name="obtaining">Obtaining update privileges</toc-add-entry>

<p>Update privileges are available to anyone who wishes to participate in
writing the manuals.  We generally request that you have submitted
a couple of useful patches first.

<p>To obtain update privileges, you need to send a request to the 
<a href="mailto:debian-doc@lists.debian.org">Debian documentation
mailing list</a>. Please explain why you need access. Either the
Documentation Coordinator or a relevant member of the Debian 
Documentation Team needs to approve your request before you are 
granted access. Once they have approved your request you should
ask them to send a (signed) request to
<a href="mailto:debian-admin@lists.debian.org">debian-admin</a>.

<p>If you are a Debian developer, once the request is approved, you 
will be added to the <tt>cvs_doc</tt> group at <tt>cvs.debian.org</tt>
and you will be able to update the CVS from there on.

<p>If you are not a Debian developer, once your request is approved
you will need to supply a a login name and a password. 
The login name has to be distinct from existing Debian
accounts (please check with 
<a href="http://db.debian.org">db.debian.org</a>).
The password must not be sent via mail un-encrypted, even 
though cvs sends it through the network un-encrypted.

<p>You can use <tt>makepasswd</tt> to generate your password, just
install that package and run:

<pre>
$ echo "SECRET" |makepasswd --clearfrom=- --crypt
</pre>

<P>Another simple way to encrypt a password is by using a Perl one-liner,
knowing that Perl is already installed on your Debian GNU/Linux
machine:

<pre>
$ perl -e "printf \"%s\n\", crypt ("SECRET", join ('', ('.', '/', 0..9, 'A'.. 'Z', 'a'..'z')[rand (64), rand (64)]))"
</pre>


<p>Please send the result, together with the preferred account name,
to <a href="mailto:joey@debian.org">Martin Schulze</a>. 
Encrypt the entire mail with <a href="http://db.debian.org/fetchkey.cgi?fingerprint=B53FE57BD0C1F689FCE25">his GnuPG key</a>.

<p>For further information please read his 
<a href="http://people.debian.org/~joey/misc/webwml.html">notes</a>
on the procedure.

<hr>

<toc-add-entry name="organization">Organization of files</toc-add-entry>

<p>This figure shows the structure of the CVS directory tree:

<p><img src="dirtree.jpg" align="middle" alt="DDP CVS directory tree">

<p>Please note that the DDP web site is located in the webwml module of the
Debian CVS repository, to be integrated with the rest of the Debian web
pages.

<hr>

<toc-add-entry name="updates">Automatic update mechanism</toc-add-entry>

<p>The published web pages of the manual text are generated by a cron job run
on www-master.debian.org every day sometime after 15:39 Pacific time.

<p>The script does a <kbd>cvs update -d -P</kbd>, and then
<kbd>make -C manuals.sgml clean publish</kbd>, both in the
<code>ddp</code> directory.

<p>The makefile is set up to rebuild each subdirectory (that contains
maintained documentation), and to install the files from each subdirectory
in <code>doc/manuals/</code> subdirectory of the web site. The subdirectory
makefiles are derived from <code>ddp/manuals.sgml/standard.makefile</code>.

<p>The documentation files generated by the update script can be found at
<a href="manuals/">http://www.debian.org/doc/manuals/</a>.</p>

<p>The log files generated by the update script can be found at
<url "http://www-master.debian.org/build-logs/ddp/">

# <!-- Created: Mon Jul  6 19:58:09 BST 1998 -->
