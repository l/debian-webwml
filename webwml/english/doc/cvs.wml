#use wml::debian::ddp title="DDP CVS Access"

<h1>CVS Access to the DDP documents</h1>

<p>The Debian Documentation Project stores its webpages and much of the
manual text on the Debian CVS server at <b>cvs.debian.org</b>.

<p>Only members of the Debian Documentation Project can update files on
the CVS server.  Others can access these files for downloading only.
  
<p>You can use <a href="http://cvs.debian.org/ddp/manuals.sgml/?cvsroot=debian-doc">CVSWeb</a>
to access the files individually and see changes to them.

<p>For downloading an entire manual, direct access to the CVS server
is a better option. You need the <tt>cvs</tt> package on your own machine.

<h2>Connecting anonymously (read-only) to the CVS server</h2>

<p>To connect, enter this command:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:anonymous@cvs.debian.org:/cvs/debian-doc login</code>
</p>

<p>and just press enter when you are asked for a password.

<p>You can then use normal CVS commands (see the CVS info pages) to
check out files, but you cannot change and commit them.

<p>To download the files for the first time, create and move to a directory
to hold everything. Two directories, <strong>CVS</strong> and
<strong>ddp</strong>, will be created within this directory.

<p>Use this command to download all the files:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:anonymous@cvs.debian.org:/cvs/debian-doc -z3 checkout ddp/manuals.sgml</code>
</p>

<p>This will recursively create the directories and populate them.

<p>To update your local copy with any changes made by other people, enter
the <strong>ddp/manuals.sgml</strong> directory and run the command:

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<p>When you have finished a CVS remote session, use this command to
disconnect from the server:

<p style="margin-left: 2em">
  <code>cvs logout</code>
</p>

<h2>Connecting to the CVS server, with update privileges</h2>

To connect using ssh, first tell CVS to use that with:

<p style="margin-left: 2em">
  <code>export CVS_RSH=ssh</code>
</p>

<p>Then create and move to a directory to hold everything, and enter this
command:

<p style="margin-left: 2em">
  <code>cvs -d :ext:<i>userid</i>@cvs.debian.org:/cvs/debian-doc -z3 checkout <i>module</i></code>
</p>

<p>In the above command, replace <i>userid</i> with your own user name on the
CVS password server. This is not necessarily the same as your login name in
<b>cvs.debian.org</b>, if you have one. Replace <i>module</i> with the name
of the module you wish to check out, commonly that's <tt>ddp/manuals.sgml</tt>.

<p>You are then prompted for your password to the CVS server. Do not confuse
this with your normal login password, whether on <b>cvs.debian.org</b> or
your own machine.

<p>Two directories, <strong>CVS</strong> and <strong>ddp</strong>, will be
created within this directory. CVS will recursively create any modules (i.e.
directories) you requested and populate them with files.

<p>You can then use normal CVS commands (see the CVS info pages) to check
out and commit files.

<p>To update your local copy with any changes made by other people, move to
the <strong>ddp/manuals.sgml</strong> directory and run the command:

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<h2>Obtaining update privileges</h2>

<p>Update privileges are available to anyone who wishes to participate in
writing the manuals.

<p>To obtain update privileges, send a request to the
<a href="mailto:aph@debian.org">Documentation Coordinator</a>, stating the
username you want to use on the pserver and supplying an encrypted password,
generated with

<p style="margin-left: 2em">
  <code>makepasswd --crypt --clear=<i>your_password</i></code>
</p>

<p>(<tt>makepasswd</tt> is a Debian package.)

<p>If you don't supply a password, one will be generated for you, but it
won't be memorable. To change your password, e-mail the Coordinator again,
supplying the new, encrypted password.

<hr>

<h1>Organisation of files</h1>

<p>This figure shows the structure of the CVS directory tree:

<p><img src="dirtree.jpg" align="middle">

<p>Please note that the DDP web site is located in the webwml module of the
Debian CVS repository, to be integrated with the rest of the Debian web
pages.

<hr>

<h1>Automatic update mechanism</h1>

<p>The published web pages of the manual text are generated by a cron job run
on <b>va.debian.org</b> at 01:27 and 13:27 Pacific time each day.

<p>The manuals are updated by a `make' in the directory
<code>ddp/manuals.sgml</code>, which does a `make' in each subdirectory.
The subdirectory makefiles are symlinks to (or derived from)
<code>ddp/manuals.sgml/standard.makefile</code>.

<p>This is the content of the cron script:

<pre style="margin-left: 2em">
\#! /bin/bash
\# Script for updating the DDP manuals and webpages

echo "Debian Documentation Project

Build run at `date`
"

export CVSROOT=/cvs/debian-doc

(cd ddp/manuals.sgml; make clean)
cvs update -d ddp

cd ddp/manuals.sgml
make

echo "

Build finished at `date`
"
</pre>

<!-- Created: Mon Jul  6 19:58:09 BST 1998 -->
