#use wml::debian::cdimage title="Створення дзеркала для образів компакт-дисків Debian" BARETITLE=true
#use wml::debian::translation-check translation="1.14" maintainer="Borys Yanovych"
#use wml::debian::toc

<p>Для створення сайту образів компакт-дисків Debian вам потрібна Linux- або Unix-подібна
машина з постійним, надійним з'єднанням з Internet. На дзеркалах КД Debian
зберігаються <tt>.iso</tt>-образи для компакт-дисків та DVD різних розмірів,
файли для <a href="http://atterer.net/jigdo/">jigdo</a> (<tt>.jigdo</tt> and
<tt>.template</tt>), файли для <a
href="http://bitconjurer.org/BitTorrent/">BitTorrent</a>
(<tt>.torrent</tt>) та контрольні суми (MD5) образів
(<tt>MD5SUMS*</tt>).</p>

<toc-display/>

<hr>
#______________________________________________________________________

<toc-add-entry name="master">Головний сайт</toc-add-entry>

<p><!-- There are two locations for mirroring, one for stable images and
one for beta/unstable/testing images. -->
Нижче наведено URL-адреси головного сайту&nbsp;— проте, <strong>будь ласка</strong>,
якщо є така можливість, для віддзеркалення завантажуйте образи
з іншого, найближчого до вас дзеркала (списки дзеркал: <a
href="../http-ftp/">HTTP/FTP</a>, <a href="rsync-mirrors">rsync</a>).
Доступ до головного сайту одразу після виходу нового випуску може бути
обмежений.</p>

<p>Зауважте також, що в цих теках зберігається <strong>величезна</strong>
кількість даних&nbsp;— детальніше про те як зменшити розмір,
виключивши деякі з файлів, можна дізнатись, прочитавши 
<a href="#exclude">розділ нижче</a>.</p>

<ul>

  <li>Стабільні образи (оновлюються при кожному виході стабільного випуску):<br>

    <a href="http://cdimage.debian.org/debian-cd/"
    ><tt>http://cdimage.debian.org/debian-cd/</tt></a><br>

    <a href="ftp://cdimage.debian.org/debian-cd/"
    ><tt>ftp://cdimage.debian.org/debian-cd/</tt></a><br>

    <tt>rsync://cdimage.debian.org/debian-cd/</tt>

  </li>

  <li>Щотижневі образи:<br>

    <a href="http://cdimage.debian.org/cdimage/weekly-builds/"
    ><tt>http://cdimage.debian.org/cdimage/weekly-builds/</tt></a><br>

    <a href="ftp://cdimage.debian.org/cdimage/weekly-builds/"
    ><tt>ftp://cdimage.debian.org/cdimage/weekly-builds/</tt></a><br>

    <tt>rsync://cdimage.debian.org/cdimage/weekly-builds/</tt>

  </li>

  <li>Щоденні образи:<br>

    <a href="http://cdimage.debian.org/cdimage/daily-builds/"
    ><tt>http://cdimage.debian.org/cdimage/daily-builds/</tt></a><br>

    <a href="ftp://cdimage.debian.org/cdimage/daily-builds/"
    ><tt>ftp://cdimage.debian.org/cdimage/daily-builds/</tt></a><br>

    <tt>rsync://cdimage.debian.org/cdimage/daily-builds/</tt>

  </li>

<!--
  <li>Бета/нестабільні/тестові образи:<br>

    <a href="http://cdimage.debian.org/pub/cdimage-testing/"
    ><tt>http://cdimage.debian.org/pub/cdimage-testing/</tt></a><br>

    <a href="ftp://cdimage.debian.org/pub/cdimage-testing/"
    ><tt>ftp://cdimage.debian.org/pub/cdimage-testing/</tt></a><br>

    <tt>rsync://cdimage.debian.org/cdimage-testing/</tt>

  </li>
 -->

</ul>
#______________________________________________________________________

<toc-add-entry name="httpftp">Віддзеркалення за допомогою HTTP/FTP не
рекомендується</toc-add-entry>

<p>Ви не повинні використовувати FTP чи HTTP для оновлення вашого дзеркала.
Під час передачі даних за допомогою цих протоколів імовірність помилок
є доволі високою з огляду на величезний розмір файлів.</p>

<p>Крім цього, в протоколах HTTP та FTP не передбачено перевірок 
цілісності завантажених даних, а тому переривання завантаження або
пошкодження даних може залишитись непоміченим.</p>

#______________________________________________________________________

<toc-add-entry name="rsync">Віддзеркалення за допомогою rsync є
прийнятним</toc-add-entry>

<p>Програма <a href="http://rsync.samba.org/"><kbd>rsync</kbd></a>&nbsp;—
непогане вирішення проблеми віддзеркалення. Вона є менш ефективною ніж
інші, характерні для Debian рішення (про них йдеться нижче), однак налаштувати
її простіше. До того ж, гарантується, що всі файли будуть передані
правильно і збережеться синхронізація метаданих (наприклад, часові позначки),
так само як і файлових даних.</p>

<p>Приклади використання перемикачів <kbd>--include</kbd> та <kbd>--exclude</kbd>
можна знайти, переглянувши розділ 
<a href="#exclude">Віддзеркалювання за виключенням деяких файлів</a>. 

Окремо доступний <a href="rsync-mirrors">список дзеркал rsync</a>.</p>

<p>Як мінімум, використовуйте опції <strong><kbd>--times --links --hard-links --partial
--block-size=8192</kbd></strong>. При цьому збережеться час модифікації,
символьні та жорсткі посилання та використовуватиметься розмір блоку 8192 байт
(найбільш ефективний для образів компакт-дисків). Якщо час модифікацій та розмір
файлу співпадають, то <kbd>rsync</kbd> залишить цей файл у спокої і не намагатиметься
оновлювати його, отже користуватися перемикачем <kbd>--times</kbd> справді
необхідно.</p>

<toc-add-entry name="jigdolite">Віддзеркалення за допомогою jigdo-lite не
рекомендується</toc-add-entry>

<p>Попередні версії програми <a
href="http://atterer.net/jigdo/"><kbd>jigdo-lite</kbd></a> 
підтримують одночасне завантажування декількох образів „в пакеті“.

Проте, ми не рекомендуємо використовувати <kbd>jigdo-lite</kbd>
для створення дзеркал компакт-дисків Debian&nbsp;—
натомість використовуйте <kbd>jigdo-mirror</kbd>.</p>

#______________________________________________________________________

<toc-add-entry name="jigdomirror">Рекомендується віддзеркалення за допомогою 
jigdo-mirror</toc-add-entry>

<p>Фактично, це означає: створіть відображення <tt>.iso</tt>-файлів
за допомогою <a href="http://atterer.net/jigdo/"><kbd>jigdo-mirror</kbd>,
після чого (якщо ви маєте на меті віддзеркалити й файли інших типів,
таких як <tt>.jigdo</tt> та <tt>.template</tt>) запустіть rsync в цій теці 
та завантажте решту файлів. Скрипти з <a
href="http://www.acc.umu.se/~maswan/debian-push/cdimage/">цієї сторінки</a>
можуть стати в нагоді при налаштуванні системи.</p>

<p>Багато людей підтримують „звичайні“ дзеркала Debian (<kbd>debian/</kbd>)
або просто мають гарний зв'язок з таким дзеркалом. А отже, в них вже є 
включені в образи компакт-дисків <tt>.deb</tt>-файли. Очевидне запитання:
а чому б не використати ці ж самі файли в образах компакт-дисків?</p>

<p><kbd>jigdo-mirror</kbd>&nbsp;— це програма, що дозволяє створювати 
образи компакт-дисків Debian за допомогою файлів зі „звичайних“ сховищ
та декількох додаткових файлів шаблонів jigdo.</p>

<p>Перш за все вам потрібні файли шаблонів jigdo. Відповідні
посилання ви можете знайти на <a href="../jigdo-cd">інформаційній
сторінці jigdo</a>. Стягніть файли для кожної з архітектур, для котрих
ви плануєте створювати образи.</p>

<p>Створіть файл <kbd>~/.jigdo-mirror</kbd> з налаштуваннями програми.
Ось приклад:</p>

<pre>
jigdoDir="/where/you/keep/mirrors/debian-cd/current/jigdo"
imageDir="/where/you/keep/mirrors/debian-cd/current/images"
tmpDir="/where/you/keep/mirrors/debian-cd/current/images"
debianMirror="file:/where/you/keep/mirrors/debian"
include='i386/|sparc/|powerpc/|source/'; exclude='-1\.'
</pre>

<p>Змінні <i>include</i> та <i>exclude</i> містять списки
архітектур, для яких ви хочете створити образи (швидше, регулярні вирази).
Щоб отримати більше інформації перегляньте сторінку довідки 
<kbd>jigdo-mirror</kbd> або власне джерельні коди програми (це shell-сценарій
з багатьма коментарями).</p>

<p>Після того, як ви все це налаштували, просто запустіть <kbd>jigdo-mirror</kbd>
і програма все зробить сама. Під час роботи на екран буде виведено досить багато 
інформації, а сам процес займе деякий час, тому ми пропонуємо вам 
здійснити певні кроки для його контролю (запускати програму в screen,
перенаправляти її вивід в файл, тощо).</p>

#______________________________________________________________________

<toc-add-entry name="pushmirror">Як створити push-дзеркало</toc-add-entry>

<p>Як тільки стають доступними нові образи головний сайт може
надіслати своїм дзеркалам повідомлення про необхідність негайно
почати оновлення. Таким чином, ця схема (коли нові дані фактично
„втискуються“ в дзеркало замість того, щоб очікувати доки вони
„витягнуться“ під час наступного щоденного оновлення дзеркала)
сприяє швидшому розповсюдженню нових випусків образів.</p>

Якщо ви хочете, щоб ваше дзеркало стало частиною такої системи оновлень,
будь ласка, перегляньте 
<a href="http://www.acc.umu.se/~maswan/debian-push/cdimage/">цю сторінку</a>.</p>

#______________________________________________________________________

<toc-add-entry name="exclude">Віддзеркалення з виключенням деяких файлів</toc-add-entry>

<p>Щоб скоротити необхідний для вашого дзеркала компакт-дисків Debian
розмір дискового простору ви можете утриматись від віддзеркалення 
деяких файлів. Далі наведені параметри командного рядка
для команди <kbd>rsync</kbd>, однак вони можуть допомогти і у випадку,
коли ви користуєтесь іншими інструментами для віддзеркалення. 
<kbd>rsync</kbd> розглядає перемикачі <kbd>--include</kbd> та <kbd>--exclude</kbd>
в тому порядку, в якому вони вказані і рішення про необхідність
віддзеркалення певного файлу визначається першим перемикачем,
вираз для якого відповідає назві файла.</p>

<ul>

  <li><strong>Не віддзеркалювати джерельні коди:</strong>
  <kbd>--exclude=source/</kbd><br>

  В такому випадку образи, котрі містять джерельні коди віддзеркалюватись
  не будуть. Зверніть увагу, що деякі люди вважають неприйнятним, коли
  ліцензовані за GPL двійкові програми знаходяться на сервері без розміщення
  відповідних джерельних кодів <em>на цьому ж самому сервері</em>.</li>
  
  <li><strong>Не віддзеркалювати повні образи:</strong>
  <kbd>--include='*businesscard*.iso' --include='*netinst*.iso'
  --exclude='*.iso'</kbd><br>

  Не віддзеркалювати жодних наборів CD/DVD-образів ні для яких
  архітектур, <em>окрім</em> так званих businesscard та netinstall
  <tt>.iso</tt>-образів. Ми рекомендуємо завжди створювати дзеркала
  для цих невеликих образів: з огляду на їх невеликий розмір вони
  надзвичайно корисні!</li>

  <li><strong>Не віддзеркалювати повні образи для всіх архітектур, крім i386:</strong>
  <kbd>--include='*businesscard*.iso' --include='*netinst*.iso'
  --include='i386/**.iso' --exclude='*.iso'</kbd><br>

  Те ж саме що й у попередньому випадку, однак <em>віддзеркалюються</em> 
  всі CD/DVD-образи для архітектури i386.</li>

  <li><strong>Не віддзеркалювати повні образи, окрім компакт-дисків з першого по
  третій для архітектури i386:</strong>
  <kbd>--include='*netinst*.iso' --include='i386/**-[1-3].iso'
  --exclude='*.iso'</kbd><br>

  Повний набір образів, що включає в себе одношарові та двошарові DVD-образи, 
  може зайняти надто багато вашого дискового простору. Вказавши такі
  параметри, ви отримаєте можливість віддзеркалювати лише netinst-образи
  та образи перших трьох компакт-дисків для архітектури i386.</li>

  <li><strong>Не віддзеркалювати жодної з архітектур, окрім i386:</strong>
  <kbd>--exclude=alpha/ --exclude=arm/ --exclude=hppa/ --exclude=hurd/
  --exclude=ia64/ --exclude=m68k/ --exclude=mips/ --exclude=mipsel/
  --exclude=powerpc/ --exclude=s390/ --exclude=sh/
  --exclude=sparc/</kbd><br>

  Включати повний набір файлів лише для архітектури i386, жодні файли для 
  інших архітектур віддзеркалюватись не будуть (ні <tt>.jigdo</tt>, 
  ні <tt>.iso</tt>, ані будь-які інші).</li>

</ul>
#______________________________________________________________________

<toc-add-entry name="names">Вимоги до назв та розмірів образів <tt>.iso</tt>
</toc-add-entry>

<p>Різні варіанти <tt>.iso</tt>-образів розрізняються за своїми назвами,
дозволяючи вам накласти обмеження на типи образів для вашого дзеркала:</p>

<ul>

  <li><strong><tt>*-businesscard.iso</tt></strong>: Один образ для кожної
  з <a href="/ports/#released">архітектур, що підтримуються</a>,
  50&nbsp;Мб</li>

  <li><strong><tt>*-netinst.iso</tt></strong>: Один образ для кожної
  архітектури, 110&nbsp;Мб</li>

  <li><strong><tt>*-dvd.iso</tt></strong> (одношарові DVD):
  Декілька образів лише для i386, кожен розміром до 4482&nbsp;Мб.
  Для sarge сумарний розмір i386-образів становить близько
  9000&nbsp;Мб.</li>

  <li><strong><tt>*-dldvd.iso</tt></strong> (двошарові DVD): Те ж
  саме, за винятком того, що розмір одного образу може досягати
  8106&nbsp;Мб. Для sarge <tt>.iso</tt>-образи недоступні, тільки
  файли jigdo.</li>

  <li><strong><tt>*.iso</tt></strong>: Всі інші файли
  <tt>.iso</tt>, назви яких не відповідають жодному з наведених вище виразів&nbsp;—
  це образи звичайних компакт-дисків: по декілька файлів для кожної 
  архітектури, кожен розміром до 650&nbsp;Мб. Сумарний розмір всіх образів
  для всіх архітектур рівний <a href="/mirror/size">повному розміру дзеркала
  Debian</a> (на момент написання цих рядків&nbsp;— близько 100&nbsp;Гб).</li>

</ul>
#______________________________________________________________________

<toc-add-entry name="register">Реєстрація дзеркала</toc-add-entry>

<p>Щоб зробити ваше дзеркало образів компакт-дисків корисним
для ширшої аудиторії, ви можете зареєструвати його в нашому
списку дзеркал, в <a href="../http-ftp/">цьому</a> або в 
<a href="rsync-mirrors">цьому</a>. Проте, оскільки повні образи
є досить великими файлами, це може призвести до щоденного
трафіку в декілька гігабайт.</p>

<p>Ви можете зареєструвати ваше дзеркало або заповнивши
<a href="$(HOME)/mirror/submit">відповідну форму</a>
(зауважте, що поля CDImage-* є дуже важливими), 
або ж відіславши електронного листа за адресою
<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;debian-cd&#64;lists.debian.org">\
debian-cd&#64;lists.debian.org</a>.</p>

<p>Ми цінуємо кожне нове дзеркало образів компакт-дисків. Заздалегідь дякуємо вам!</p>
