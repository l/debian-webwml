#use wml::debian::ddp title="CVS Проекта документирования Debian"
#use wml::debian::toc
#use wml::debian::translation-check translation="1.23"

<p>Web-страницы и многие руководства Проекта Документирования Debian 
(Debian Documentation Project) располагаются на CVS-сервере Debian 
<b>cvs.debian.org</b>.

<p>Загружать исходные файлы с CVS-сервера может кто угодно. Однако,
обновлять файлы могут только члены Проекта документирования Debian.</p>

<toc-display/>

<toc-add-entry name="access">Доступ к исходным файлам в CVS-репозитории</toc-add-entry>
  
<p>Вы можете использовать интерфейс viewCVS для доступа к отдельным файлам
через WWW и просматривать изменения в них по адресу
<url "http://cvs.debian.org/?cvsroot=debian-doc">.

<p>Для загрузки целого документа, как правило, лучше использовать прямой
доступ к CVS-серверу. Вам нужно установить на своей машине пакет
<tt><a href="http://packages.debian.org/cvs">cvs</a></tt>.

<h3>Анонимное соединение (только для чтения) с CVS-сервером</h3>

<p>Чтобы соединиться, введите команду:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:anonymous@cvs.debian.org:/cvs/debian-doc login</code>
</p>

<p>и в ответ на приглашение ввести пароль просто нажмите Enter.

<p>После соединения вы можете использовать обычные команды CVS (см. 
info-страницы CVS), чтобы извлечь файлы, но не можете изменять и 
регистрировать изменения в них.

<p>Чтобы загрузить файлы в первый раз, создайте каталог, где они будут
храниться, и перейдите в него. В этом каталоге будут созданы два
подкаталога: <strong>CVS</strong> и <strong>ddp</strong>.

<p>Для загрузки всех файлов используйте эту команду:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:anonymous@cvs.debian.org:/cvs/debian-doc -z3 checkout ddp/manuals.sgml</code>
</p>

<p>Она рекурсивно создаст и заполнит каталоги.

<p>Чтобы обновить вашу локальную копию, внеся в неё изменения, сделанные
другими людьми, войдите в каталог <strong>ddp/manuals.sgml</strong>
и выполните команду:

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<p>После того, как вы завершили сеанс удалённой работы с CVS,
используйте для отсоединения от сервера команду:

<p style="margin-left: 2em">
  <code>cvs logout</code>
</p>

<h3>Соединение с CVS-сервером с правами на изменение</h3>

<p>Перед использованием этого способа доступа к CVS-серверу вы должны
получить право на изменение файлов на сервере. Пожалуйста, прочтите,
<a href="#obtaining">как отправить соответствующий запрос</a>.

<p>Чтобы соединиться, введите команду:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:<var>идентификатор</var>@cvs.debian.org:/cvs/debian-doc login</code>
</p>

<p>и введите пароль, согласованный с координатором документации. В команде
замените <var>идентификатор</var> вашим именем пользователя на сервере
паролей CVS. Оно не обязательно совпадает с вашим именем на <b>cvs.debian.org</b>,
если оно у вас есть.

<p>Вы можете использовать обычные команды CVS (см. info-страницы CVS)
для извлечения файлов и регистрации изменений в них.

<p>Чтобы загрузить файлы в первый раз, создайте каталог, где они будут
храниться, и перейдите в него. В этом каталоге будут созданы два
подкаталога: <strong>CVS</strong> и <strong>ddp</strong>.

<p>Для загрузки всех файлов используйте команду:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:<var>идентификатор</var>@cvs.debian.org:/cvs/debian-doc -z3 checkout ddp/manuals.sgml</code>
</p>

<p>Она рекурсивно создаст и заполнит каталоги.

<p>Чтобы обновить вашу локальную копию, внеся в неё изменения, сделанные
другими людьми, войдите в каталог <strong>ddp/manuals.sgml</strong>
и выполните команду:

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<p>После того, как вы завершили сеанс удалённой работы с CVS,
используйте для отсоединения от сервера команду:

<p style="margin-left: 2em">
  <code>cvs logout</code>
</p>

<h3>Соединение с CVS-сервером с правами на изменение с помощью SSH</h3>

<p>Этот способ могут использовать только зарегистрированные разработчики
Debian. По сравнению с pserver, описанным выше, он является предпочтительным.
Если вы только что стали зарегистрированным разработчиком Debian,
пожалуйста, уведомите об этого координатора документации, чтобы он
удалил вашу учётную запись pserver.

<p>Чтобы подсоединиться по ssh, сперва сообщите об этом CVS:

<p style="margin-left: 2em">
  <code>export CVS_RSH=ssh</code>
</p>

<p>Затем создайте каталог, где будут храниться файлы, перейдите в него и
выполните команду:

<p style="margin-left: 2em">
  <code>cvs -d :ext:<var>идентификатор</var>@cvs.debian.org:/cvs/debian-doc -z3 checkout <var>модуль</var></code>
</p>

<p>В команде замените <var>идентификатор</var> вашим именем пользователя на
сервере паролей CVS. Это то же самое имя, что и на всех машинах Debian.
Замените <var>модуль</var> названием модуля, который вы хотите загрузить,
обычно это <tt>ddp/manuals.sgml</tt>. Далее у вас запросят пароль на 
CVS-сервере. Не путайте его с паролем на вашей машине.

<p>В этом каталоге будут созданы два каталога, <strong>CVS</strong> и 
<strong>ddp</strong>. CVS рекурсивно создаст любые запрошенные вами модули 
(т.е. каталоги) и заполнит их файлами.

<p>Вы можете использовать обычные команды CVS (см. info-страницы CVS)
для извлечения файлов и регистрации изменений в них.

<p>Чтобы обновить вашу локальную копию, перейдите в каталог
<strong>ddp/manuals.sgml</strong> и запустите команду:

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<toc-add-entry name="obtaining">Как получить права на обновление</toc-add-entry>

<p>Права на обновления доступны любому, кто хочет помогать в написании
руководств. Обычно мы просим, чтобы вы сначала прислали несколько полезных
обновлений.

<p>Чтобы получить права на обновление, отправьте запрос в список
рассылки <a href="mailto:debian-doc@lists.debian.org">Документация
Debian</a>. Объясните в запросе, зачем вам нужен доступ. Перед тем,
как вы получите доступ, ваш запрос должен одобрить Координатор
документирования либо другой ответственный член Команды
документирования. После того, как ваш запрос одобрен, попросите
того, кто его одобрил, отправить запрос (подписанный) в список <a
href="mailto:debian-admin@lists.debian.org">debian-admin</a>.

<p>Если вы являетесь разработчиком Debian, после одобрения запроса
вы будете добавлены в группу <tt>cvs_doc</tt> на сервере
<tt>cvs.debian.org</tt> и с этого момента сможете регистрировать
изменения в CVS.

<p>Если вы не разработчик, после одобрения вашего запроса вы
должны будете представить имя пользователя и пароль. Имя
пользователя не должно совпадать с названием какой-либо уже
существующей учётной записи Debian (проверьте это по базе <a
href="http://db.debian.org">db.debian.org</a>). Пароль
нельзя пересылать по почте не зашифрованым (хотя сама система
cvs не шифрует его при передаче по сети).

<p>Для шифрования пароля вы можете использовать программу
<tt>makepasswd</tt>. Для этого установить соответствующий пакет
и выполните команду:

<pre>
$ echo "SECRET" |makepasswd --clearfrom=- --crypt
</pre>

<P>Другой простой способ зашифровать пароль&nbsp;&mdash; использовать
Perl (если он установлен на вашей машине):

<pre>
$ perl -e "printf \"%s\n\", crypt ("SECRET", join ('', ('.', '/', 0..9, 'A'.. 'Z', 'a'..'z')[rand (64), rand (64)]))"
</pre>


<p>Пожалуйста, отправьте то, что получилось, вместе с выбранным именем
пользователя, <a href="mailto:joey@debian.org">Мартину Шульцу</a> (Martin
Schulze). Зашифруйте письмо целиком <a
href="http://db.debian.org/fetchkey.cgi?fingerprint=B53FE57BD0C1F689FCE25">его
ключом GnuPG</a>.

<p>Более подробную информацию см. на странице<a
href="http://people.debian.org/~joey/misc/webwml.html">информации</a>
по регламенту.

<hr>

<toc-add-entry name="organization">Организация файлов</toc-add-entry>

<p>Этот рисунок показывает структуру дерева каталогов CVS:

<p><img src="dirtree.jpg" align="middle" alt="Дерево каталогов CVS-репозитория DDP">

<p>Пожалуйста, обратите внимание, что web-сайт DDP размещен в модуле webwml
CVS-репозитория Debian, для интеграции с остальными web-страницами
Debian.

<hr>

<toc-add-entry name="updates">Механизм автоматического обновления</toc-add-entry>

<p>Web-страницы текстов руководств генерируются на www-master.debian.org
заданием cron каждый день после 15:39 по тихоокеанскому времени.

<p>Скрипт запускает <kbd>cvs update -d -P</kbd>, а затем
<kbd>make -C manuals.sgml clean publish</kbd>, оба в каталоге
<code>ddp</code>.

<p>Управляющий файл make настроен на пересборку каждого подкаталога (которые
содержат проектируемую документацию), и установку файлов из каждого подкаталога
в подкаталог <code>doc/manuals/</code> web-сайта. Файлы make в подкаталогах
взяты из <code>ddp/manuals.sgml/standard.makefile</code>.

<p>Файлы документации, созданные скриптом обновления, можно найти по
адресу <a href="manuals/">http://www.debian.org/doc/manuals/</a>.</p>

<p>Журналы сообщений скрипта обновления можно найти по адресу
<url "http://www-master.debian.org/build-logs/ddp/">

# <!-- Created: Mon Jul  6 19:58:09 BST 1998 -->
