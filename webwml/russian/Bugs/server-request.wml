#use wml::debian::template title="Debian BTS - сервер запросов" NOHEADER=yes NOCOPYRIGHT=true
#use wml::debian::translation-check translation="1.30" maintainer="Lev Lamberov"

<h1><a name="introduction">Введение в работу сервера запросов системы отслеживания ошибок</a></h1>

<p>Существует почтовый сервер, который может по запросу отправлять
вам сообщения об ошибках и указатели в виде простого текста.</p>

<p>Для его использования отправьте письмо по адресу
<a href="mailto:request@bugs.debian.org"><code>request@bugs.debian.org</code></a>.
Тема (<code>Subject</code>) этого письма игнорируется, за исключением того,
что она используется при создании темы ответного сообщения.</p>

<p>Тело письма должно содержать последовательность команд, по одной на
строке. Вы получите ответ, содержащий копии команд вашего письма и ответ
на каждую команду. В случае перечисленных ниже команд, никакие уведомления
никому не отправляются, и сообщения не сохраняются ни в каком общедоступном
журнале.</p>

<p>Любой текст в строке, начинающейся со знака диеза (<code>#</code>)
игнорируется. Обработку сообщения сервер прекращает при обнаружении
строки с <a href="#stopprocessing">ограничителя управления</a>
(например, <code>quit</code>, <code>thank you</code>, или два дефиса).
Он также прекращает работу при разборе слишком большого
количества не распознаваемых или плохо отформатированных команд.
Если разбор ни одной команды не завершился успешно, сервер отправляет
в ответ справку по его использованию.</p>

<h1>Доступные команды</h1>

<dl>
<dt><code>send</code> <var>номер_ошибки</var></dt>
<dt><code>send-detail</code> <var>номер_ошибки</var></dt>
<dd>
Запрашивает копию сообщения об ошибке. <code>send-detail</code> включает
также все <q>скучные</q> сообщения, такие как различные автоматические
подтверждения.
</dd>
<dt><code>index</code> [<code>full</code>]</dt>
<dt><code>index-summary by-package</code></dt>
<dt><code>index-summary by-number</code></dt>
<dd>
Запрашивает полный указатель (со всеми подробностями, включая
закрытые или перенаправленные сообщения) или краткий обзор,
отсортированный по названию пакета или номеру ошибки соответственно.
</dd>
<dt><code>index-maint</code></dt>
<dd>
Запрашивает указатель&nbsp;&mdash; список сопровождающих, пакеты которых
содержат ошибки (открытые или недавно закрытые), зарегистрированные в
системе отслеживания ошибок.
</dd>
<dt><code>index maint</code> <var>сопровождающий</var></dt>
<dd>
Запрашивает указатель ошибок, зарегистрированных в системе, в пакетах,
сопровождаемых <var>сопровождающим</var>. Требуется точное совпадение
информации о сопровождающем пакета со строкой поиска. Указатель
отправляется отдельным письмом.
</dd>
<dt><code>index-packages</code></dt>
<dd>
Запрашивает указатель&nbsp;&mdash; список пакетов, содержащих ошибки
(открытые или недавно закрытые), зарегистрированные в системе
отслеживания ошибок.
</dd>
<dt><code>index packages</code> <var>пакет</var></dt>
<dd>
Запрашивает указатель ошибок, зарегистрированных в системе, в пакете
<var>пакет</var>. Требуется точное совпадение названия пакета со строкой
поиска. Указатель отправляется отдельным письмом.
</dd>
<dt><code>send-unmatched</code> [<code>this</code>|<code>0</code>]</dt>
<dt><code>send-unmatched</code> <code>last</code>|<code>-1</code></dt>
<dt><code>send-unmatched</code> <code>old</code>|<code>-2</code></dt>
<dd>
Запрашивает журнал сообщений, не связанных с конкретным сообщением об
ошибке за эту, прошлую или позапрошлую неделю. Каждая неделя считается
заканчивающейся в среду.
<dt><code>getinfo</code> <var>имя_файла</var></dt>
<dd>
<p>
Запрашивает файл с информацией о пакете(ах) и/или сопровождающем(их).
Доступны файлы:
</p>
<dl>
<dt><code>maintainers</code></dt>
<dd>
Унифицированный список сопровождающих пакетов в виде, используемом системой
отслеживания ошибок. Он составляется из информации в файлах
<code>Packages</code>, файлах переопределений и файлах псевдо-пакетов.
</dd>
<dt><code>override.</code><var>дистрибутив</var></dt>
<dt><code>override.</code><var>дистрибутив</var><code>.non-free</code></dt>
<dt><code>override.</code><var>дистрибутив</var><code>.contrib</code></dt>
<dt><code>override.experimental</code></dt>
<dd>
Информация о приоритетах и разделах пакетов и переопределённой информации
о сопровождающих. Эта информация используется при создании файлов
<code>Packages</code> в ftp-архиве. Доступны информация по каждому из
основных деревьев дистрибутива.
</dd>
<dt><code>pseudo-packages.description</code></dt>
<dt><code>pseudo-packages.maintainers</code></dt>
<dd>
Список описаний и сопровождающих псевдо-пакетов.
</dd>
</dl>
</dd>

<dt><code>refcard</code></dt>
<dd>
Запрашивает краткое описание работы почтовых серверов в простом ASCII-тексте.
</dd>

<dt><a name="user"><code>user</code> <var>адрес</var></a></dt>
<dd>
Устанавливает <var>адрес</var> в качестве <q>пользователя</q> всех следующих за ней
команд <code>usertag</code>.
</dd>

<dt><a name="usertag"><code>usertag</code> <var>номер_ошибки</var>
    [ <code>+</code> | <code>-</code> | <code>=</code> ] <var>метка</var>
    [ <var>метка</var> ... ]</a></dt>
<dd>
Позволяет определить метки для каждого пользователя. Команда <code>usertag</code>
работает также как и обычная команда <code>tag</code> за исключением того, что
вы можете создавать любые метки. По-умолчанию, в качестве пользователя команды
<code>usertag</code> используется адрес
в заголовке <code>From:</code> или <code>Reply-To:</code> вашего сообщения.
</dd>

<dt><a name="usercategory"><code>usercategory</code>
     <var>имя-категории</var> [ <code>[hidden]</code> ]</a></dt>
<dd>
<p>
Добавляет, обновляет или удаляет <code>usercategory</code>. По умолчанию, пользовательская
категория видна; если указан добавочный аргумент <code>[hidden]</code>,
она не будет видна, но всё ещё будет доступна для
указания из других определений пользовательских категорий.
</p>

<p>
Эта команда в некотором смысле особа, поскольку при добавлении или обновлении 
пользовательской категории она требует, чтобы сразу за командой передавалось
тело команды. Если
тело пусто, пользовательская категория будет удалена. Тело составляется
из строк с любым количеством пробелов. Всякая категория
должна начинаться со строки с <code>*</code>, дополнительно за ней могут
следовать несколько строк выбора, начинающихся с <code>+</code>. Её полный
формат таков:
</p>
<div>
* <var>имя-категории-1</var><br />
* <var>Заголовок Категории 2</var>
  [ <code>[</code><var>префикс-выбора</var><code>]</code> ]<br />
&nbsp;+ <var>Заголовок Выбора 1</var> <code>[</code>
        [ <var>порядок</var><code>:</code> ]
        <var>выбор-1</var> <code>]</code><br />
&nbsp;+ <var>Заголовок Выбора 2</var> <code>[</code>
        [ <var>порядок</var><code>:</code> ]
        <var>выбор-2</var> <code>]</code><br />
&nbsp;+ <var>Заголовок Выбора По-умолчанию</var> <code>[</code>
        [ <var>порядок</var>: ] <code>]</code><br />
* <var>имя-категории-3</var><br />
</div>

<p>
<var>Имена-категорий</var>, встречающиеся в команде и в теле
используются для того, чтобы создавать между ними ссылки и избежать ненужного усложнения строк.
<var>Заголовки категорий</var> используются в резюме отчёта о пакете.
</p>

<p>
Дополнительный <var>префикс-выбора</var> предписывается каждому
<var>выбору</var> всякого элемента в разделе категории. Первый
<var>выбор</var>, который подходит, получает ошибку, показанную под ним.
Дополнительный параметр <var>порядок</var> определяет позицию при показе
выбранных элементов, это полезно, когда используется шаблон, который выбирает
надмножество предыдущих элементов, но который следует показать перед ними.
</p>
<p>
<var>Имя-категории</var> <code>normal</code> имеет специальное значение&nbsp;&mdash;
вид по умолчанию, поэтому, заменяя его отличной пользовательской категорией
для <var>имя-пакета</var>@packages.debian.org, пользователь может изменять
классификацию пакета по умолчанию.
</p>

<p>
Пример использования:
</p>

<pre>
    usercategory dpkg-program [hidden]
     * Program
       + dpkg-deb [tag=dpkg-deb]
       + dpkg-query [tag=dpkg-query]
       + dselect [package=dselect]

    usercategory new-status [hidden]
     * Status [pending=]
       + Outstanding with Patch Available [0:pending+tag=patch]
       + Outstanding and Confirmed [1:pending+tag=confirmed]
       + Outstanding and More Information Needed [pending+tag=moreinfo]
       + Outstanding and Forwarded [pending+tag=forwarded]
       + Outstanding but Will Not Fix [pending+tag=wontfix]
       + Outstanding and Unclassified [2:pending]
       + From other Branch [absent]
       + Pending Upload [pending-fixed]
       + Fixed in NMU [fixed]
       + Resolved [done]
       + Unknown Pending Status []

    \# Изменение вида по умолчанию
    usercategory normal
      * new-status
      * severity

    usercategory old-normal
      * status
      * severity
      * classification
</pre>
</dd>


<dt><code>help</code></dt>
<dd>
Запрашивает настоящую справку в простом ASCII-тексте.
</dd>
<dt><a name="stopprocessing"></a><code>quit</code></dt>
<dt><code>stop</code></dt>
<dt><code>thank</code></dt>
<dt><code>thanks</code></dt>
<dt><code>thankyou</code></dt>
<dt><code>thank you</code></dt>
<dt><code>--</code></dt>
<!-- #366093, I blame you! -->
<!-- <dt><code>kthxbye</code></dt> -->
<!-- See... I documented it! -->
<dd>
Останавливает обработку письма. После этого вы можете помещать любой
текст по своему усмотрению, он будет игнорироваться. Вы можете
использовать эту возможность для включения комментариев более длинных,
чем уместны в строках, начинающихся с <code>#</code>, например,
предназначенных для чтения человеком (читающим письмо в журналах
системы отслеживания ошибок или указанным в поле <code>CC</code> или
<code>BCC</code>).
</dd>
<dt><code>#</code>...</dt>
<dd>
Однострочный комментарий. Символ <code>#</code> должен быть в
начале строки.
</dd>
<dt><code>debug</code> <var>уровень</var></dt>
<dd>
Устанавливает уровень отладки в <var>уровень</var>. Он может принимать
неотрицательные целые значения. 0 означает отсутствие отладки, 1
обычно достаточно. Отладочный вывод также попадает в ответное сообщение.
Вероятно, эта возможность бесполезна для большинства пользователей
системы.
</dd>

</dl>

<p>Можно прочитать <a href="server-refcard">краткое описание</a> почтовых
серверов, доступное на www-сайте, в файле <code>bug-mailserver-refcard.txt</code>
или при отправке команды <code>refcard</code> (см. выше).</p>

<p>Если вы хотите управлять сообщениями об ошибках, вам следует
использовать адрес <code>control@bugs.debian.org</code>, понимающий
<a href="server-control">надмножество вышеперечисленных команд</a>.
Оно описано в другом документе, доступном на
<a href="server-control">www-сайте</a>, в файле
<code>bug-maint-mailcontrol.txt</code> или при отправке команды
<code>help</code> по адресу <code>control@bugs</code>.</p>

<p>На случай, если вы читаете этот документ в простом текстовом файле
или получили его по электронной почте: доступ к HTML-версии можно
получить с главной страницы системы отслеживания ошибок
<code>https://www.debian.org/Bugs/</code>.</p>

<hr />

#use "otherpages.inc"

#use "$(ENGLISHDIR)/Bugs/footer.inc"
