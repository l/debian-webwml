#use wml::debian::cdimage title="Загрузка образов дисков Debian с помощью jigdo" BARETITLE=true
#use wml::debian::toc
#use wml::debian::installer
#use wml::debian::translation-check translation="1.64"
#include "$(ENGLISHDIR)/releases/info"

<p>Jigsaw Download, или <a href="http://atterer.net/jigdo/">jigdo</a>,
в будущем предназначен стать основным способом распространения образов
дисков Debian. В настоящее время он работает, но пока не очень удобен в
использовании, так как не закончена программа менеджера загрузки.</p>

<toc-display/>

<hr>

<toc-add-entry name="why">Почему jigdo лучше чем прямая загрузка</toc-add-entry>

<p>Потому что она быстрее! В связи с различными причинами, серверов с образами
дисков намного меньше, чем с "нормальными" архивами Debian. Следовательно, если
вы загружаете с зеркала образов дисков, это зеркало не только может оказаться
дальше от вас, но и быть перегруженным, особенно сразу после нового выпуска.</p>

<p>К тому же некоторые типы образов вообще не доступны к загрузке как полные
образы <tt>.iso</tt>, потому что на наших серверах недостаточно места для
выкладывания их.</p>

<p>Конечно "нормальное" зеркало Debian не содержит ни одного образа диска,
так как же тогда jigdo загружает их? Jigdo создаёт их загружая по одному
все файлы, которые должны быть на диске. Далее все эти файлы собираются в один
большой файл, который и является точной копией образа диска. Однако всё это
происходит закулисно - всё что <em>вам</em> нужно сделать для начала загрузки,
так это сказать утилите загрузки местонахождение файла "<tt>.jigdo</tt>".</p>

<p>Более подробную информацию можно найти на
<a href="http://atterer.net/jigdo/">домашней странице jigdo</a>. 
Добровольцам, желающим помочь с разработкой jigdo, всегда рады!</p>

<toc-add-entry name="how">Как загрузить образ с помощью jigdo</toc-add-entry>

<ul>

  <li>Загрузите пакет, содержащий <tt>jigdo-lite</tt>, который доступен
  для GNU/Linux, Windows и Solaris на
  <a href="http://atterer.net/jigdo/">домашней странице jigdo</a>. Для FreeBSD,
  установите из /usr/ports/ftp/jigdo или достаньте пакет с помощью <tt>pkg_add
  -r jigdo</tt>.
  </li>

  <li>Запустите скрипт <tt>jigdo-lite</tt>. Он запросит URL
  файла "<tt>.jigdo</tt>". (Если хотите, можете ввести этот URL в командной
  строке.)</li>

  <li>Выберете из одного из нижеприведённых <a href="#which">ниже</a> мест
  файл "<tt>.jigdo</tt>", который вы хотите загрузить, и введите его URL
  на запрос скрипта <tt>jigdo-lite</tt>. Каждый  файл "<tt>.jigdo</tt>"
  соответствует одному "<tt>.iso</tt>" образа CD/DVD диска.</li>

  <li>Если вы используете jigdo в первый раз, нажмите Ввод на запрос
  "Files to scan".</li>

  <li>На запрос "Debian mirror", введите
  <kbd>http://ftp.<strong><var>XY</var></strong>.debian.org/debian/</kbd>, где
  <strong><var>XY</var></strong> - двухбуквенный код для вашей страны
  (например, <tt>us</tt>, <tt>de</tt>, <tt>uk</tt>, <tt>ru</tt>. Смотрите
  текущий список <a href="$(HOME)/mirror/list">доступных серверов
  ftp.<var>XY</var>.debian.org</a>.)

<if-stable-release release="woody">
  <li>На запрос "Debian non-US mirror" (если он вообще появится), введите
  <kbd>http://ftp.<strong><var>XX</var></strong>.debian.org/debian-non-US/</kbd>,
  снова подставив правильный код для <strong><var>XX</var></strong>.
</if-stable-release>

  <li>Следуйте инструкциям скрипта на экране. Если всё будет идти хорошо,
  скрипт закончит работу подсчётом контрольной суммы сгенерированного образа,
  и затем скажет, вам что подсчитанная сумма совпадает с суммой оригинального
  образа.</li>

</ul>

<p>Для подробного пошагового описания этого процесса, прочтите
<a href="http://www.tldp.org/HOWTO/Debian-Jigdo/">Debian jigdo
mini-HOWTO</a>. HOWTO также раскрывает дополнительные возможности jigdo,
такие как обновление старой версии образа диска до текущей версии
(загрузкой только того, что было изменено, а не всего образа).</p>

<p>Сразу как вы загрузите образ и запишете его на диск, прочтите <a
href="$(HOME)/releases/stable/installmanual">подробную информацию о процессе
установки</a>.</p>

<toc-add-entry name="which">Официальные образы</toc-add-entry>

<ul>

  <li>Официальные файлы jigdo для стабильного выпуска на CD:<br>
  <images-list url="http://cdimage.debian.org/debian-cd/current/@ARCH@/jigdo-cd/" />
  </li>

  <li>Официальные файлы jigdo для стабильного выпуска на DVD:<br>
  <images-list url="http://cdimage.debian.org/debian-cd/current/@ARCH@/jigdo-dvd/" />
  </li>  

</ul>

<ul>
  <li>Файлы Jigdo для неофициального <a href="$(HOME)/ports/amd64/">AMD64</a>
  стабильного релиза:
  [<a href="http://cdimage.debian.org/cdimage/unofficial/sarge-amd64/jigdo-cd/">CD</a>]
  [<a href="http://cdimage.debian.org/cdimage/unofficial/sarge-amd64/jigdo-dvd/">DVD</a>]
  </li>
</ul>

<ul>
  <li>Официальные файлы jigdo для
  <a href="http://cdimage.debian.org/cdimage/weekly-builds/">тестового
    дистрибутива</a> на CD и DVD
  (<em>все архитектуры, обновляются еженедельно</em>)
  </li>
</ul>

<toc-add-entry name="unofficial">Неофициальные образы</toc-add-entry>

<p>Эти образы собираются и предоставляются не Debian, а <a
href="http://www.fsn.hu/">fsn://HU</a>:</p>

<ul>

  <li>fsn://HU файлы jigdo для <a
  href="ftp://ftp.fsn.hu/pub/CDROM-Images/debian-unofficial/etch/jigdo/">\
  тестового дистрибутива</a> на CD (<em>amd64 и i386, обновляются
  еженедельно</em>), <a
  href="ftp://ftp.fsn.hu/pub/CDROM-Images/debian-unofficial/MIRRORS">\
  зеркала</a></li>

  <li>fsn://HU файлы jigdo для <a
  href="ftp://ftp.fsn.hu/pub/CDROM-Images/debian-unofficial/etch-dvd/jigdo/">\
  тестового дистрибутива</a> на DVD (<em>amd64 и i386, обновляются
  еженедельно</em>), <a
  href="ftp://ftp.fsn.hu/pub/CDROM-Images/debian-unofficial/MIRRORS">\
  зеркала</a></li>

  <li>fsn://HU файлы jigdo для <a
  href="ftp://ftp.fsn.hu/pub/CDROM-Images/debian-unofficial/sid/jigdo/">\
  нестабильного дистрибутива</a> на CD (<em>amd64 и i386, обновляется
  еженедельно</em>), <a
  href="ftp://ftp.fsn.hu/pub/CDROM-Images/debian-unofficial/MIRRORS">\
  зеркала</a></li>

  <li>fsn://HU файлы jigdo для <a
  href="ftp://ftp.fsn.hu/pub/CDROM-Images/debian-unofficial/sid-dvd/jigdo/">\
  нестабильного дистрибутива</a> на DVD (<em>amd64 и i386, обновляется
  еженедельно</em>), <a
  href="ftp://ftp.fsn.hu/pub/CDROM-Images/debian-unofficial/MIRRORS">\
  зеркала</a></li>

</ul>

<hr />

<toc-add-entry name="search">Поиск в содержимом файлов <tt>.jigdo</tt>
</toc-add-entry>

<p><strong>Какой из образов CD/DVD содержит определённый файл?</strong> Ниже
вы можете искать в списке файлов, который содержится в файле <tt>.jigdo</tt>.
Вы можете ввести несколько слов, которые должны содержаться в имени файла.
Добавьте, например, "_i386" для вывода результатов только по определённой
архитектуре. Добавьте "_all" чтобы увидеть пакеты, одинаковые для всех
архитектур.</p>

<form method="get" action="http://atterer.net/jigdo/jigdo-search.php"><p>
<input type="text" name="q" size="20" value="">
# Translators: "Search" is translatable
<input type="submit" value="Найти"></p></form>

<p><strong>Какие файлы содержаться в определённом образе?</strong> Если
вам нужно список <em>всех</em> файлов, которые содержаться на диске Debian,
всего лишь найдите файл <tt>.jigdo</tt> для этого образа в этом списке,
и выберите "list contents" напротив соответствующего URL: <a
href="http://atterer.net/jigdo/jigdo-search.php?list">Список Debian файлов
<tt>.jigdo</tt></a></p>

<hr>

<toc-add-entry name="faq">Часто Задаваемые Вопросы</toc-add-entry>

<p><strong>Как заставить jigdo использовать мой прокси?</strong></p>

<p>Откройте файл <tt>~/.jigdo-lite</tt> (или
<tt>jigdo-lite-settings.txt</tt> в версии для Windows) в текстовом редакторе
и найдите строку, начинающуюся с "wgetOpts". Следующие ключи могут быть добавлены
в строку:</p>

<p><tt>-e ftp_proxy=http://<i>LOCAL-PROXY</i>:<i>PORT</i>/</tt>
<br><tt>-e http_proxy=http://<i>LOCAL-PROXY</i>:<i>PORT</i>/</tt>
<br><tt>--proxy-user=<i>USER</i></tt>
<br><tt>--proxy-passwd=<i>PASSWORD</i></tt></p>

<p>Конечно же, введите правильные значения для вашего прокси-сервера.
Последние две опции необходимы, только если ваш прокси использует авторизацию
по паролю. Ключи необходимо добавлять в конец строки с wgetOpts, но <em>до</em>
последнего символа <tt>'</tt>. Все опции должны быть в одной строке.</p>

<p>В место этого в Linux вы можете установить переменные среды
<tt>ftp_proxy</tt> и <tt>http_proxy</tt>, например в файле
<tt>/etc/environment</tt> или <tt>~/.bashrc</tt>.</p>

<p><strong>Аааааа! Скрипт завершился с ошибкой - теперь я снова должен
загрузить все эти МБ?!</strong></p>

<p>Этого Не Должно Было Случиться(tm), но по некоторым причинам вы
можете попасть в ситуацию, когда большой "<tt>.iso.tmp</tt>" файл был
уже создан, но <tt>jigdo-lite</tt> сталкивается с проблемами, и повторяет
что вы должны попробовать возобновить загрузку. В таком случае можно
попробовать несколько попыток исправить ситуацию:</p>

<ul>

  <li>Просто перезапустить загрузку, нажав Ввод. Возможно некоторые
  файлы не могут быть загружены по причине задержек или других ошибок
  в передаче - другая попытка будет сделана, чтобы загрузить отсутствующие
  файлы.</li>

  <li>Попробовать другое зеркало. Некоторые зеркала Debian могут быть слегка
  не синхронизированы - может быть другое зеркало еще содержит файлы, которые
  были удалены с указанного вами, или они были уже обновлены файлами, которх
  пока нет на вашем зеркале.</li>

  <li>Запросить отсутствующие части образа используя <tt><a
  href="http://rsync.samba.org/">rsync</a></tt>. Сначала вам необходимо
  найти правильный rsync URL образа, который вы загружаете:
  Выберите сервер, предоставляющий доступ rsync к <a
  href="../mirroring/rsync-mirrors">стабильным</a> или <a
  href="../http-ftp/#testing">тестируемым</a> образам, затем определите
  правильный путь и имя файла. Список директорий можно получить с помощью
  команды <tt>rsync&nbsp;rsync://cdimage.debian.org/debian-cd/</tt>

  <br>Далее, удалите расширение "<tt>.tmp</tt>" у временного файла
  <tt>jigdo-lite</tt>, переименовав его, и передайте rsync удалённый URL и имя
  локального файла:
  <tt>rsync&nbsp;rsync://server.org/path/binary-i386-1.iso
  binary-i386-1.iso</tt>

  <br>Возможно вы захотите использовать опции rsync <tt>--verbose</tt> и
  <tt>--progress</tt> чтобы получать сообщения о статусе, и
  <tt>--block-size=8192</tt> для увеличения его скорости.</li>

  <li>Если всё это проваливается, ваши загруженные данные не потеряны: В
  Linux вы можете смонтировать <tt>.tmp</tt> файл в устройство-петлю loop
  для доступа к пакетам, которые уже были загружены, и использовать их для
  создания образа из нового файла jigdo (такого как последний еженедельный
  срез тестируемого дистрибутива, если ошибка произошла также при загрузке
  среза тестируемого дистрибутива). Для этого сначала выполните следующие
  команды как root в директории с нарушенным образом: <br><tt>mkdir&nbsp;mnt;
  mount&nbsp;-t&nbsp;iso9660&nbsp;-o&nbsp;loop&nbsp;*.tmp&nbsp;mnt</tt>. 
  Затем запустите новую загрузку в другой директории, и введите путь
  директории <tt>mnt</tt> на запрос "Files to scan".</li>

</ul>
