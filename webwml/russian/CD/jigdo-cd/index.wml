#use wml::debian::cdimage title="Загрузка образов компакт-дисков Debian с помощью jigdo" BARETITLE=true
#use wml::debian::toc
#use wml::debian::installer
#use wml::debian::translation-check translation="1.55"
#include "$(ENGLISHDIR)/releases/info"

<p>Jigsaw Download или, коротко, <a href="http://atterer.net/jigdo/">jigdo</a>,
в будущем планируется сделать основным способом распространения образов
CD Debian. На данный момент система уже работает, но она ещё не очень
удобна для пользователя, поскольку разработка менеджера загрузки ещё
не завершена.</p>

<toc-display/>

<hr>

<toc-add-entry name="why">Почему jigdo лучше простой загрузки</toc-add-entry>

<p>Потому что это быстрее! По различным причинам зеркал, на которых лежат
образы компакт-дисков, намного меньше, чем зеркал "нормального" архива
Debian. Соответственно, если вы загружаете образы дисков целиком, зеркало
не только может находиться дальше от вас, но, кроме того, будет сильно
загружено, особенно вскоре после после появления нового выпуска.</p>

<p>Кроме того, некоторые типы образов вообще не доступны в виде полных
файлов <tt>.iso</tt>, поскольку на наших серверах недостаточно места,
чтобы разместить их.</p>

<p>Разумеется, "нормальное" зеркало Debian не хранит никаких образов CD.
Как в таком случае jigdo загружает с него образы? jigdo получает их,
загружая по отдельности все файлы, находящиеся на диске. На следующем
шаге все эти файлы собираются в один большой файл, являющийся точной
копией образа CD. Тем не менее, всё это происходит за кулисами&nbsp;&mdash;
всё, что нужно сделать <em>вам</em>, это указать инструменту загрузки
расположение файла "<tt>.jigdo</tt>".</p>

<p>Более подробная информация доступна на
<a href="http://atterer.net/jigdo/">домашней странице jigdo</a>. 
Желающие помочь в разработке jigdo приветствуются!</p>

<toc-add-entry name="how">Как загрузить образ с помощью jigdo</toc-add-entry>

<ul>

  <li>Загрузите пакет, содержащий <tt>jigdo-lite</tt>, доступный
  для GNU/Linux, Windows и Solaris, с
  <a href="http://atterer.net/jigdo/#download">домашней страницы
  jigdo</a>.
  </li>

  <li>Запустите скрипт <tt>jigdo-lite</tt>. Он попросит указать
  URL обрабатываемого файла "<tt>.jigdo</tt>" (если хотите, вы
  можете указать этот URL в командной строке).</li>

  <li>Выберите файлы "<tt>.jigdo</tt>", которые вам нужны, с одного
  из <a href="#which">перечисленных ниже</a> расположений, и введите
  их URL в приглашении <tt>jigdo-lite</tt>. Каждый файл "<tt>.jigdo</tt>"
  соответствует одному образу "<tt>.iso</tt>" CD/DVD.</li>

  <li>Если вы используете jigdo впервые, при появлении приглашения
  "Files to scan" (проверяемые файлы) просто нажмите клавишу "ввод".</li>

  <li>В приглашении "Debian mirror" (зеркало Debian), введите
  <kbd>http://ftp.<strong><var>XY</var></strong>.debian.org/debian/</kbd>, где
  <strong><var>XY</var></strong>&nbsp;&mdash; двухбуквенный код вашей страны
  (например, <tt>ru</tt>, <tt>de</tt>, <tt>us</tt>. См. текущий список
  <a href="$(HOME)/mirror/list">доступных зеркал
  ftp.<var>XY</var>.debian.org</a>.)

<if-stable-release release="woody">
  li>В приглашении "Debian non-US mirror" (зеркало Debian non-US), если
  оно вообще видно, введите
  <kbd>http://ftp.<strong><var>XX</var></strong>.debian.org/debian-non-US/</kbd>,
  опять же, подставив правильный код вместо <strong><var>XX</var></strong>.
</if-stable-release>

  <li>Следуйте инструкциям, выводимым скриптом. Если всё идёт хорошо,
  скрипт завершит работу, рассчитав контрольную сумму созданного образа
  и сообщив, что контрольная сумма соответствует первоначальному образу.</li>

</ul>

<p>Подробное пошаговое описание процесса можно найти в <a
href="http://www.tldp.org/HOWTO/mini/Debian-Jigdo/">mini-HOWTO: Debian
jigdo</a>. Этот документ также описывает продвинутые функции jigdo,
такие как обновление со старой версии образа CD до текущей (загружая
только то, что изменилось, а не весь образ).</p>

<p>После того, как вы загрузили образы и записали их на диски,
обязательно ознакомьтесь с
<a href="$(HOME)/releases/stable/installmanual">подробной
информацией о процессе установки</a>.</p>

<toc-add-entry name="which">Официальные образы</toc-add-entry>

<if-stable-release release="sarge">

<ul>

  <li>Официальные файлы jigdo для стабильного выпуска на CD:<br>
  <images-list url="http://cdimage.debian.org/debian-cd/current/@ARCH@/jigdo-cd/" />
  </li>

  <li>Официальные файлы jigdo для стабильного выпуска на DVD:<br>
  <images-list url="http://cdimage.debian.org/debian-cd/current/@ARCH@/jigdo-dvd/" />
  </li>  

</ul>

</if-stable-release>

<if-stable-release release="woody">

<ul>

  <li>Официальные файлы jigdo для стабильного выпуска на CD:
  <a href="http://us.cdimage.debian.org/jigdo-area/current-cd/jigdo/">\
  американское зеркало</a>,
  <a href="http://non-us.cdimage.debian.org/jigdo-area/current-cd/jigdo/">\
  европейское зеркало</a><br>
  Они содержат образы обычных установочных CD и образы CD для обновления
  с rev0 до rev4.
  </li>

  <li>Официальные файлы jigdo для стабильного выпуска на DVD:
  <a href="http://us.cdimage.debian.org/jigdo-area/current-dvd/jigdo/">\
  американское зеркало</a>,
  <a href="http://non-us.cdimage.debian.org/jigdo-area/current-dvd/jigdo/">\
  европейское зеркало</a>
  </li>  

</ul>

</if-stable-release>

<ul>
  <li>Официальные файлы jigdo для
  <a href="http://cdimage.debian.org/pub/cdimage-testing/cd/jigdo-area/">тестируемого
  дистрибутива</a> на CD (<em>все архитектуры, генерируются еженедельно</em>)
  </li>
   
  <li>Официальные файлы jigdo для
  <a href="http://cdimage.debian.org/pub/cdimage-testing/dvd/jigdo-area/">тестируемого
  дистрибутива</a> на DVD (<em>все архитектуры, генерируются еженедельно</em>)
  </li>
</ul>

<hr>

<toc-add-entry name="faq">Часто задаваемые вопросы и ответы</toc-add-entry>

<p><strong>Как я могу заставить jigdo использовать прокси-сервер?</strong></p>

<p>Откройте файл <tt>~/.jigdo-lite</tt> (или
<tt>jigdo-lite-settings.txt</tt> в версии для Windows) в текстовом
редакторе и найдите строку, начинающуюся с "wgetOpts". К ней можно
добавить следующие ключи:</p>

<p><tt>-e ftp_proxy=http://<i>LOCAL-PROXY</i>:<i>PORT</i>/</tt>
<br><tt>-e http_proxy=http://<i>LOCAL-PROXY</i>:<i>PORT</i>/</tt>
<br><tt>--proxy-user=<i>USER</i></tt>
<br><tt>--proxy-passwd=<i>PASSWORD</i></tt></p>

<p>Разумеется, нужно подставить правильные значения для вашего
прокси-сервера. Последние два параметра необходимы только если ваш
прокси использует парольную аутентификацию. Ключи нужно добавить
в конец строки wgetOpts <em>перед</em> завершающим символом
<tt>'</tt>. Все параметры должны быть на одной строке.</p>

<p>Вместо этого, под Linux вы можете также установить переменные среды
<tt>ftp_proxy</tt> и <tt>http_proxy</tt>, например, в файле
<tt>/etc/environment</tt> или <tt>~/.bashrc</tt>.</p>

<p><strong>А-а-а! Работа скрипта завершается ошибкой. Я что, зря загружал
все эти мегабайты?!</strong></p>

<p>Конечно, такого Не Должно Быть (Should Not Happen (tm)), но по
различным причинам работа может завершиться в состоянии, когда большой
файл "<tt>.iso.tmp</tt>" уже сгенерирован, а <tt>jigdo-lite</tt>
испытывает проблемы, постоянно требуя от вас перезапустить загрузку.
В этом случае есть несколько вариантов:</p>

<ul>

  <li>Просто перезапустить загрузку, нажав клавишу "ввод". Может
  быть, некоторые файлы не могут быть загружены из-за задержек
  или других временных ошибок. Со следующей попытки все пропущенные
  файлы загрузятся.</li>

  <li>Используйте другое зеркало. Некоторые зеркала Debian слегка
  не синхронизированы. Может быть, другое зеркало всё ещё сохраняет
  файлы, удалённые с того, которое вы указали, или уже получило
  файлы, ещё отсутствующие на вашем зеркале.</li>

  <li>Загрузите недостающие части образов с помощью <tt><a
  href="http://rsync.samba.org/">rsync</a></tt>. Для начала вам нужно
  найти правильный URL rsync загружаемого образа. Выберите сервер,
  предоставляющий доступ по rsync к образам<a
  href="../mirroring/rsync-mirrors">стабильного</a> или <a
  href="../http-ftp/#testing">тестируемого</a> дистрибутива и
  определите правильный путь и имя файла. Списки содержимого каталогов
  могут быть получены командой вроде
  <tt>rsync&nbsp;rsync://cdimage.debian.org/debian-cd/</tt>

  <br>Затем переименуйте временный файл <tt>jigdo-lite</tt>, удалив
  расширение "<tt>.tmp</tt>", и передайте удалённый URL и имя локального
  файла rsync:
  <tt>rsync&nbsp;rsync://server.org/path/binary-i386-1.iso
  binary-i386-1.iso</tt>

  <br>Вы можете использовать ключи <tt>--verbose</tt> и
  <tt>--progress</tt> rsync, чтобы получать сообщения о состоянии,
  и <tt>--block-size=8192</tt> для ускорения.</li>

  <li>Если даже всё это не удалось, загруженные вами данные не потеряны.
  Под Linux вы можете смонтировать файл <tt>.tmp</tt> для доступа к
  пакетам, которые уже загружены, и использовать их для создания
  образа из более нового файла jigdo (такого, как последний еженедельный
  "снимок" тестируемого дистрибутива, если при неудачной загрузке вы
  пытались получить другой такой "снимок"). Для этого выполните от имени
  пользователя root в каталоге с неудавшейся загрузкой: <tt>mkdir&nbsp;mnt;
  mount&nbsp;-t&nbsp;iso9660&nbsp;-o&nbsp;loop&nbsp;*.tmp&nbsp;mnt</tt>.
  Затем запустите загрузку из другого каталога и введите путь
  к каталогу <tt>mnt</tt> в приглашении "Files to scan" (проверяемые
  файлы).</li>

</ul>
