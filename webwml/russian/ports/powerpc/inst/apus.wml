#use wml::debian::template title="Перенос на PowerPC (APUS)" NOHEADER="yes"
#include "$(ENGLISHDIR)/ports/powerpc/inst/menu.inc"
#use wml::debian::translation-check translation="1.12" maintainer="Lev Lamberov"

<h1>Установка Debian GNU/Linux на машину PowerPC APUS</h1>

<p>

К Apus (Amiga PowerUp System) относятся: компьютер Amiga,
A1200, A3000 или A4000, с одной из плат ускорения PowerPC/m68k
от закрывшейся ныне компании Phase5, либо платой BlizzardPPC
или CyberStormPPC.

<h2>Известные проблемы</h2>
<p>

При разворачивании системы на машинах, которые используют некий гибрид PowerUp и WarpUp,
а не что-то одно, имеются некоторые 
проблемы. Я не очень знаком с этим, поскольку я использую чистую платформу powerup,
поэтому я надеюсь, что кто-то добавит более подробное описание
этого.
<p>

Кроме того, контроллер SCSI производства CyberStormPPC пока не поддерживается в
Linux, поэтому вы не сможете использовать диски, подключённые к нему.

<h2>Разметка разделов из AmigaOS</h2>
<p>

<code>amiga-fdisk</code> является вариантом fdisk для таблиц разделов RDB,
используемых на оборудовании Amiga. Эта утилита работает, но я рекомендую вам использовать
инструменты Amiga для разметки диска из AmigaOS.
<p>

HDToolbox, будучи официальным инструментом Commodore для разметки диска, можно
найти в любой системе AmigaOS. Простой запуск HDToolbox
позволяет разметить диск IDE, подключённый к интерфейсу IDE на плате. Если вы хотите
получить доступ к диску SCSI, подключённому к вашему SCSI контроллеру на плате BlizzardPPC, вам
следует использовать команду «hdtoolbox blizzppcscsi.device».
<p>

Другим вариантом является использование SCSIConfig, утилиты для разметки диска от Phase5,
которая находится на дискетах, идущих в комплекте с вашей платой ускорения.
<p>

Вам следует установить тип раздела в custom и задать
следующие идентификаторы типа разделов:
<pre>
  * Раздел Linux: 0x4c4e5800
  * Раздел подкачки Linux: 0x53575000
</pre>

<h2>Разворачивание системы</h2>
<p>

Программу <code>bootstrap</code> можно найти
в каталоге <code>apus/bootstrap</code> на загрузочных дискетах дистрибутива
powerpc (находятся в /debian/dists/woody/main/disks-powerpc/current).
<p>

Программа <code>bootstrap</code> состоит из трёх программ. Все
три должны быть исполняемыми и должны находится в пути доступа AmigaOS. Это
исполняемый файл <code>bootstrap</code> и часть ppcboot_wup или ppcboot_pup,
которая является действительным загрузчиком (ppcboot_pup для систем powerup,
а ppcboot_wup для систем warpup).
<p>

Вам следует запустить <code>bootstrap</code> так:
<pre>
\# bootstrap --apus "параметры ядра"
</pre>
где «параметры ядра» описаны в разделах далее.
<p>

<code>bootstrap</code> выведет некоторую информацию, затем экран будет
пуст от 10 до 30 секунд, а затем вы окажитесь в консоли Linux.

<h3>Команда Debian <code>bootstrap</code></h3>
<p>

Действительной командной <code>bootstrap</code> для запуска установщика Debian
была бы следующая строка:
<pre>
\# bootstrap --apus -k apus/linux -r apus/images-1.44/root.bin root=/dev/ram
</pre>
После установки, для запуска Debian, используйте следующую команду:
<pre>
\# bootstrap --apus -k apus/linux root=/dev/sda3
</pre>
где sda3 &mdash; корневой раздел Debian, измените его на раздел,
на котором находится ваш корневой раздел.


<h2>Параметры ядра</h2>
<p>
Вам следует добавить некоторые параметры ядра в зависимости от вашей фактической
конфигурации оборудования; эти параметры описаны далее.

<h3>Параметры графической карты</h3>
<p>

Используемое графическое устройство указывается в параметре video=. Ниже приведены некоторые
примеры. Для включения родной графики в режиме vga
(640x480):
<pre>
  video=amifb:vga
</pre>
Для включения графической карты Bvision/CyberVision в режиме 1152x864 при 60Hz
и с шрифтами SUN12x22:
<pre>
  video=pm2fb:mode:1152x864-60,font:SUN12x22
</pre>

Для отключения одного из графических устройств:
<pre>
  video=amifb:disable
</pre>
Вы можете отображать виртуальные консоли на различные используемые устройства. Используйте
<tt>
  video=map:01
</tt>
для отображения виртуальной консоли (vc) 1 на устройство 0, vc 2 на устройство 1, после
этого повторите тот же шаблон (vc3 на устройство 0, vc4 на устройство 1 и т.д.).
Для отображения vc 1,2,3,5,6,7 на устройство 0, а vc 4,8 на устройство 1 вам следует использовать
<pre>
  video=map:0001
</pre>


<h3>Параметр nobats</h3>
<p>

Пользователям Blizzard с дисками scsi нужно использовать параметр «nobats».
<pre>
\# bootstrap --apus -k apus/linux root=/dev/sda3 nobats
</pre>

<h3>Параметр 60nsram</h3>
<p>
Пользователи, имеющие оперативную память со времени доступа 60нс, могут использовать параметр 60nsram.
<pre>
\# bootstrap --apus -k apus/linux root=/dev/sda3 60nsram
</pre>

<h3>Параметры отладки</h3>
<p>
Если у вас возникли проблемы, то вы можете использовать параметры отладки для
выбора того, куда будет отправлено сообщение вывода консоли &mdash; на последовательную консоль или в память
вместо обычной консоли. Это полезно для отладки, когда
вывод ядра не приходит на вывод консоли.
<pre>
\# bootstrap --apus -k apus/linux root=/dev/sda3 60nsram debug=mem
</pre>
Затем вы можете прочитать результат с помощью утилиты bootmesg из каталога
apus/bootstrap.
<p>

Другим полезным инструментом является утилита dmesg, которая выдаст вам отладочную информацию
о процессе разворачивания системы.

<h2>Особенности apus в <code>dbootstrap</code></h2>
<p>

Имеется несколько специфических отличий apus при использовании
<code>dbootstrap</code>.

<h3>Создание разделов на жёстком диске - <code>amiga-fdisk</code></h3>
<p>

Архитектура apus использует <code>amiga-fdisk</code> в качестве инструмента разметки диска. Как было
отмечено выше, вы также можете использовать инструменты разметки диска из AmigaOS.

<h3>Установка ядра операционной системы и модулей</h3>
<p>

Этот параметр в действительности не работает. Я собираюсь предложить
параметр «Установить модули операционной системы» («Install the OS Modules») для его замены, но пока
вы можете просто пропустить этот шаг. Ядро больше не нужно, поскольку оно
находится на
# <!-- FIXME Sven?? server? network? -->

<h3>Параметры, неприменимые для apus</h3>
<p>

Некоторые параметры просто не имеют смысла на apus, поэтому пока я не уберу их
из меню, просто игнорируйте их. Они всё равно не будут работать.

<p>
Это следующие параметры:
<pre>
* Make System Bootable directly from the Hard Disk. (Сделать, чтобы система загружалась напрямую с жёсткого диска.)

* Make a Boot Floppy. (Создать загрузочную дискету.)

* Eject the Floppy. (Вынуть дискету.)
</pre>

<h2>Ссылки на дополнительную информацию</h2>
<p>

Официальная документация и ЧаВО по Linux-apus doc:
<p>
<a href="http://sourceforge.net/projects/linux-apus/">
http://sourceforge.net/projects/linux-apus/</a>
<p>

Другим источником ценной информации является веб-сайт Linux-m68k и ЧаВО
по следующему адресу:

<p>
<a href="http://sourceforge.net/projects/linux-m68k/">
http://sourceforge.net/projects/linux-m68k/</a>
<p>

Здесь вы найдёте большое количество информации касательно Linux на платформе amiga,
она подходит и для Linux-m68k, и для Linux-apus.

<h2>Заключение</h2>
<p>

Ну, это небольшое руководство представляет собой попытку объяснить все особенности
установки Linux-apus Debian. Остальные части установки схожи с любой другой
установкой Debian/powerpc, а также с общим порядком установки Debian.
Поэтому дальнейшую информацию вы найдёте в <a href="$(DOC)/">каталоге документации
Debian</a>, а также на других общих информационных сайтах о Linux и
документации.
