#use wml::debian::template title="Как работать над страницами веб-сайта Debian" BARETITLE=true
#use wml::debian::toc
#use wml::debian::translation-check translation="1.40" maintainer="Lev Lamberov"

<toc-display/>



<toc-add-entry name="general">Общая информация</toc-add-entry>

<h3>Требования к ресурсам</h3>

<p>Если вы хотите работать над нашим веб-сайтом, будьте готовы сохранить по меньшей мере
250 МБ данных на диск. Это число отражает текущий размер архива
исходного кода. Если вы (случайно) запустите пересборку всех страниц, то вам потребуется
как минимум вдвое больше свободного места на диске. Если вы выполните частичное извлечение, вам потребуется намного
меньше места, например для каталога english/ требуется примерно 50 МБ.</p>

<h3>Частичное извлечение</h3>

<p>Многие не хотят иметь всё CVS дерево <code>webwml</code> целиком на своей
машине, что иногда приводит к сломанным сборкам и потере файлов, например в случае когда
добавляется какой-то критичный файл, но полное обновление (<kbd>cvs update</kbd>) в
этого каталога не производится. Проверяйте наличие всех требуемых файлов (таких как
.wmlrc) до того, как пожаловаться нам на проблемы.</p>

<h3><q>Что это за строчки, начинающиеся с `#'?</q></h3>

<p>В WML строка, начинающаяся с `#' является комментарием. Такие комментарии предпочтительны перед
обычными комментариями HTML, поскольку они не добавляются в сгенерированную страницу.</p>

<p>Пожалуйста, для получения дополнительной информации по использованию WML прочтите
страницу <a href="using_wml">использование WML</a>.</p>

<toc-add-entry name="etiquette">Этикет редакторов</toc-add-entry>

<h3><q>Могу ли я изменить эту страницу?</q></h3>

<p>И да, и нет. Если вы нашли маленькую ошибку (например, опечатку), просто исправьте её.</p>

<p>Если вы считаете, что отсутствуют какие-то небольшие подробности, опять же можете исправить
это.</p>

<p>Если вы находите что-то ужасным и требующим переделки, сообщите об этом
в рассылку debian-www, чтобы мы могли это обсудить. Скорее всего мы с вами согласимся.</p>

<p>Если вы обнаружили проблему в шаблоне (т.е., в файле из каталога
webwml/english/template/debian), пожалуйста, сначала внимательно оцените изменение,
а уже потом вносите его, поскольку изменения шаблонов часто вызывает пересборку
большой части сайта.</p>

<h3>Добавляя новый каталог, добавляйте также Makefile!</h3>

<p>При добавлении новых каталогов в CVS, следует быть внимательным. Если
текущий каталог включён в список в файле ../Makefile, то вы <b>должны</b> создать
Makefile в нём &mdash; в противном случае <tt>make</tt> выдаст сообщение об ошибке.</p>

<h3>Используйте ясный и простой английский</h3>

<p>Поскольку веб-страницы Debian читаются не только носителями английского языка
и переводятся на другие языки, предпочтительнее писать ясно и на простом
английском, избегая использование сленга, смайлов и непонятных идиом.
</p>

<p>Если вы используете сленг, смайлы или сложные идиомы, добавьте к файлу комментарий,
объясняющий значение вашей фразы.</p>

<p>
Если же вы сомневаетесь в чём-то или хотите, чтобы предлагаемое вами изменение было откорректировано, свяжитесь с <a
href="mailto:debian-l10n-english@lists.debian.org">англоязычной командой локализации</a>.
</p>

<h3>Поиск README</h3>

<p>Некоторые каталоги содержат файл README, помогающий понять то, как
организован этот каталог. Файлы README должны содержать любую
специальную информацию, которая требуется для работы в этом каталоге.</p>

<h3>Отделение изменений в содержании от изменений в форматировании</h3>

<p>Всегда делайте отдельные исправления для изменения содержания и для
изменения форматирования. Если исправления объединяются, переводчикам намного сложнее
найти различия. Если вы выполните <kbd>cvs diff</kbd> с
подобными перемешанными изменениями, вы сможете сами увидеть эту мешанину.</p>

<p>В общем случае избегайте случайных изменений форматирования. Изменение старых частей
XHTML/XML-совместимых страниц не должно быть произведено в одном и том же исправлении с другими изменениями
(новое с самого начала может и должно быть добавлено корректно).</p>


<h3>Обновляйте переводы, если это возможно</h3>

<p>Некоторые изменения не зависят от языка, используемого в файле WML, например
изменения URL или встроенного кода Perl. Исправление опечаток также попадает
в эту категорию, так как переводчики зачастую игнорируют их во время перевода.
Благодаря таким независящим от языка изменениям, вы можете произвести одно и то же изменение во
всех переведённых файлах, не зная других языков,
и увеличить версию файла в заголовках translation-check.</p>

<p>Переводчикам не так сложно сделать это самостоятельно,
а для редакторов, говорящих на английском языке, может быть неудобно делать полное
извлечение дерева CVS, чтобы с ним работать. Тем не менее, вы призываем людей делать это для того,
чтобы избежать излишних хлопот для двух дюжин людей по поводу того, что может быть
быстро сделано одним человеком.</p>

<p>Кроме того, чтобы убедиться, что эти изменения легко применить, вы можете использовать
сценарий <code>smart_change.pl</code> из корневого каталога
CVS-модуля webwml.</p>

<h4>Использование smart_change.pl</h4>

<pre>smart_change.pl [параметры] оригинальный_файл</pre>

<p>В настоящее время в качестве <var>оригинального_файла</var> разрешены только файлы из каталога
<code>/english/</code>. <code>smart_change.pl</code> принимает
следующие аргументы:</p>

<dl>
      <dt><code>-s, --substitute=<var>REGEXP</var></code></dt>
      <dd>Определяет регулярное выражение Perl, применяемое к файлам с исходным кодом (может использоваться
	несколько раз). Например:
	<pre>
	  $&gt; ./smart_change.pl -s "s,http://oldurl/,http://newurl/,g" english/devel/index.wml
	  $&gt; cvs diff -u */devel/index.wml | less
	  $&gt; cvs ci -m "1.23: Updated oldurl to current location" */devel/index.wml
	</pre>
	Первая команда производит изменение, вторая команда служит для проверки
	оригинального файла на английском языке и каждого перевода этого файла. Вам следует
	делать это для того, чтобы проверить действительные изменения до внесения изменений. Если всё
	выглядит так, как вы и ожидали, внесите ваши изменения при помощи третьей команды.
      </dd>

      <dt><code>-l, --lang=<var>STRING</var></code></dt>
      <dd>Обработать этот язык (может использоваться несколько раз). Если
	язык не определён, будут обработаны все доступные языки.</dd>

      <dt><code>-n, --no-bump</code></dt>
      <dd>Не увеличивать версии в заголовках translation-check.
	Обычно, версия в каждом заголовке translation-check в актуальных переведённых файлах увеличивается
	на единицу, и остаётся
	нетронутой в тех файлах, которые не актуальны.
	Если используется этот параметр, ни один
	заголовок translation-check не будет изменён. Смотрите страницу <q>поддержание
	переводов в актуальном состоянии</q> или страницу <a href="uptodate">\
	  объяснение заголовков translation-check</a>.
      </dd>

      <dt><code>-p, --previous</code></dt>
      <dd>Показать предыдущее изменение CVS. Это полезно, когда
	изменения в файл на английском языке уже были внесены, а вы хотите проверить
	заголовки translation-check относительно предыдущей версии.</dd>

      <dt><code>-h, --help</code></dt>
      <dd>Отобразить краткую информацию об использовании.</dd>

      <dt><code>-v, --verbose</code></dt>
      <dd>Отображать подробные сообщения во время работы.</dd>
</dl>

<toc-add-entry name="links">Ссылки</toc-add-entry>

<h3><q>Эта ссылка не кажется мне правильной. Должен ли я изменить её?</q></h3>

<p>Из-за того, как настроены веб-серверы (с использованием
<a href="content_negotiation">согласования содержания</a>),
вам не следует менять какие-либо внутренние ссылки.
В действительности, мы советуем этого не делать. Если вам кажется, что ссылка некорректна,
то перед тем как изменить её, напишите в рассылку debian-www.</p>

<h3>Исправление ссылок</h3>

<p>Если вы обнаружили ссылку на внешний веб-сайт, которая ведёт на перенаправление
(301, 302, &lt;meta&gt; перенаправление или страница сообщает <q>Эта страница переехала.</q>)
сообщите об этом в рассылку debian-www.</p>

<p>Если вы обнаружили сломанную ссылку (404, 403 или ссылка ведёт не на ту страницу, которая
предполагается ссылкой), исправьте её и сообщите в рассылку debian-www об этом, чтобы переводчики
знали о вашем изменении. Ещё лучше исправить ссылку во всех переводах и обновить
заголовки translation-check, если это возможно.</p>

<toc-add-entry name="special">Отделение текста от данных</toc-add-entry>

<h3><q>Что это за файлы foo.def и foo.data?</q></h3>

<p>Чтобы упростить процесс актуализации переводов, на некоторых страницах мы отделяем общие
части (данные) от текстовых частей (текста). Переводчикам
нужно скопировать и перевести текстовые части таких страниц, общие
части будут добавлены автоматически.</p>

<p>Понять это поможет пример. В создании страницы со списком продавцов
участвуют несколько файлов из каталога <code>CD/vendors</code>:</p>

<dl>
  <dt><code>index.wml</code>:</dt>
      <dd>Текст верхней части страницы продавцов находится в этом файле.
      Переведённая копия этого файла должна быть помещена в каждый языковой каталог.</dd>
  <dt><code>vendors.CD.def</code>:</dt>
      <dd>Этот файл содержит все части текста, которые требуются для каждого
      пункта в списке продавцов. Переводы добавляются в
      <code>&lt;<var>язык</var>&gt;/po/vendors.<var>xy</var>.po</code>.</dd>
  <dt><code>vendors.CD</code>:</dt>
      <dd>Этот файл содержит действительные пункты списка продавцов, которые не зависят
      от языка, поэтому переводчику не нужно трогать этот файл.</dd>
</dl>

<p>Когда один из людей из группы <email "cdvendors@debian.org"> добавляет
нового продавца, они добавляют его в файл <code>debiancd.db</code>, конвертируют файл в формат WML
как <code>vendors.CD</code> (используя <code>getvendors.pl</code>),
и затем позволяют WML и сценариям make делать свою работу. Все переводы
перестраиваются, используя существующий переведённый текст, но с данными
о новом продавце. (Обновленный перевод без усилий!)</p>

<toc-add-entry name="newpage">Добавление новой страницы</toc-add-entry>

<p>Добавить новые страницы на сайт Debian очень просто. Вся работа по корректировке
заголовка и нижнего колонтитула производится с использованием WML. Всё, что вам нужно сделать, это добавить
строку в верхнюю часть нового файла на подобие следующей:</p>

<pre><protect>
#use wml::debian::template title="НАЗВАНИЕ СТРАНИЦЫ"
</protect></pre>

<p>за которой следует тело с содержимым. Все страницы должны использовать файл шаблона
<code>wml::debian::template</code>, если они не используют какой-то
конкретный шаблон, созданный специально для этого раздела, например для раздела новостей или раздела безопасности.</p>

<p>Имеющиеся шаблоны позволяют определять переменные, которые будут
изменять созданные страницы. Это позволяет избегать создания разных
шаблонов для каждой ситуации и облегчает внесение
изменений. В настоящее время доступны следующие переменные (указаны и их цели):</p>

<dl>
<dt>BARETITLE="true"</dt>
	<dd>Удаляет часть "Debian --", которая обычно ставится перед
	всеми тегами &lt;title&gt;.</dd>
<dt>NOHEADER="true"</dt>
	<dd>Удаляет изначальный заголовок со страницы. Изменённый заголовок
	может, конечно, быть включён в тело с содержимым.</dd>
<dt>NOMIRRORS="true"</dt>
	<dd>Удаляет выпадающий список зеркал со страницы. Обычно не рекомендуется
	использовать это за исключением нескольких страниц.</dd>
<dt>NOHOMELINK="true"</dt>
	<dd>Удаляет ссылку на главную страницу Debian, которая обычно
	помещается в нижней части страницы.</dd>
<dt>NOLANGUAGES="true"</dt>
	<dd>Удаляет ссылки на версии на других языках, которые обычно
	помещаются в нижней части страницы.</dd>
<dt>GEN_TIME="true"</dt>
	<dd>Устанавливает дату получившихся файлов в значение timestamp
	создаваемых файлов, а не timestamp исходных файлов.</dd>
<dt>NOCOPYRIGHT="true"</dt>
	<dd>Удаляет сообщение о копирайте в нижней части страницы.</dd>
</dl>

<p>Заметьте, что вы можете использовать любую строку в качестве значения этих переменных:
<q>true</q>, <q>yes</q>, <q>foo</q>, выбор не имеет значения.</p>

<p>Примером использования этого являются страницы переносов на другие архитектуры, которые имеют
свои собственные заголовки. В <code>ports/arm/index.wml</code> используется следующее:</p>

<pre><protect>
#use wml::debian::template title="Перенос ARM" NOHEADER="yes"
</protect></pre>

<p>Если вы хотите сделать что-то, что не может быть сделано при использовании существующих
шаблонов, сначала подумайте над их расширением. Если невозможно
расширить шаблон так, чтобы ваши изменения были обратно совместимы, попытайтесь сделать
новый шаблон надмножеством существующего шаблона, чтобы страницы могли быть
сконвертированы для использование нового шаблона во время следующего крупного обновления (будем надеяться,
обновления будут происходить не чаще, чем каждые 6 месяцев).</p>

<p>Если вы создаёте страницу, которая генерируется при помощи сценария или
имеет мало текста, попробуйте использовать теги &lt;gettext&gt;, чтобы облегчить
задачу поддержания переводов в актуальном состоянии.</p>

# think of a good example for <gettext> in new pages

<toc-add-entry name="inclusion">Добавление других файлов</toc-add-entry>

<p>Если вы хотите выделить некоторые части вашей страницы в специальный файл 
   (который затем будет включён в ваш главный файл), используйте
   расширение <code>.src</code>, если содержание вашего файла должно
   быть переведено, поскольку так изменения в вашем добавляемом файле будут отслеживаться
   так же как и в обычном файле <code>.wml</code>. Если вы используете какое-либо другое расширение, например
   <code>.inc</code>, переводчики не будут узнавать о ваших обновлениях, и страницы на разных
   языках могут иметь разное содержание.</p>

<toc-add-entry name="newdir">Добавление нового каталога</toc-add-entry>

<p>Внимание: <strong>не</strong> создавайте каталог с именем
<code>install</code>. Это сбивает с толку make, и страницы в этом каталоге
не будут обновляться автоматически.</p>

<p>Внизу приведён аннотированный пример добавления нового каталога на веб-сайт.
</p>
<pre>
   mkdir foo
   cvs add foo
   cd foo
   cp ../intro/Makefile .
   cvs add Makefile
</pre>

<p>Отредактируйте Makefile в родительском каталоге и добавьте каталог, который вы только
что создали в переменную <code>SUBS</code>. Это действие добавит ваш каталог для
сборки, когда будет выполнена команда make.</p>

<p>Наконец, внесите все сделанные изменения в репозиторий при помощи команды
</p>
<pre>
  cvs commit Makefile foo
</pre>
