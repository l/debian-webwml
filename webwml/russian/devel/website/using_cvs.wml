#use wml::debian::template title="Использование CVS"
#use wml::debian::translation-check translation="1.29" maintainer="Lev Lamberov"

<p>CVS&nbsp;&mdash; это программа, облегчающая нескольким людям работу над одним и
тем же материалом одновременно. Каждый пользователь создаёт локальную 
копию основного репозитория. Локальные копии могут располагаться на той 
же самой машине или в любой другой точке мира. Пользователи могут изменять
локальные копии по собственному усмотрению, и когда изменяемый материал
готов, зафиксировать изменения в основном репозитории.</p>

<p>Для доступа в режиме только-для-чтения можно использовать
<a href="http://anonscm.debian.org/viewvc/webwml/webwml/">веб-интерфейс</a>.
Также существует множество графических клиентов CVS, таких как
<a href="https://packages.debian.org/cervisia">cervisia</a> для KDE.
Этот документ описывает работу с программой <code>cvs</code> в
командной строке, другие клиенты предоставляют схожую функциональность.</p>

<p>CVS не позволит зафиксировать изменения в файле, если его копия в
основном репозитории изменилась после вашего последнего обновления.
Это обычно не является проблемой, поскольку вы по-прежнему можете отредактировать
вашу локальную копию. Если изменения были в тех областях, которые вы не
трогали, изменения автоматически будут объединены. Если изменения
затрагивают ту же часть файла, над которой работали вы, то программа
предупредит вас о конфликте. Вы должны отредактировать файл,
чтобы устранить проблему перед фиксированием изменений в репозитории.</p>

<p>В дальнейшем в качестве примера будет использоваться анонимный доступ.
Если у вас есть учётная запись с правом на
запись в репозиторий, пользуйтесь ей вместо анонимной. Если вы
планируете делать изменения, вы должны получить учётную запись перед
началом работы, поскольку анонимные пользователи не могут вносить изменения.
См. более подробную информацию в <a href="#write-access">разделе о доступе
с правом на запись</a>.</p>

<p>Чтобы начать использовать CVS, вы должны сначала войти на сервер CVS:</p>

<pre>
   cvs -d :pserver:anonymous@anonscm.debian.org:/cvs/webwml login
</pre>

<p>(для ввода пароля достаточно просто нажать enter)

<P>Чтобы извлечь копию файлов wml на вашу локальную машину, следует использовать команду:</p>

<pre>
   cvs -d :pserver:anonymous@anonscm.debian.org:/cvs/webwml checkout webwml
</pre> 

<p>Вы можете извлечь не все страницы, а любое их подмножество:</p>

<pre>
   cvs -d :pserver:anonymous@anonscm.debian.org:/cvs/webwml checkout -l \\
          webwml webwml/&lt;<var>язык</var>&gt;
   cvs -d :pserver:anonymous@anonscm.debian.org:/cvs/webwml checkout \\   
          webwml/Perl webwml/english/template webwml/&lt;<var>язык</var>&gt;/Pics
   cvs -d :pserver:anonymous@anonscm.debian.org:/cvs/webwml checkout \\
          webwml/&lt;<var>language</var>&gt;/&lt;<var>путь к желаемым файлам</var>&gt;
</pre> 

<p>Повторите эти действия для всех подкаталогов или файлов, которые вам нужны.
Вторая строка включает все файлы, которые вам будут необходимы,
если вы захотите создать HTML из WML файлов. Частичные извлечения, подобные
этим, не поддерживаются, так что эти команды могут работать не всегда.</p>

<p>
Если у вас имеется учётная запись на Alioth с соответствующим <a
href="https://alioth.debian.org/account/editsshkeys.php">\
публичным SSH-ключом</a>, вы можете использовать её следующим образом:
</p>

<pre>
   cvs -d :ext:username@cvs.debian.org:/cvs/webwml checkout webwml/english/doc
</pre>
 
<P>После этого вам уже не нужно использовать часть <code>'-d:ext:... '</code>. 
Каждые несколько дней вам нужно делать</p>

<pre>
   cvs update -d
</pre>

<p>для внесения изменений из репозитория в вашу локальную копию.
Параметр команды update <code>-d</code> добавит все новые каталоги автоматически.
Эта команда извлечёт все пропущенные каталоги, если вы выполнили
частичное извлечение&nbsp;&mdash; в этом случае вы, вероятно, захотите использовать
сценарий <code>cvsup.py</code>.</p>

<p>
Вы также можете создать файл <code>~/.cvsrc</code>, для того чтобы не обязательно было
каждый раз набирать одни и те же параметры. Например, он может содержать:</p>

<pre>
cvs -z9
update -d -P
diff -u
</pre> 

<p>Когда вы закончите работу над страницей, вы можете зафиксировать ваши изменения
в репозиторий (если имеете право на запись):</p>

<pre>
   cvs commit &lt;file&gt;.wml
</pre> 

<p>или</p>

<pre>
   cvs commit &lt;dir&gt; (чтобы внести все изменения в &lt;каталоге&gt;)
</pre>

<p>или</p>

<pre>
   cvs commit  (внести все изменения от текущего каталога и ниже)
</pre>

<P>Если вы первый, кто переводит страницу, перед её фиксированием нужно выполнить</p>

<pre>
   cvs add &lt;file&gt;.wml
</pre> 

<p>Обратите внимание, что команда <code>cvs add</code> не рекурсивна,
поэтому вы должны добавить каталог прежде, чем вы сможете добавить его содержимое.</p>

<p>Чтобы ознакомится с более подробной информацией о CVS, воспользуйтесь командой <code>info cvs</code>.</p>

<p>
Если вы добавите <code>Closes: #</code><var>nnnnnn</var> в запись вашего журнала изменений,
то ошибка с номером <code>#</code><var>nnnnnn</var> будет автоматически
закрыта как только вы внесёте изменения на сервер. Точная форма этой строки совпадает с формой, указанной
<a href="$(DOC)/debian-policy/footnotes.html#f17">в стандартах Debian</a>.</p>

<p>
Многие веб-сайты Debian поддерживают SSL, используйте ссылки HTTPS для тех, сайтов
которые имеют поддержку SSL.
Некоторые веб-сайты Debian/DebConf/SPI/другие не имеют поддержки HTTPS, либо они
подписаны только SPI, а не какой-либо авторитетной организацией SSL CA, которая входит в список доверенных
организаций, поставляемый в составе браузеров не из репозиториев Debian. Для таких сайтов следует избегать ссылок на https-версии
таких веб-сайтов, чтобы те, кто не использует Debian, не получали сообщений о
непонятных ошибках.
Репозиторий CVS отвергает коммиты, содержащие ссылки HTTP на веб-сайты
Debian, поддерживающие HTTPS, а также коммиты, содержащие ссылки HTTPS на веб-сайты
Debian/DebConf/SPI, о которых известно, что они не поддерживают
HTTPS, либо используют сертификаты, подписанные только SPI.</p>

<h3><a name="write-access">Доступ к CVS с правом на запись</a></h3>

<p>
Если вы уже знаете, <a href="$(DEVEL)/website/desc#help">как помочь</a>, и
предоставили достаточное количество заплат, принятых командой, отвечающей за сайт, или
командой локализации, вы можете получить полный доступ к сайту: пожалуйста, <a
href="https://alioth.debian.org/project/request.php?group_id=1135">отправьте
запрос на вступление в проект <code>webwml</code> на Alioth</a> (вы должны будете <a
href="https://alioth.debian.org/account/register.php">создать учётную запись
Alioth</a>, если у вас ещё нет таковой).
Пожалуйста, напишите что-нибудь полезное в вашем запросе. Например, над каким языком или какой
частью сайта вы планируете работать, а также кто за вас поручится.
</p>

