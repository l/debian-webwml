#use wml::debian::template title = "Использование CVS"
#use wml::debian::translation-check translation="1.11"

<p>CVS - это программа, облегчающая нескольким людям работу над одним и
тем же материалом одновременно. Каждый пользователь создаёт локальную 
копию основного репозитория. Локальные копии могут располагаться на той 
же самой машине, или в любой другой точке мира. Пользователи могут изменять
локальные копии, по собственному усмотрению и когда изменяемый материал
готов, зафиксировать изменения в основном репозитории.

<p>CVS не позволит зафиксировать изменения в файле, если его копия в
основном репозитории изменилась после вашего последнего обновления.
Это обычно не является проблемой, поскольку вы всё ещё можете модифицировать
вашу локальную копию. Если изменения были в тех частях, с которыми вы не
работали, то изменения автоматически будут объединены. Если изменения
затрагивают ту же самую область, над которой вы работали, то вы будете
предупреждены о существующем конфликте. Вы должны отредактировать файл,
чтобы устранить проблему перед фиксированием изменений в репозитории.

<P>В дальнейшем анонимный доступ будет использоваться в качестве примера.
Если вы имеете доступ к другой учётной записи, которая имеет право на
запись в репозиторий, то пользуйтесь ей вместо анонимной. Если вы
планируете делать изменения, то должны получить учётную запись перед
началом работы, поскольку анонимные пользователи не могут вносить изменения.

<p>Если вы являетесь разработчиком Debian, то прочитайте раздел
<a href="#cvsfordevelopers">доступ к CVS для разработчиков
Debian</a>.

<p>Для того чтобы начать использовать CVS, вы должны сначала
ввести <code>зарегистрироваться</code> на сервере CVS

<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml login
</pre> 

<p>(для ввода пароля нужно нажать просто enter)

<P>Чтобы извлечь копию wml файлов на вашу локальную машину,
вы должны использовать команду:

<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout webwml
</pre> 

<p>Вы можете извлечь не все страницы, а любое их подмножество,
как показано здесь:

<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout -l \\
          webwml webwml/&lt;<var>language</var>&gt;
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout \\
          webwml/Perl webwml/english/template webwml/&lt;<var>language</var>&gt;/Pics
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout \\
          &lt;<var>путь к необходимым файлам</var>&gt;
</pre> 

<p>Повторяйте для всех подкаталогов или файлов, которые вам нужны.
Вторая строка включает все файлы, которые вам будут необходимы,
если вы захотите создать HTML из WML файлов. Частичные извлечения, подобные
этим, не поддерживаются, так что этих команд может быть недостаточно
для получения HTML из WML.

<p>Если вы получили учётную запись (имя пользователя и пароль), используйте
ваше имя пользователя вместо анонимного,
как показано здесь:

<pre>
   cvs -d :pserver:username@cvs.debian.org:/cvs/webwml checkout webwml/english/doc
</pre>
 
(не забудьте предварительно выполнить <pre>cvs login</pre>)

<P>После этого вам уже не нужно будет использовать 
часть <code>'-d:pserver: ... '</code>. 
Каждые несколько дней вам нужно будет делать

<pre>
   cvs update -d
</pre>

<p>для внесения изменений из репозитория в вашу локальную копию.
Опция обновления <code>-d</code> добавит любые новые каталоги автоматически.
Вы также можете создать файл <code>~/.cvsrc</code>, для того чтобы
у вас не было необходимости набирать некоторые опции все время. Например
он может содержать:

<pre>
cvs -z9
update -d -P
diff -u
</pre> 

<P>
Когда вы закончите работу над страницей, вы можете зафиксировать ваши изменения
в репозиторий (если имеете доступ на запись):

<pre>
   cvs commit &lt;file&gt;.wml
</pre> 

<p> или

<pre>
   cvs commit &lt;dir&gt; (чтобы внести все изменения в &lt;каталоге&gt;)
</pre>

<p> или

<pre>
   cvs commit  (внести все изменения от текущего каталога и ниже)
</pre>

<P>Если вы первый, кто переводит страницу, нужно сделать

<pre>
   cvs add &lt;file&gt;.wml
</pre> 

<p>прежде, чем вы передаёте её. 
Обратите внимание, что  <code>cvs add</code>
не рекурсивен, поэтому вы должны добавить каталог прежде, чем вы сможете
добавить его содержание.

<P>Для получения подробной информации о CVS, используйте <code>info cvs</code>.

<H3><a name="cvsfordevelopers">Доступ разработчикам Debian к CVS для записи</a></H3>

<P>Если у разработчика Debian уже есть учётная запись на cvs.debian.org,
то можно использовать более безопасный механизм для обращения к репозиторию
CVS. Этот метод предпочтительнее, чем метод 'pserver', описанный выше.

<p>Если вы планируете работать над переводом, то просите чтобы координатор
перевода написал на webmaster@debian.org просьбу о доступе к CVS. Иначе вы
должны написать на webmaster@debian.org просьбу о доступе CVS. Как только
вас добавят к группе <tt>webwml</tt>, устанавливаете переменную среды
CVS_RSH в ssh ('<code>export CVS_RSH=ssh</code>' в вашем <code>~/.bashrc</code>)
и извлекаете из репозитория локальную копию, используя следующие команды:

<pre>
   cvs -d :ext:<var>account_name</var>@cvs.debian.org:/cvs/webwml checkout webwml
</pre> 

<p>После того как вы извлекли копию из репозитория, делайте все остальное как в
предыдущем разделе (включая материал о частичных извлечениях).

