#use wml::debian::template title="Перевод web-страниц Debian" BARETITLE=true
#use wml::fmt::verbatim
#use wml::debian::translation-check translation="1.52" maintainer="Alexander Reshetov"

<P>Чтобы максимально облегчить работу переводчиков, страницы генерируются
способом, немного отличным от того, к которому большинство из вас привыкли.
Web-страницы на самом деле генерируются из исходного кода, размеченного
с использованием языка <a
href="http://www.engelschall.com/sw/wml/"><tt>wml</tt></a>. Для каждого
языка существует отдельный каталог.

<p>Если вы планируете начать перевод web-сайта Debian на новый язык,
прочтите, пожалуйста, <a href="#completenew">раздел о запуске нового
перевода</a>.

<h2><a name="singlepages">Перевод отдельных страниц</a></h2>

<p>Чтобы отделить содержимое конкретных страницы от элементов, повторяющихся
на нескольких страницах, мы используем WML. Это означает, что нужно
редактировать исходные файлы WML, а не файлы HTML. Чтобы получить исходные
тексты, <a href="using_cvs">используйте CVS</a>. Вы должны извлечь, по крайней
мере, два каталога: <tt>webwml/english/</tt> и
<tt>webwml/<var>&lt;язык&gt;</var>/</tt>.</p>

<p>Чтобы перевести отдельную страницу, с английского языка на другой язык,
нужно перевести и поместить в каталог вашего языка оригинальный файл .wml.
Относительный путь и имя должны быть такими же, как в английском каталоге,
только в этом случае будут работать все ссылки</p>

<h3>Заголовки переводов</h3>
<p>Переводчикам настоятельно рекомендуется добавлять к заголовку файла
после последней строки <code>#use</code> дополнительную строку с информацией
о переведённой версии оригинального файла, чтобы <a href="uptodate">обновлять
перевод было проще</a>. Эта строка выглядит примерно так:
<kbd>#use wml::debian::translation-check translation="<var>x.y</var>"</kbd>

<p>Некоторые команды перевода также используют эту строку, чтобы отметить
официального переводчика каждой web-страницы. В этом случае вы будете
автоматически получать почту при внесении изменений в английский оригинал
страниц, которые вы сопровождаете, когда нужно будет обновить перевод. Чтобы
этот механизм работал, просто добавьте ваше имя в конце строки <code>#use</code>,
чтобы она выглядела следующим образом:
<kbd>#use wml::debian::translation-check translation="<var>x.y</var>" maintainer="<var>ваше имя</var>"</kbd>.
Скрипт <tt>copypage.pl</tt> выполнит это автоматически, если вы установите
переменную окружения <tt>DWWW_MAINT</tt> или вызовите его с ключом <tt>-m</tt>.</p>

<p>Вам придётся также объяснить роботу кто вы, как часто вы хотите
автоматически получать почту и что вам следует присылать. Для этого
отредактируйте (или попросите отредактировать вашего координатора) файл
webwml/<var>язык</var>/international/<var>язык</var>/translator.db.pl
в CVS. Синтаксис должен быть вполне понятен. Если для вашего языка этого
файла не существует, можно использовать в качестве шаблона файл французской
команды. Робот может посылать различные виды информации, и для каждого из них
вы можете выбрать частоту, с которой она будет приходить. Существуют следующие
виды информации:
</p>

<ul>
 <li><b>summary</b>:  резюме, какие документы устарели</li>
 <li><b>logs</b>:  "журналы cvs" изменений между переведёнными и текущими версиями</li>
 <li><b>diff</b>: "изменения cvs"</li>
 <li><b>tdiff</b>:  скрипт будет пытаться найти в переведённом тексте часть, затронутую изменением оригинала</li>
 <li><b>file</b>:  добавляет текущую версию файла, которая должна быть переведена</li>
</ul>

<p>Значение каждого может быть одним из следующих: 0 (никогда),
1 (ежемесячно), 2 (еженедельно) или 3 (ежедневно).</p>

<p>Вот пример:
</p>

<verbatim>
                'Martin Quinson' => {
                        email       => 'martin.quinson@tuxfamily.org',
                        summary     => 3,
                        logs        => 3,
                        diff        => 3,
                        tdiff       => 0,
                        file        => 0
                },
</verbatim>


<p>Заголовок web-страницы может быть легко создан с помощью скрипта
<tt>copypage.pl</tt> в корневом каталоге webwml. Этот скрипт копирует
страницу в нужное место, при необходимости создаёт каталоги и файлы Makefile
и автоматически добавляет требуемый заголовок. Вы будете извещены, если копируемая страница
уже существует в репозитории. Либо она была удалена из репозитория (из-за того, что страница
была слишком устаревшей), либо потому что кто-то уже зафиксировал перевод в репозитории
и ваша локальная копия репозитория неактуальна.
</p>

<p> Для того, что бы начать использовать <tt>copypage.pl</tt>, вы должны сначала настроить 
файл <tt>language.conf</tt>, который определяет язык перевода. В этом файле
необходимо, всего лишь, указать название языка. Вы также можете использовать переменые окружения
<tt>DWWW_LANG</tt> для указания языка и <tt>DWWW_MAINT</tt> для указания вашего имени, чтобы оно
было добавлено в заголовок сгенерированных wml-файлов, как имя сопровождающего данного перевода.
У скрипта доступны и другие функции. Для получения справки выполните
его без каких-либо аргументов.</p>

<p>После того, как вы запустили, например, <kbd>./copypage.pl
<var>файл</var>.wml</kbd>, переведите оригинальный текст в файле.
Комментарии в файлах укажут, если есть элементы, которые не нужно переводить,
соблюдайте эти указания. Не делайте никаких ненужных изменений в
форматировании. Если что-то должно быть изменено, это, вероятно, должно быть
сделано в оригинальном файле.</p>

<h3>Сборка и публикация страницы</h3>

<p>Так как мы используем <a href="content_negotiation">согласование содержания</a>,
файлы HTML называются не <tt><var>файл</var>.html</tt>, а
<tt><var>файл</var>.<var>&lt;яз&gt;</var>.html</tt>, где
<var>&lt;яз&gt;</var>&nbsp;&mdash; двухбуквенный код языка в соответствии с
<a href="https://en.wikipedia.org/wiki/List_of_ISO_639-1_codes">ISO 639</a>
(например, <tt>fr</tt> для французского языка).</p>

<p>Вы можете собрать HTML из WML, выполнив команду
<kbd>make <var>файл</var>.<var>&lt;яз&gt;</var>.html</kbd>.
Если эта команда работает, проверьте правильность синтаксиса командой
<kbd>weblint <var>файл</var>.<var>&lt;яз&gt;</var>.html</kbd>.</p>

<p>Web-страницы будут собраны из CVS на сервере www-master. Этот процесс, в
основном, не вызывает ошибок. Однако, если вы зафиксируете некорректный файл
на верхнем уровне вашего перевода (например файл верхнего уровня index.wml),
он заблокирует процесс сборки и не позволит обновить другие части сайта.
Обратите, пожалуйста, особое внимание на эти файлы.</p>

<p>Как только страница достаточно проработана, вы можете зафиксировать её
в CVS. Если у вас есть права сделать это непосредственно, запустите
<kbd>cvs commit</kbd>, в противном случае пошлите её <a
href="translation_coordinators">тому, у кого есть право на запись в
репозиторий</a>.</p>

<h2><a name="completenew">Как начать новый перевод</a></h2>

<p>Если вы хотите начать перевод web-страниц Debian на новые язык,
отправьте сообщение об этом (на английском) на <a
href="mailto:webmaster@debian.org">webmaster@debian.org</a>.

<p>Прежде всего, удостоверьтесь, что вы правильно извлекли наше дерево
исходных текстов, как описано <a href="using_cvs">на странице введения в
CVS</a>.</p>

<p>После того, как вы извлекли каталоги webwml/ и (как минимум)
webwml/english/, создайте новый каталог для вашего перевода, рядом с english/ и
другими каталогами переводов. Имя каталога перевода должно быть английским
названием языка и полностью в нижнем регистре (например "german", а не
"Deutsch").</p>

<p>Скопируйте файлы <tt>Make.lang</tt> и <tt>.wmlrc</tt> из каталога english/ в
каталог нового перевода. Они необходимы для сборки вашего перевода
из файлов WML. После того, как вы скопируете их в новый каталог языка,
необходимо изменить следующие параметры:</p>

<ol>
  <li>В файле <tt>Make.lang</tt> следует изменить переменную LANGUAGE.
  <li>В файле <tt>.wmlrc</tt> следует изменить переменные CUR_LANG,
      CUR_ISO_LANG и CHARSET. Добавьте переменную CUR_LOCALE, если она
      нужна  для сортировки.
  <li>Некоторые языки могут требовать дополнительной обработки используемой
      кодировки. Она может быть реализована с помощью параметров команды
      wml  --prolog и --epilog. Используйте в этом случае переменные WMLPROLOG
      и WMLEPILOG в файле <tt>Make.lang</tt>.
  <li>В файле <tt>webwml/Makefile</tt> верхнего уровня следует изменить
      переменную LANGUAGES, чтобы на www.debian.org ваш язык собирался вместе
      с остальными. Мы предпочли бы, чтобы вы оставили это изменение нашим
      web-мастерам, потому что при следующем извлечении копии из CVS вы не
      сможете узнать, что ваши файлы некорректны, в то время как это может
      заблокировать сборку всей остальной части нашего web-сайта.
</ol>

<p>После этих изменений добавьте к файлу Makefile в новом каталоге:

<pre>
<protect>include $(subst webwml/<var>язык</var>,webwml/english,$(CURDIR))/Makefile</protect>
</pre>

<p>(замените <var>язык</var> названием каталога вашего языка).</p>

<p>Теперь создайте в каталоге вашего языка подкаталог po и скопируйте
тот же файл Makefile в этот подкаталог (<kbd>cp ../Makefile .</kbd>).
</p>

<p>В каталоге po/, запустите <kbd>make init-po</kbd>, чтобы cгенерировать
начальный набор файлов *.po.</p>

<p>Теперь, когда создан скелет, вы можете начать с перевода общих тегов WML,
используемых в шаблонах. В первую очередь следует перевести шаблоны, которые
появляются на всех web-страницах. Это ключевые слова заголовков, элементы
панели навигации и нижний колонтитул.</p>

# На странице <a href="using_wml">использование WML</a> находится более подробная информация по этой теме.

<p>Начните переводить файл <code>po/templates.<var>xy</var>.po</code>
(где <var>xy</var>&nbsp;&mdash; двухбуквенный код вашего языка). Каждому
<code>msgid "<var>сообщение</var>"</code> изначально соответствует
<code>msgstr ""</code>, куда (между двойными кавычками) вам следует ввести
перевод строки <var>сообщение</var>.</p>

<p>Вы не обязательно переводить все строки во всех файлах .po, только
используемые в уже переведённых страницах. Чтобы узнать, нужно ли переводить
строку, см. комментарии в файле .po над оператором <code>msgid</code>. Если
указанный там файл находится в <tt>english/template/debian</tt>, скорее всего,
вам следует перевести сообщение. В противном случае вы можете отложить
перевод этого файла до тех пор, пока вы не переведёте раздел сайта, где он
используется.</p>

<p>Переход на po/ файлы облегчает работу переводчиков, позволяя им
(почти) никогда не редактировать непосредственно файлы из каталога
<tt>english/template/debian</tt>. Если вы обнаружите какую-то ошибку
в самом каталоге template, решайте проблему глобально
(не стесняйтесь попросить кого-нибудь об этом), а не фиксируйте переводы
в templates, что (обычно) будет большей проблемой.</p>

<p>Если вы не уверены в том, правильно ли вы что-то сделали, спросите в
перед фиксацией изменений списке рассылке debian-www.</p>

<p>Обратите внимание: если вы считаете, что должны сделать какие-либо другие
изменения, пошлите письмо на debian-www, в котором написано, что вы изменили и
почему, чтобы проблема могла быть исправлена.

<p>После того, как скелет шаблона сделан, вы можете начать переводить титульный
лист и другие файлы *.wml. Список файлов, которые должны быть переведены
в первую очередь, можно найти в <a href="translation_hints">советах по переводу
web-страниц</a>. Переводите отдельные *.wml страницы так, как описано <a
href="#singlepages">в начале этой страницы</a>.</p>

<h3>Актуализация устаревших переводов</h3>

<p>Как описано в разделе <a href="uptodate">о поддержке перевода web-сайта
в актуальном состоянии</a>, устаревшие переводы могут быть удалены
автоматически, когда пройдёт много времени после последнего обновления.</p>

<p>Если вы используете скрипт <tt>copypage.pl</tt> для файла, перевод которого был
удален из CVS-репозитория, он отклонит копирование страницы и попросит
вас восстановить переведённую страницу. Вы можете проверить причины удаления файла из 
CVS-репозитория, изучив журнал изменений в отношении удаленного файла, выполнив
<tt>cvs log</tt> или использовав web-интерфейс (удаленный файл можно найти
в поддиректории "Attic").</p>

<p>Для того, что бы восстановить устаревший перевод, используйте <tt>cvs status</tt> 
или <tt>cvs log</tt> для выяснения номера ревизии в которой он удалён и удаленной 
версии файла, а затем выполните восстановление методом обратного слияния.</p>

<p>Например, если удален файл "deleted.wml" в версии 1.7, а предыдущая версия
до удаления была 1.6, т.е. удаленная версия минус один, вы можете восстановить
файл, выполнив:</p>

<verbatim>cvs update -j 1.7 -j 1.6 deleted.wml</verbatim>

<p>После этой операции вы должны обновить файл до того как вы зафиксируете его в
репозитории. В противном случае он будет снова удалён.</p>

<h3>Дополнительная информация</h3>

<p>Описанного выше должно быть достаточно, чтобы позволить вам начать
перевод. Впоследствии, вы захотите обратиться к другим документам, которые
предоставляют более подробные объяснения и дополнительную полезную
информацию:</p>

<ul>
 <li>Некоторое количество <a href="examples">примеров</a> для более ясного
     понимания, как начинать перевод.
 <li>Ответы на множество стандартных вопросов и полезные советы находятся
     на странице <a href="translation_hints">советов по переводу</a>.
 <li>У нас есть механизмы <a href="uptodate">поддержания перевода в
     актуальном состоянии</a>.
 <li>Чтобы увидеть состояние перевода и насколько он соотносится с
     остальными по количеству переведённых файлов, см.
     <a href="stats/">статистику</a>.
</ul>

<p>Мы надеемся, что вы оцените работу, которую мы выполнили, сделав перевод
страниц как можно проще. Как уже было отмечено, если у вас есть какие-либо
вопросы,  вы можете задать их в списке рассылки <a
href="mailto:debian-www@lists.debian.org">debian-www</a>.</p>
