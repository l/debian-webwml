#use wml::debian::template title="Replicación push"
#use wml::debian::translation-check translation="1.5"

<p>La replicación push es una forma de replicación que usa rsync
y minimiza el tiempo que llevan los cambios del archivo principal
hasta llegar a las réplicas. El sitio de réplica servidor usa un mecanismo
de disparo que informa al sitio de réplica cliente de que necesita
actualizarse.

<p>La replicación push lleva algo más de esfuerzo para configurarla, ya que
los mantenedores de los flujos de subida y bajada de los sitios de réplica
deben intercambiar información. El benefico reside en que el flujo de subida
del sitio de réplica inicia el proceso de réplica inmediatamente después de
que su archivo haya sido actualizado. Esto permite que los cambios al archivo
se propaguen extremadamente rápido.

<h2>Explicación del método</h2>

<p>Primero una base de ssh. Ssh permite a la gente conectarse a cuentas de
máquinas diferentes de forma segura. No sólo las contraseñas no se pasan en
claro, ona vez que se conecta a una máquina básicamente se le garantiza que
las conexiones futuras serán con la misma máquina. Esto evita muchos ataques
con suplantamiento de identidad de por medio.

<p>Una capacidad de ssh es la posibilidad para un usuario de tomar la clave de
identidad pública de un usuario en otra máquina y añadirla a un archivo de claves
autorizadas en su máquina. Por defecto, el usuario de la otra máquina (que tiene
la clave de identidad privada asociada con la clave de identidad pública que le
ha dado) tiene luego privilegios de ingreso a su cuenta. Es posible, entonces,
añadir texto a una clave autorizada restringiendo el tipo de acceso que tiene
una persona que accede a su cuenta usando esa clave.

<p>Así que para proteger el flujo de bajada del sitio de réplica, la clave
proporcionada por el flujo de subida del sitio de réplica tiene texto añadido
para limitar el permiso a la persona que acceda a su cuenta sólo a hacer una
cosa - iniciar el programa en su máquina que actualiza su sitio de réplica.
Incluso si alguien (un malvado de una tercera parte) pudiera romper la clave,
lo máximo que podría hacer es iniciar el programa de réplica en su máquina.
No se tiene que preocupar de que se inicien múltiples copias del programa
porque se usa un archivo de bloqueo.

<p>Al final del flujo de subida, rsync se puede configurar para restringir
quién puede replicar un área dados un nombre de usuario y una contraseña.
Esta está totalmente separado de <kbd>/etc/passwd</kbd> para que un servidor
push no se tenga que preocupar de dar otros accesos a sus máquinas.
Tal y como está configurado, el nombre de usuario y la contraseña se pasan
en claro. Esto no debería considerarse un problema, ya que lo peor que puede
ocurrir es que una tercera parte tenga la posibilidad de replicar las
páginas de Debian desde ese sitio.

<h2>Configurando un sitio de réplica con cliente push</h2>

<p>Es mejor configurarlo usando la cuenta de un usuario normal, no root.
Los contenidos de la clave pública ssh que le haya dado el sitio de réplica
del flujo de subida los debe colocar en
<kbd>~&lt;usuario&gt;/.ssh/authorized_keys</kbd>.

<p>Para convertirse en un cliente push del archivo FTP, necesitará los
archivos <a href="ftpsync">ftpsync</a> y
<a href="ftpsync.conf">ftpsync.conf</a>. Edite ftpsync.conf y siga las
instrucciones que hay allí usando la información proporcionada por su
sitio de réplica de flujo de subida.

<p>Para convertirse en un cliente push para el archivo FTP non-US,
necesitará los archivos <a href="ftpsync-non-US">ftpsync-non-US</a> y
<a href="ftpsync-non-US.conf">ftpsync-non-US.conf</a>.
Los archivos tienen nombres diferentes aunque pueden usar la misma
cuenta para la réplica ambos archivos.

<p>Para convertirse en un cliente push para las páginas WWW, necesitará
los archivos <a href="websync">websync</a> y
<a href="websync.conf">websync.conf</a>. Edite ftpsync.conf y siga las
instrucciones que hay allí usando la información proporcionada por su
sitio de réplica de flujo de subida.

<h2>Sitios cliente primarios de push</h2>

<p>Los sitios de réplica clientes primarios de push, también denominados
sitios de réplica de nivel 1, son los sitios de réplica clientes de push
a los que se le permite replicar desde nuestros archivos maestros.

<p>Si su sitio está <strong>muy</strong> bien conectado (tanto buen ancho
de banda como buena conexión a las dorsales principales) y está deseando
dejar que otros sitios hagan réplica desde su sitio, háganoslo saber para
que le podamos considerar un sitio de réplica de push. Sin embargo, no
espere que esto ocurra muy pronto, porque ya tenemos un buen número de
sitios de réplica de nivel 1.

<p>Si su sitio llega a ser un push primario para el archivo FTP, necesitará
la clave ssh pública de archvsync@ftp-master.debian.org, bien la versión
<a href="identity.pub.master.ftp">SSH1</a>, bien la
<a href="id_dsa.pub.ftp-master">SSH2</a>.</p>

<p>Si su sitio llega a ser un push primario para el archivo FTP non-US,
necesitará la clave ssh pública de archvsync@non-us.debian.org, bien la
versión <a href="identity.pub.non-us.ftp">SSH1</a>, bien la
<a href="id_dsa.pub.non-us">SSH2</a>.</p>

<p>Si su sitio llega a ser un push primario para las páginas WWW, necesitará
la clave ssh pública de archvsync@www-master.debian.org, bien la versión
<a href="identity.pub.master.web">SSH1</a>, bien la
<a href="id_dsa.pub.www-master">SSH2</a>.</p>

<h2>Configurando un sitio de réplica push servidor</h2>

<p>Dado el gran número de sitios de réplica y el tamaño del archivo de Debian,
no es posible que todos los sitios de réplica utilicen el sitio del archivo
maestro como la fuente del flujo de subida para Debian (por ejemplo, sus
sitios de réplica de servidor push). Es mucho más eficiente si la carga se
distribuye a lo largo de un número de sitios de réplica push distribuidos
por todo el mundo.

<p>Los sitios de réplica de servidor push deberían ser clientes push del
archivo maestro (o quizás de otros servidor push), y deberían contener
una réplica del archivo de Debian completo.

<p>Vea los <a href="push_server">detalles de configuración de un servidor
push</a>.
