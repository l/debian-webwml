#use wml::debian::template title="Mirrors do web site do Debian"
#use wml::debian::toc
#include "$(ENGLISHDIR)/mirror/webmirrors.data"
#use wml::debian::translation-check translation="1.33"

<toc-display/>

<hrline>

<toc-add-entry name="list">Lista dos mirrors web</toc-add-entry>

<p>Existem mirrors das páginas WWW do Debian nos seguintes países:

<webmirrors>

<p>Se o seu país não está listado e você gostaria de patrocinar um mirror,
por favor fale conosco. Se seu país já está na lista, muito provavelmente ele
<strong>não necessita</strong> de um outro mirror. Nós normalmente <strong>não
incentivamos</strong> criação de novos mirrors para o web site do Debian.

<toc-add-entry name="whynot">Por que nós não precisamos de mais mirrors web</toc-add-entry>

<p>Nosso site web requer manutenção (um pouco mais que os mirrors do site
FTP, uma vez que você precisa mudar os arquivos de configuração do Apache de vez
em quando) e custo de recursos do patrocinador. Entretanto, devido a natureza das páginas
web, das quais você não precisa fazer download com frequência e nem se preocupar
muito caso elas chegam a 2kbps ou a 30kbps já que elas são absolutamente pequenos,
a questão de se ter muitos mirrors do web site é útil levantar-se.

<p>Havia vezes quando as conexões de Internet pelo mundo não eram
rápidas, e por ex: acessar a página www.debian.org a partir de um outro continente era terrível
e mais lento que uma típica conexão de modem. Então nós organizamos a criação de mirrors
e vários mirrors do site web vieram a existir. Dez (ou onze, se você contar
a Turquia) deles estão na Europa.

<p>Entretanto, hoje nós temos a explosão de links de redes rápidas, especialmente na Europa,
de maneira que não haverá a necessidade de um monte de mirrors. De fato, devido ao
aumento de velocidade dos links entre a Europa e a América, não é lento o acesso a 
www.debian.org da Europa.

<p>Este é basicamente o porquê de nós não necessitarmos de mais mirrros 
do site web, especialmente nos continentes onde já existem mirrors. 
Por favor respeite nosso desejo. Obrigado por sua cooperação.

<p>Caso tenha alguma questão, envie um mail para
<a href="mailto:mirrors@debian.org">mirrors@debian.org</a>.

<hrline>

<p><strong>As informações abaixo deste ponto são fornecidas apenas com referência
aos resposáveis dos mirrors existentes.</strong>

<toc-add-entry name="how">Processo de Mirror</toc-add-entry>

<p>O método recomendado de se fazer um mirror é com o rsync. Não existe acesso
anônimo aos arquivos do web site. Você pode configurar o acesso autenticado com o
responsável pelo site a partir do qual você deseja fazer o mirror, envie um 
e-mail para <a href="mailto:mirrors@debian.org">mirrors@debian.org</a>.

<p>O mirror é um processo `pull', isto é. o cliente requisita os dados do
servidor de sua conveniência. Para obtê-lo, você pode usar o
<a href="websync">script websync</a> e <a href="websync.conf">seu
arquivo de configuração</a>, o qual pode ser executado a partir do 
crontab, e fará tudo automaticamente. Siga as instruções do script 
para ter certeza que tudo ocorreu bem.

<h3>Fazendo um mirror a partir de um 'push mirror'</h3>

<p>O 'push mirroring' é uma forma que desenvolvemos para fazer um mirror 
usando rsync para minimizar o tempo gasto no exame dos repositórios dos 
mirrors. O servidor usa um gatilho ssh para informar o mirror cliente 
para se atualizar.

<p>Este método é totalmente seguro já que o ssh é configurado para executar apenas um simples
comando. Além disso, o mirror segue sendo `pull' de maneira que <strong>não</strong>
é possível corromper o conteúdo dos repositórios por meio de um 'push mirror' forjado.
Alguns administradores tem demonstrado relutância para usar este método de
mirror devido aos medos de que o método possa abrir sua máquina para invasão.
Isto simplesmente <strong>não</strong> é verdade.

<p>Para uma descrição mais detalhada de como isto funciona e porque ele é seguro, e
como configurar um 'push mirror', por favor veja <a href="push_mirroring">a explicação
completa</a>.

<toc-add-entry name="when">Quando fazer mirror</toc-add-entry>

<p>O site principal é atualizado aproximadamente a cada quatro horas.

<p>Se seu site utiliza o método 'push', então você não precisa se preocupar com
isto. Se não, você deve calcular o o tempo para se fazer a cópia para seu site
de acordo com as datas do arquivo timestamp do diretório
<code>/mirror/timestamps/</code> do mirror do web. Adicione mais algum
tempo, digo uma meia hora, ao tempo e então copie.

<p>A maneira mais fácil de se ter o mirror executando automaticamente todos os 
dias é usar o cron. Veja <kbd>man crontab</kbd> para detalhes.

<toc-add-entry name="sponsor">Anunciando o patrocinador do mirror</toc-add-entry>

<p>Os arquivos <code>sponsor.html</code> e <code>sponsor_img.jpg</code> podem
e devem ser substituidos por você. Eles existem para você anunciar seu site e para
as pessoas saberem que você é o patrocinador. Os originais estão sob
<code>sponsor.deb.html</code> e <code>sponsor.deb.jpg</code> até que o site
que você está fazendo o mirror tenha substituido o Debian fornece esses com exemplos.
A sugestão para o tamanho maximo de seu logo é 120x60.

<p>Devido a <a href="#cn">negociação de conteúdo</a> que é usada na páginas web
para selecionar o idioma preferido, você pode criar um
<code>sponsor.html</code> para idiomas diferentes. Para fazer isto simplemente crie um
sponsor.&lt;idioma&gt;.html para cada &lt;idioma&gt; que você deseje.

<p>Certifique-se de adicionar a lista de excluidos os arquivos que você não queira sobrescrever quando estiver
fazendo o mirror.

<toc-add-entry name="configure">Configurando o servidor web</toc-add-entry>

<h3>Várias Alterações no Servidor Web</h3>

<p>Se sua máquina está rodando Debian, decidiu-se quebra a política do Debian
e usar <code>/doc</code> nas págnas web.  Isto siguinifica que você deve comentar
a linha `<code>Alias /doc/ /usr/doc/</code>' do seu arquivo
<code>/etc/apache/srm.conf</code> .

<P>Nota: todos nossos scripts CGI são executados centralmente em on cgi.debian.org, sendo assim você
não precisa se preocupar com eles.

<h3><a name="cn">Negociação de Conteúdo</a></h3>

<p>A Negociação de Conteúdo é um método que deixa um browser negociar com um
servidor o tipo de documento que deve ser mostrado. Quando houver um número
de uso disto, o mais comum é negociar em qual o idioma um documento
deve ser mostrado. Usar isto permitirá ao Debian servir suas páginas em
mais de um idioma de maneira (técnicamente) muito elegante.

<P>Para quem está usando Apache, a mudança é quase trivial.
Simplesmente adicione esta opção:

<pre>
Options +Multiviews   
</pre>

<p>na seção <code>&lt;Directory&gt;</code> para as páginas do Debian no seu arquivo
<kbd>/etc/apache/access.conf</kbd> , e restart o servidor.

<p>Adicionalmente, você precisa certificar-se de que o servidor suporte todos os idiomas
que estarão no site web. Isto é feito usando o rótulo (tag)
<kbd>AddLanguage</kbd> . O Seguinte é a lista dos idiomas
já usados - esperamos mais tarde adicionar mais:

<pre>
  AddLanguage en .en
<:
foreach $l (keys %langs) { push @codes, $langs{$l}; }
foreach $c (sort @codes) { print "  AddLanguage $c .$c\n" if (($c ne "en") && ($c ne "zh")); }
:>  \
  AddLanguage pt-br .pt
  AddLanguage nb .nb
  AddLanguage zh-CN .zh-cn
  AddLanguage zh-HK .zh-hk
  AddLanguage zh-TW .zh-tw
</pre>

<p>Devido a uma problema no apache um idioma errado pode ser mostrado em algumas
circunstâncias, assim é uma boa idéia adicionar todos os idiomas servidos na opção
LanguagePriority, desta maneira:

<pre>
<:
print "LanguagePriority en fr es ";
foreach $c (sort @codes) { print "$c " if (($c ne "en") && ($c ne "fr") && ($c ne "es") && ($c ne "zh")); }
print "nb zh-CN zh-HK zh-TW\n";
print "pt-br nb zh-CN zh-HK zh-TW\n";
:>\
</pre>

<p>Para evitar de servir arquivos de conteúdo-negociado com conjunto de caracteres errados,
certifique-se de que qualquer configuração <code>AddDefaultCharSet</code> está
comentada o configurada para `<code>Off</code>'.

<p>Para servir corretamente os arquivos de indice de diretório, você provavelmente precisará
modificar a entrada <code>DirectoryIndex</code> em
<code>/etc/apache/srm.conf</code>. O seguinte deve ser suficiente:

<pre>
DirectoryIndex index index.html
</pre>

<p>Para enviar o cabeçalho correto para favicon.ico, O Apache deve ser instruído
para usar o tipo image/x-icon, deste modo:</p>

<pre>
AddType image/x-icon .ico
</pre>

<p>Para enviar o cabeçalho Context-Type correto para feeds RSS, o Apache
pode ser instruído a usar o tipo application/rss+xml desta forma:</p>

<pre>
AddType application/rss+xml .rdf
</pre>

<h3>Redirecionamento</h3>

<p>Pelo fato de algumas partes do site web estarem ficando muito grandes para serem
feitos mirrors das mesma por muitos sites, nós temos separado elas do site principal. Embora
muitos links devem ser convertidos para usar as novas localizações, você é incentivado a
adicionar um redirecionador para outro site, assim nenhum link é quebrado. Isto pode ser feito em
<kbd>/etc/apache/srm.conf</kbd>. Por exemplo:

<pre>
Redirect /Lists-Archives http://lists.debian.org/
Redirect /search http://search.debian.org
Redirect /Packages http://packages.debian.org
Redirect /lintian http://lintian.debian.org
</pre>
