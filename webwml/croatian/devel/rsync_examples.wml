#use wml::debian::template title="Primjer upotrebe rsynca, i kako podesiti ssh bez lozinki" NOHEADER=yes
#use wml::debian::translation-check translation="1.4"

<H3>Primjer upotrebe rsynca</H3>

<P>Slijedi primjer koji æe mirrorati i WWW i FTP site. Morat æete
promijeniti ime stroja i direktorije u pitanju ovisno o svojoj situaciji.

<P>'lock' datoteka je korisna ako æete ovo pokretati kao cron zadatak.
Ako iz bilo kojeg razloga mirror ne zavr¹i s poslom, sljedeæi put æe
vam pri pokretanju mirror poslati e-mail. Tako æete moæi utvrditi gdje
le¾i problem, ispraviti ga, obrisati lock datoteku i mirror æe ispravno
raditi pri sljedeæem pokretanju.

<blockquote>
<pre>
\#!/bin/sh -e

lockfile -r 1 rsync.master.lock || exit 23

rsync -avz -e ssh --exclude sponsor.* --delete &lt;stroj&gt;:/web/debian.org/ debian.org

echo Zavr¹eno je osvje¾avanje WWW mirrora. Sada prelazimo na FTP mirror...

rsync -avz --delete -e ssh &lt;stroj&gt;:/debian debian

rm -f rsync.master.lock
</pre>
</blockquote>

<p>Gornja skripta æe vas pitati lozinku osim ako ne podesite ssh na naèin
opisan dolje.

<H3><a name="paswordlessssh">Kako podesiti ssh da vas ne pita lozinku</a>:</H3>

<p>Mo¾ete napraviti RSA kljuè za prepoznavanje kako bi se mogli ulogirati na
udaljeno mjesto s va¹eg korisnièkog raèuna, bez potrebe da upisujete
lozinku.

<p>Primijetite da jednom kad ovo podesite, ako neki uljez provali u va¹
korisnièki raèun/sustav, omoguæen mu je slobodan pristup sustavu kojeg
mirrorate, takoðer! Zbog toga se ovo <strong>nikad</strong> ne bi smjelo
raditi kao root.

<ul>
  <li>Pokrenite <code>ssh-keygen</code> na va¹em stroju, i samo pritisnite
      enter kada vas bude pitao lozinku.
  <li>Dalje, dodajte sadr¾aj datoteke <code>~/.ssh/identity.pub</code> s
      va¹eg stroja u <code>~/.ssh/authorized_keys</code> na sustavu s kojeg
      mirrorate (ta datoteka mora imati dozvole 600).
</ul>

<p>Tako biste trebali moæi koristiti ssh za logiranje na mirrorani sustav
bez pitanja o lozinci.
