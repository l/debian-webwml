#use wml::debian::basic title="Nadolazeæe atrakcije"
#use wml::debian::languages

#words and phrases to translate
<define-tag intro>
Ova stranica sadr¾i popis dogaðaja u zajednici. Takoðer poja¹njava
Debianovu upletenost u dogaðaj (ako je ima).
Ako ¾elite pomoæi u dogaðaju, po¹aljite poruku izravno koordinatoru
dogaðaja. Ako koordinator nije naznaèen, a zainteresirani ste za
koordiniranje dogaðaja ili nam ¾elite javiti o dodatnim dogaðajima,
po¹aljite poruku na
&lt;<A HREF="mailto:events@debian.org">events@debian.org</A>&gt;.


<p>
Ova stranica je jo¹ u razvoju, pa su sve primjedbe/prijedlozi itd.
dobrodo¹li!
</define-tag>
<define-tag event_word>Dogaðaji</define-tag>
<define-tag past_words>Pro¹li dogaðaji</define-tag>
<define-tag none_word>nema</define-tag>

<perl>
sub get_event_list {
	my ( $path, $number, $current_dir ) = @_;


	$str=""; $over=""; $current=""; $unknown="";

	opendir(DIR, "$current_dir/$path");
  	@files = grep { /^\d+.*.wml$/ && -f "$current_dir/$path/$_" } readdir(DIR);
  	@files = sort @files;
  	closedir DIR;

  $count = 0;
  foreach (@files) {
     $count++;
     open(FILE, "<$path/$_") || open(FILE, "<$current_dir/$path/$_");
     if ( /(\d+.*).wml/ ) {
        $base = $1;
     }
     $title = ''; $when = ''; $where = ''; $desc = ''; $past = '';
     foreach $line (<FILE>) {
        if ($line =~ /^<define-tag pagetitle>(.*)<\/define-tag>$/) {
           $title = $1;
        }
        elsif ($line =~ /^#use wml::debian::past_event$/) {
           $past = 'da';
        }
        elsif ($line =~ /^#use wml::debian::event$/) {
           $past = 'ne';
        }
        elsif ($line =~ /^<define-tag date>(.*)<\/define-tag>$/) {
           $when = $1;
        }
        elsif ($line =~ /^<define-tag where>(.*)<\/define-tag>$/) {
           $where = $1;
        }
        elsif ($line =~ /^<define-tag desc>(.*)<\/define-tag>$/) {
           $desc = $1;
        }

		if ($title && $when && $where) {
           $str1 = "<TR><TD width=120><TT>[$when]</TT></TD><TD><STRONG><A HREF=\"$path/$base\">$title</A></STRONG> ($where)</TD></TR>\n";
		}
		elsif ($title && $when) {
           $str1 = "<TR><TD width=120><TT>[$when]</TT></TD><TD><STRONG><A HREF=\"$path/$base\">$title</A></STRONG></TD></TR>\n";
		}

		if ($past && $title && $when && $where ) {
			last;
		}
     }
	 if ( $past eq "da" )
	 {
	 	$over .= $str1;
	 }
	 elsif ( $past eq "ne" )
	 {
	 	$current .= $str1;
	 }
	 else
	 {
	 	$unknown .= $str1;
	 }
     close FILE;
     if ($count eq $number) { last; }
  }
close DIR;
if ( $over eq "" && $current eq "" && $unknown eq "" )
{
	$str = "$path - [<none_word>]<BR>";
}
else
{
	$str = "";
	if ( $current ne "" ) { $str .= "<H3>$path <event_word></H3><TABLE>$current</TABLE>"; }
	if ( $over ne "" ) { $str .= "<A HREF=\"./$path/\">$path - <past_words></A><BR>"; }
	if ( $unknown ne "" ) { $str .= "<H3>$path Unknown (indicates bug)</H3><TABLE>$unknown</TABLE>"; }
}
return $str;
}
</perl>

<p>
<intro>

#
# I'm not exactly sure how this design is mentally conceptualized by others.
# So, at the request of the all important user, I've moved these around
# to be more asthetically pleasing.
#
# All I've done thus far is comment out the 1999 line and add it to the top.
#
# - blackie@sfcc.net

<:= get_event_list ('1999', '0', '$(ENGLISHDIR)/events' ) :>

<:= get_event_list ('2000', '0', '$(ENGLISHDIR)/events' ) :>

#  <:= get_event_list ('1999', '0', '$(ENGLISHDIR)/events' ) :>

<:= get_event_list ('1998', '0', '$(ENGLISHDIR)/events' ) :>

<:= languages() :>
#use wml::debian::footer
