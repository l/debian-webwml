#use wml::debian::template title="Pode¹avanje mirrora Debian web stranica"
#use wml::debian::translation-check translation="1.16"
# revision 1.17 is missing, but 1.18 and 1.19 are included

<p><strong>Pa¾nja: trenutno nisu potrebni dodatni mirrori Debian web sitea.
Ne ohrabrujemo pravljenje novih mirrora Debian web sitea. Informacije ispod
su dostupne samo kao referenca odr¾avateljima postojeæih mirrora.</strong>

<p>Mirroranje je jednako i za slu¾bene i za neslu¾bene poslu¾itelje.
(<a href="types">vi¹e informacija o vrstama mirrora</a>).

# <p>Jednom pode¹en, mirror treba biti <a href="submit">registriran kod
# Debiana</a> kako bismo ga ukljuèili u <a href="../misc/README.mirrors">popis
# mirrora</a>.

<p>Ako imate pitanja, po¹aljite ih na
<a href="mailto:mirrors@debian.org">mirrors@debian.org</a>.

<H2>Metode mirroranja</H2>

<p>Preporuèena metoda mirroranja jest rsync-om.

<p>Ne preporuèuje se kori¹tenje 'mirror' programa za Debian web stranice jer
za velike direktorije, njegovo kori¹tenje memorije postaje smije¹no. Wget
takoðer nije preporuèen, jer iako dobro radi na mirroranju manjih
poslu¾itelja, nije podesiv kao rsync (ili 'mirror').

<h3>Anonimni rsync</h3>

<p>Mo¾ete koristiti <a href="anonftpsync">ovu skriptu</a> za mirroranje
arhive. Pratite upute u skripti da podesite mirroranje. Poslu¾itelji na
<a href="mirrors_full">popisu mirrora</a> koji imaju
'<kbd>Type: Push-Primary</kbd>' oznaku bi trebali biti dobar izbor za mirroranje.

<h3>Rsync s identifikacijom, sa &quot;push&quot; mirrora</h3>

<p>&quot;Push&quot; mirroranje je oblik mirroranja koristeæi rsync koje smo
razvili da sasvim smanjimo vrijeme koje je potrebno da promjene u arhivi
doðu do mirrora. Poslu¾iteljski mirror koristi tzv. ssh otponac da bi rekao
klijentskom mirroru da se treba obnoviti.

<p>Ova metoda je sasvim sigurna jer je ssh pode¹en da pokreæe samo jednu
naredbu. Takoðer, mirroranje je jo¹ uvijek &quot;pull&quot; tako da
<strong>nije</strong> moguæe pokvariti sadr¾aj arhive preko falsificiranog
push mirrora. Neki administratori mirrora su pokazali neslkonost kori¹tenju
ove metode mirroranja zbog straha da æe metoda otvoriti njihov stroj
invaziji. To jednostavno <strong>nije</strong> istina.

<p>Za detaljniji opis toga kako ovo radi, za¹to je sigurno i kako podesiti
push mirror, molimo pogledajte <a href="push_mirroring">potpuno obja¹njenje</a>.

<h2>Kada mirrorati</h2>

<p>Glavni poslu¾itelj se obnavlja svakih ¹est sati.

<p>Ako va¹ poslu¾itelj biva mirroran push metodom, ne trebate brinuti o
ovome. Ako ne, trebate izraèunati vrijeme mirroranja za va¹ poslu¾itelj
prema datumima na timestamp datotekama u <code>/mirror/timestamps/</code>
direktoriju web sitea. Dodajte malo vremena, npr. pola sata, na to vrijeme,
i onda mirrorajte.

<p>Najlak¹i naèin da se mirror ponavlja svaki dan je kori¹tenje crona.
Za detalje, pogledajte <kbd>man crontab</kbd>.

<H2>Ogla¹avanje pokrovitelja mirrora</H2>

<p><code>sponsor.html</code> i <code>sponsor_img.jpg</code> mo¾ete i trebate
vi sami izmijeniti. Oni su tu za ogla¹avanje va¹eg poslu¾itelja kako bi
ljudi znali tko je pokrovitelj. Originali su nazvani
<code>sponsor.deb.html</code> i <code>sponsor.deb.jpg</code> buduæi da je
poslu¾itelj s kojeg mirrorate vjerojatno zamijenio Debian primjere.
Preporuèena maksimalna velièina va¹eg logotipa jest 120x60.

<p>Buduæi da se na web stranicama koristi <a href="#cn">pregovaranje
sadr¾aja</a> za odabir ¾eljenog jezika, èak mo¾ete postaviti
<code>sponsor.html</code> u razlièitim jezicima. Da biste to uèinili
jednostavno napravite sponsor.&lt;jezik&gt;.html za svaki &lt;jezik&gt; koji
¾elite.

<p>Provjerite da li ste dodali datoteke koje ne ¾elite da budu prebrisane
na listu iznimki kod mirroranja.

<H2>Konfiguriranje HTTP servera</H2>

<p>Pa¾nja: sljedeæe upute podrazumijevaju da koristite Apache poslu¾itelj.
Za druge poslu¾itelje koji podr¾avaju ove moguænosti, molimo konzultirajte
odgovarajuæu dokumentaciju.

<h3>Razne promjene web poslu¾itelja</h3>

<p>Ako va¹ stroj radi na Debian OSu: odluèeno je da ignoriramo Debian policy
i koristimo <kbd>/doc</kbd> na web stranicama. Ovo znaèi da trebate
&quot;zakomentirati&quot; `<kbd>Alias /doc/ /usr/doc/</kbd>' redak iz
<kbd>/etc/apache/srm.conf</kbd> datoteke.

<P>NB: sve na¹e CGI skripte se pokreæu centralizirano na cgi.debian.orgu,
pa ne morate brinuti o njima.

<h3><a name="cn">Pregovaranje sadr¾aja</a></h3>

<p>Pregovaranje sadr¾aja je metoda koja dopu¹ta browseru da se dogovori
sa poslu¾iteljom o vrsti dokumenta koji æe biti isporuèen. Iako to ima velik
broj primjena, najèe¹æa je dogovaranje o jeziku na kojem æe se dokument
isporuèiti. To æe omoguæiti Debianu da poslu¾uje svoje stranice u mnogim
jezicima na (tehnièki) vrlo elegantan naèin.

<P>Dodajte sekciju sliènu ovoj koja slijedi, u datoteku
<kbd>/etc/apache/access.conf</kbd> (zamijenite <kbd>/debian/web</kbd>
direktorijem koji sadr¾i WWW stranice) i ponovo pokrenite poslu¾itelj (ovaj
primjer radi sa Apache verzijama 1.3 beta i kasnijima):

<pre>
&lt;Directory /debian/web&gt;
Options +Multiviews   
&lt;/Directory&gt;
</pre>

<p>Uz to, morate osigurati da server mo¾e rukovati svim jezicima koji æe se
nalaziti na WWW stranicama. To se radi koristeæi <kbd>AddLanguage</kbd>
postavke. Slijedi popis jezika koji se veæ koriste &mdash; oèekujte da æete
ih kasnije dodavati jo¹:

<pre>
AddLanguage en .en
AddLanguage fr .fr
AddLanguage de .de
AddLanguage da .da
AddLanguage it .it
AddLanguage es .es
AddLanguage ja .ja
AddLanguage pl .pl
AddLanguage ko .ko
AddLanguage hr .hr
AddLanguage pt .pt
AddLanguage fi .fi
AddLanguage zh-CN .zh-cn
AddLanguage zh-TW .zh-tw
AddLanguage cs .cs
AddLanguage sv .sv
AddLanguage no .no
AddLanguage ru .ru
AddLanguage tr .tr
AddLanguage eo .eo
AddLanguage ar .ar
AddLanguage nl .nl
AddLanguage hu .hu
AddLanguage ro .ro
</pre>

<p>Zbog gre¹ke (u Apache-u) u nekim okolnostima æe se mo¾da poslu¾iti krivi
jezik, tako da je dobra ideja dodati svaki poslu¾ivani jezik u
<kbd>LanguagePriority</kbd> opciju, ovako:

<pre>
LanguagePriority en fr de it es ja pl hr da pt fi zh-cn zh-tw cs sv ko no ru tr eo ar nl hu ro
</pre>

<p>Kako bi izbjegli poslu¾ivanje datoteka s pregovorenim sadr¾ajem a
netoènim setom znakova, provjerite da je postavka <code>AddDefaultCharSet</code>
ili &quot;zakomentirana&quot; ili postavljena na `<code>Off</code>'.

<p>Kako bi se indeksi direktorija poslu¾ivali ispravno, vjerojatno æete
morati promijeniti <kbd>DirectoryIndex</kbd> postavku u
<kbd>/etc/apache/srm.conf</kbd>. Ovo bi trebalo biti dovoljno:

<pre>
DirectoryIndex index index.html
</pre>

<h3>Preusmjeravanja</h3>

<p>Zbog toga ¹to su neki dijelovi web site-a poèinjali biti preveliki za
mirroranje veæini drugih poslu¾itelja, odvojili smo ih od glavnih stranica.
Iako bi veæina veza trebala biti konvertirana da koristi nove lokacije,
slobodno dodajte preusmjeravanje na drugi poslu¾itelj kako ne bi bilo
slomljenih linkova. Ovo se mo¾e napraviti <kbd>/etc/apache/srm.conf</kbd>.
Naprimjer:

<pre>
Redirect /Lists-Archives http://lists.debian.org/
Redirect /search http://search.debian.org
Redirect /Packages http://packages.debian.org
Redirect /lintian http://lintian.debian.org
</pre>
