#use wml::debian::template title="Pode¹avanje FTP mirrora"
#use wml::debian::translation-check translation="1.13"

<P>Mirroranje je jednako i za slu¾bene i za neslu¾bene poslu¾itelje
(<a href="types">vi¹e informacija o vrstama mirrora</a>).

<p>Jednom pode¹en, mirror treba biti <a href="submit">registriran kod
Debiana</a> da bismo ga ukljuèili u <a href="../misc/README.mirrors">popis
mirrora</a>. Predavanje informacija mo¾ete uèiniti preko
<a href="submit">jednostavnog web formulara</a>.

<p>Svi problemi i pitanja se trebaju uputiti na
<A href="mailto:mirrors@debian.org">mirrors@debian.org</A>.

<H2>Metode mirroranja</H2>

<p>Preporuèena metoda mirroranja jest rsync-om.

<p>NB: iako <kbd>wget</kbd> dobro radi za mirroranje manjih poslu¾itelja,
nije podesiv kao rsync ili 'mirror' pa ga ne preporuèujemo za ovaj posao.

<h3>Anonimni rsync</h3>

<p>Mo¾ete koristiti <a href="anonftpsync">ovu skriptu</a> za mirroranje
arhive. Pratite upute u skripti da podesite mirroranje. Poslu¾itelji na
<a href="mirrors_full">popisu mirrora</a> koji imaju
'<kbd>Type: Push-Primary</kbd>' oznaku bi trebali biti dobar izbor za
mirroranje.

<h3>Rsync s identifikacijom, sa &quot;push&quot; mirrora</h3>

&quot;Push&quot; mirroranje je oblik mirroranja koristeæi rsync koje smo
razvili da smanjimo vrijeme koje je potrebno da promjene u arhivi doðu do
mirrora. Push mirroranje koristi tzv. ssh otponac da bi reklo klijent
mirroru kada se treba obnoviti. Takoðer, mirroranje je jo¹ uvijek
&quot;pull&quot; tako da nije moguæe pokvariti sadr¾aj arhive preko
falsificiranog push mirrora.

<p>Neki administratori mirrora su pokazali neslkonost kori¹tenju ove metode
mirroranja zbog straha da æe metoda otvoriti njihov stroj invaziji. To
jednostavno nije istina. Za detaljan opis kako ovo radi i za¹to je sigurno
pogledajte <a href="explain">ovu stranicu</a>.

<p>Za pode¹avane push mirroranja treba malo vi¹e napora, jer odr¾avatelji
izvornog i ciljnog mirrora moraju razmijeniti informacije. Prednost je u
tome ¹to izvorni mirror pokreæe postupak mirroranja odmah nakon ¹to se
njegova arhiva obnovila. To omoguæava promjenama u arhivi da se pro¹ire
iznimno brzo. Pogledajte <a href="push_server">obja¹njenje</a> za detalje.

<p>Najbolje je podesiti koristeæi account obiènog korisnika, ne root-ov.
Sadr¾aj javnog ssh kljuèa koji æe vam dati sa izvornog mirrora trebate
postaviti u <kbd>~&lt;korisnik&gt;/.ssh/authorized_keys</kbd>.

<p>Potrebne su vam i datoteke <a href="ftpsync">ftpsync</a> te
<a href="ftpsync.conf">ftpsync.conf</a>. Uredite ftpsync.conf i pratite
upute u njoj koristeæi informacije koje su vam dali na izvornom mirroru.

<p>Ako va¹ poslu¾itelj postaje tzv. Push-Primary mirror, trebat æete 
<a href="identity.pub.master.ftp">javni ssh kljuè za
archvsync@ftp-master.debian.org</a>.

<p>Da bi bili &quot;push&quot; mirror za non-US arhivu, trebat æete datoteke
<a href="ftpsync-non-US">ftpsync-non-US</a> i
<a href="ftpsync-non-US.conf">ftpsync-non-US.conf</a>. Datoteke imaju
razlièita imena tako da mo¾ete koristiti isti account za mirroranje obje
arhive. Ako va¹ poslu¾itelj postaje tzv. Push-Primary mirror za non-US,
trebat æete <a href="identity.pub.non-US.ftp">javni ssh kljuè za
archvsync@non-us.debian.org</a>.

<h3>Anonimni FTP koristeæi 'mirror'</h3>

<p>Anonimni FTP je bio standardna metoda mirroranja dugo vremena. Za ovu
svrhu program 'mirror' radi dobro s Debian arhivom. Kao ¹to ste veæ
pretpostavili, 'mirror' je dostupan kao Debian paket. Ako ste instalirali
Debian paket, postoji primjer, skripta za mirroranje FTP arhive u datoteci
/etc/mirror/packages/ftp.debian.org .

<h2>Djelomièno mirroranje</h2>

<p>Uzimajuæi u obzir veæ prilièno veliku Debian arhivu, neki ljudi vi¹e vole
mirrorati samo one dijelove koje oni trebaju. Za tako ne¹to potrebne su
posebno pisane skripte, kao one od 
<a href="http://cvs.kitenet.net/~checkout~/joey-cvs/bin/debmirror?tag=HEAD&content-type=text/plain">
Joeya Hessa</a> i
<a href="http://www.Fh-Worms.DE/~inf222/code/script/debian/www/absurd_debmirror">
Stephana Suerkena</a>. Ako mislite da im ne¹to treba dodati, molimo obratite
se autorima (informacije za kontaktiranje bi trebale biti ukljuèene u samim
skriptama).

<h2>Kada mirrorati</h2>

<p>Glavna arhiva se obnavlja svaka 24 sata.

<p>Ako va¹ poslu¾itelj biva mirroran push metodom, ne trebate brinuti o
ovome. Ako ne, a server koji odaberete za mirroranje koristi rsync, tada
biste trebali pogledati u <kbd>project/trace/</kbd> u Debian arhivi izvornog
mirrora, datoteku s imenom tog poslu¾itelja. Datoteka bi trebala sadr¾avati
vrijeme kada je mirroranje zadnji put zavr¹ilo. Na to vrijeme dodajte recimo
1 sat, i tada mirrorajte.

<p>Najlak¹i naèin da automatski pokrenete mirror svakog dana jest kori¹tenje
cron-a. Pogledajte <kbd>man crontab</kbd> za detalje.

<h2>Preporuèene dodatne postavke</h2>

<p>Ako æete napraviti Debian mirror dostupnim kroz HTTP, molimo dodajte
sljedeæe postavke u va¹u Apache konfiguraciju (uz pretpostavku, naravno, da
æete koristiti Apache) za indekse direktorija:

<pre>
&lt;directory /org/ftp.debian.org/ftp&gt;
   IndexOptions NameWidth=* +SuppressDescription
   DirectoryIndex .
&lt;/directory&gt;
</pre>

<p>(zamijenite <code>/org/ftp.debian.org/ftp</code> imenom direktorija u
kojem dr¾ite mirror)
