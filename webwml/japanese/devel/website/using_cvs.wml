#use wml::debian::template title="CVS の利用方法"
#use wml::debian::translation-check translation="1.10"

<p>CVS は、複数の人が同じ対象に対して同時に作業するのを助けるためのプログラム
です。すべてのユーザが、メインのリポジトリ
(貯蔵庫) のローカルなコピーを作成します。
このローカルコピーは、同じマシンの上にあってもいいですし、
ネットワーク越しでもかまいません。ユーザはローカルコピーを好きなように
変更することができ、変更内容が正しければ、その変更をメインの
リポジトリに反映する (cvs commit する) ことができます。</p>

<p>あなたが最後にローカルコピーをアップデート (cvs update) した後に
メインのリポジトリに変更があった場合、CVS は commit を許可しません。
この場合でも、あなたはローカルコピーをアップデートできるので、
これは通常は問題にはなりません。もし、メインのリポジトリへの変更が、
あなたの行おうとしている変更とは別の部分であった場合には、両者の
変更は単に合わせられるだけです。もし変更が、あなたの行おうとしている
変更と同じ場所に及んでいる場合、衝突が発生したので
commit する前にファイルを編集して修正しなければならないという
警告が表示されます。</p>

<p>以下の例では、匿名 (anonymous) アクセスが例として取り上げられます。
リポジトリへの書き込み権限があるアカウントを持っている場合には、
そのアカウントを使ってください。anonymous ユーザは変更を commit
する権限がないので、変更を行うつもりがあるなら、
前もってアカウントを取得することをお勧めします。</p>

<p>あなたがもし Debian 開発者の場合には、
<a href="#cvsfordevelopers">Debian 開発者の CVS アクセス</a>
のセクションを読んでください。</p>

<p>CVS を使い始めるにあたって、まず CVS サーバに <code>login</code>
しなければなりません。</p>

<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml login
</pre>

<p>(パスワードを求められたら、単に enter を押してください)</p>

<p>wml ファイル群全体をあなたのローカルマシンに取得 (check out)
するには、次のようにしてください。</p>

<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout webwml
</pre>

<p>wml ファイル群の一部だけをコピー (check out) するともできます:</p>

<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout -l \\
          webwml webwml/&lt;<var>language</var>&gt;
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout \\
          webwml/Perl webwml/english/template webwml/&lt;<var>language</var>&gt;/Pics
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout \\
          &lt;<var>path to desired files</var>&gt;
</pre>

<p>必要とするサブディレクトリやファイルの数だけ、この操作を繰り返してください。
2 行目は、WML ファイルから HTML を生成するのに必要な全ファイルを含んでいます。
ただし、一部分の check out は実際にはサポートされていないので、
上記の操作は必ずうまくいくとは限りません。</p>

<p>もしあなたがユーザ名とパスワードを持っている場合には、以下に示すように、
anonymous の代わりにユーザ名を使ってください。</p>

<pre>
   cvs -d :pserver:username@cvs.debian.org:/cvs/webwml checkout webwml/english/doc
</pre>

<P>これから先は、「<code>-d:pserver:...</code>」の部分を必要としません。
数日おきに、</p>

<pre>
   cvs update -d
</pre>

<p>を実行し、リポジトリの変更を受け取ってください。update につける
<code>-d</code> オプションは、自動的に新ディレクトリを追加するという意味です。
同じオプションをいつもいつも書かなくても済むように、
<code>~/.cvsrc</code> ファイルを作るとよいでしょう。例えば、
以下のような内容にします。</p>

<pre>
cvs -z9
update -d -P
diff -u
</pre>

<p>以下の内容は、リポジトリへの書き込み権限がある人に向けたものです。
あるページへの変更作業が完了したら、以下のようにしてその変更をリポジトリに
反映 (commit) してください。</p>

<pre>
   cvs commit &lt;file&gt;.wml
</pre>

<p>または</p>

<pre>
   cvs commit &lt;dir&gt;    (&lt;dir&gt; の中のすべてのファイルを commit する)
</pre>

<p>または</p>

<pre>
   cvs commit          (カレントディレクトリ以下のすべての変更を commit する)
</pre>

<P>もしそのページを最初に翻訳した場合には、
cvs commit の前に</p>

<pre>
   cvs add &lt;file&gt;.wml
</pre>

<p>を実行する必要があります。<code>cvs add</code>
は再帰的ではないので、ディレクトリの内容を cvs add 
するよりも前にそのディレクトリ自身を cvs add しなければなりません。</p>

<P>CVS について詳しくは、<code>info cvs</code> を使ってください。</p>

<H3><a name="cvsfordevelopers">Debian 開発者の CVS 書き込みアクセス</a></H3>

<P>Debian 開発者はすでに cvs.debian.org にアカウントを持っているので、
より安全な方法で CVS リポジトリにアクセスできます。この方法は、
上記の「pserver」よりも好ましい方法です。</p>

<p>まず、webmaster@debian.org に、CVS
アクセス権を求めるメールを出してください。
あなたは <tt>webwml</tt> グループに追加されます。
その後で、環境変数 CVS_RSH を ssh に設定し
(<code>~/.bashrc</code> の中で、「<code>export CVS_RSH=ssh</code>」
としてください)、以下のようにしてリポジトリを取得 (check out) してください。
</p>

<pre>
   cvs -d :ext:<var>account_name</var>@cvs.debian.org:/cvs/webwml checkout webwml
</pre>

<p>リポジトリを check out した後は、以前のセクションと同様にしてください
(一部分だけを check out する方法も同様です)。</p>
