#use wml::debian::template title="Debian ウェブページの翻訳"
#use wml::fmt::verbatim
#use wml::debian::translation-check translation="1.51"

<P>翻訳者の作業をできるだけ簡単にするため、私たちのページは普段多くの人が
行なっているのとは少し違った方法でページを生成しています。ウェブページは
実際には <a href="http://www.engelschall.com/sw/wml/"><tt>wml</tt></a>
でマークアップされたソースを使って生成されます。
各言語毎に分かれたディレクトリが存在します。</p>

<p>もし Debian ウェブサイトの新規言語翻訳を開始したい場合は、
<a href="#completenew">新規言語の翻訳を始める</a> の節をご覧ください。

<p>訳注: 日本語への翻訳作業については、
<a href="http://www.debian.or.jp/">Debian JP Project</a> の
<a href="http://www.debian.or.jp/devel/www/WebTranslation.html">\
www.debian.org 和訳作業のページ</a>を併せて参照してください。</p>

<h2><a name="singlepages">個々のページの翻訳</a></h2>

<p>複数のページに共通する内容を、個々の内容から分離するために、
WML が使われています。つまり、HTML ファイルを編集するのではなく、
WML ソースファイルを編集しなければならない、ということです。
<a href="using_cvs">CVS を利用</a> して現在のソースを入手してください。
少なくとも <tt>webwml/english/</tt> と <tt><var>webwml/&lt;language&gt;</var>/</tt>
の 2 つのディレクトリを check out する必要があります。</p>

<p>あるページを英語からあなたの言語へ翻訳するためには、
オリジナルの .wml ファイルを翻訳し、翻訳先言語のディレクトリに
置く必要があります。リンクが正しく働くために、
相対パスとファイル名は、英語版と同じでなければなりません。</p>

<h3>翻訳ヘッダ</h3>
<p>翻訳対象となったオリジナルファイルの正確なリビジョンを記録し、
<a href="uptodate">更新を容易にする</a>ための行を、ヘッダ部分の
最後の <code>#use</code> 行の直後に追加することを強くお勧めします。
その行は、以下のようなものです:
<kbd>#use wml::debian::translation-check translation="<var>x.y</var>"</kbd>
</p>

<p>また、いくつかの翻訳チームは、各ウェブページの公式な翻訳者を記録するのに
この行を使っています。そうしていると、保守しているページの英語版が更新された
時に自動的にメールを受け取れるようになり、翻訳を更新する必要があることに
気づくことができます。そのためには、<code>#use</code> 行の末尾に
メンテナとしてあなたの名前を単純に付け加えます。以下のようになります:
<kbd>#use wml::debian::translation-check translation="<var>x.y</var>"
maintainer="<var>あなたの名前</var>"</kbd>。
<tt>DWWW_MAINT</tt> 環境変数をセットするか、コマンドラインで
<tt>-m</tt> スイッチを指示すると <tt>copypage.pl</tt> が自動的に行います。
</p>

<p>さらに、あなたが誰なのか、どのぐらいの頻度で自動的に
メールや変更内容を受け取りたいのかをロボットに説明する必要があります。
そのためには、CVS にある
webwml/<var>language</var>/international/<var>language</var>/translator.db.pl
ファイルを編集 (もしくはコーディネータに編集を依頼) します。
文法はとても分かりやすいです。もしあなたの言語用のものがまだない場合は、
フランス語チームのファイルをテンプレートとして使ってください。
ロボットは何種類かの情報をそれぞれ送信することができます。あなたは
ロボットが情報を送信する間隔を選択できます。その種類とは:
</p>

<ul>
 <li><b>summary</b>:  古くなった文書のまとめです</li>
 <li><b>logs</b>: 翻訳されたものと現在のものとの "cvs log" です</li>
 <li><b>diff</b>: "cvs diff" です</li>
 <li><b>tdiff</b>: 翻訳文における、英文の更新部分に相当する部分を、スクリプトが探してくれます</li>
 <li><b>file</b>: 翻訳すべきファイルの現在の版を追加します</li>
</ul>

<p>それぞれの値は、0 (不要)、1 (毎月)、2 (毎週)、3 (毎日) のうちの
一つとなります。</p>

<p>例えば:
</p>

<verbatim>
                'Martin Quinson' => {
                        email       => 'martin.quinson@tuxfamily.org',
                        summary     => 3,
                        logs        => 3,
                        diff        => 3,
                        tdiff       => 0,
                        file        => 0
                },
</verbatim>

<p>webwml のルートディレクトリにある <tt>copypage.pl</tt>
スクリプトを使うと、ウェブページのヘッダは簡単に作成できます。
このスクリプトは、ページを正しい位置にコピーしてくれます。
必要ならディレクトリや makefile も作成してくれます。そして、
必要なヘッダを自動的に追加してくれます。
(古くなりすぎたために)そのページがリポジトリから削除された、
あるいは誰かが既に翻訳を済ませていてリポジトリの手元のコピーが最新ではなく、
コピーしようとしたページがリポジトリに存在する場合は警告されます。</p>

<p><tt>copypage.pl</tt> の使用開始にあたっては、まず <tt>language.conf</tt>
ファイルを設定してください。このファイルにより翻訳する先の言語を決定します。
このファイルには言語名の行、これだけはなくてはなりません。また、
<tt>DWWW_LANG</tt> 環境変数を使って言語を、<tt>DWWW_MAINT</tt>
環境変数を使って自分の名前をセットすることで、生成される wml
ファイルに翻訳の担当者として追加することもできます。
スクリプトには他の機能もあります。
何の引数も無しで実行してヘルプを見てください。
</p>

<p><kbd>./copypage.pl <var>file</var>.wml</kbd> 
を実行した後で、そのファイルの中の文章を翻訳してください。
もしファイル中に翻訳してはならない部分がある場合には、
コメントによって示されています。その場合は、そのコメントに
従ってください。フォーマットに不要な変更を加えないでください。
もし修正が必要な場合、その修正はオリジナル版にも必要でしょうから。</p>

<h3>ページの作成と発行</h3>

<p>私たちは
<a href="content_negotiation">内容交渉</a>を使っているので、
HTML ファイルのファイル名は
<tt><var>file</var>.html</tt> ではなく
<tt><var>file</var>.<var>&lt;lang&gt;</var>.html</tt>
となります。ここで <var>&lt;lang&gt;</var> は、
<a href="http://ftp.ics.uci.edu/pub/ietf/http/related/iso639.txt">ISO 639</a>
に基づく 2 文字の言語コードです (例えば日本語は「<tt>ja</tt>」です)。</p>

<p>ウェブページは www-master において CVS をもとに作成されます。
この処理はたいていの場合、エラーが出ても停止しませんが、
もし壊れたファイルを翻訳のトップレベル
(例えばトップレベルの index.wml) にアップロード (cvs commit) した場合、
作成処理が壊れてしまい、他のすべてのウェブページの更新が止まってしまいます。
これらのファイルには、特に注意してください。</p>

<h2><a name="completenew">新規言語の翻訳を始める</a></h2>

<p>Debian ウェブページを新規言語に翻訳したい方は、
<a href="mailto:webmaster@debian.org">webmaster@debian.org</a>
までメールを (英語で) ください。</p>

<p>まず第一に、<a href="using_cvs">CVS 紹介ページに</a>記述してあるように
ソースツリーのチェックアウトが適切にできたことを確認してください。</p>

<p>webwml/ ディレクトリと (少なくとも) webwml/english/ 
をチェックアウトした後、english/ やその他の隣にあなたの言語用の新規
ディレクトリを作成するところから始めます。翻訳ディレクトリの名称は、
英語で、すべて小文字でなければなりません (例えば、
「Deutsch」ではなく「german」です)。</p>

<p><tt>Make.lang</tt> と <tt>.wmlrc</tt> のファイルを english/
ディレクトリから新しく作った翻訳ディレクトリにコピーします。
これらのファイルは、あなたの翻訳を WML ファイルから構築するために必須の
ファイルです。これらのファイルをコピーした後、以下に示した項目
だけを変更すればいいようになっています。</p>

<ol>
  <li><tt>Make.lang</tt> ファイル中の LANGUAGE 変数は
      変更しなければなりません。</li>

  <li><tt>.wmlrc</tt> ファイル中の CUR_LANG,
      CUR_ISO_LANG, CHARSET 変数は変更しなければなりません。
      ソートのために必要であれば CUR_LOCALE 変数をこのファイルに追加してください。</li>

  <li>いくつかの言語では文字セットを扱うための特別な処理が必要になるか
      もしれません。これは wml の --prolog と --epilog オプションを利
      用することで行なえます。これを行なうには <tt>Make.lang</tt> 中で
      WMLPROLOG 変数と WMLEPILOG 変数を利用します。</li>

  <li>あなたの言語が他の言語と一緒に www.debian.org に構築されるために、
      <tt>webwml/Makefile</tt> ファイル中の LANGUAGES 変数を変更する必要があります。
      私たちは、この変更をウェブ管理者に委ねてもらうことを好みます。
      というのは、CVS によって再びチェックアウトされた時に
      あなたの翻訳が壊れているかもしれないからで、もしそうなれば
      ウェブサイトの他のページの構築にも悪影響を及ぼす可能性があるからです。</li>
</ol>

<p>このあと、そのディレクトリに新しく「Makefile」という名前のファイルを
作成し、以下に示す行を置いてください:</p>

<pre>
<protect>include $(subst webwml/<var>yourlanguagedir</var>,webwml/english,$(CURDIR))/Makefile</protect>
</pre>

<p>(もちろん、<var>yourlanguagedir</var> は、あなたの言語のディレクトリ名で
置き換えてください)。</p>

<p>次に、あなたの言語のディレクトリの下に、「po」という名前の
サブディレクトリを作成し、同じ Makefile をそのサブディレクトリに
コピーしてください (<kbd>cp ../Makefile .</kbd>)。</p>

<p>po/ ディレクトリの中で、<kbd>make init-po</kbd> を実行し、
初期状態の *.po ファイル群を作成してください。</p>

<p>これで骨格部分ができあがったので、
テンプレートに使われている共通の WML タグの翻訳作業が開始できます。
ヘッダのキーワード、ナビゲーションバーの項目、フッタなど、
すべてのウェブページに使われる語句から翻訳を始めるのが良いでしょう。</p>

# The page on <a href="using_wml">using WML</a> has more information on this.

<p><code>po/templates.<var>xy</var>.po</code>
ファイルの翻訳を始めます
(ここで、<var>xy</var> は 2 文字の言語コードです)。
初期状態では、すべての <code>msgid "<var>something</var>"</code>
に対し、<code>msgstr ""</code> が存在します。<var>something</var>
を翻訳したものを、<code>msgstr</code> のあとの引用符の中に書いてください。</p>

<p>すべての .po ファイル中のすべての文字列を翻訳する必要はありません。
翻訳されたページが必要とする部分だけで構いません。ある文字列の翻訳が
必要かどうかを調べるには、各 <code>msgid</code> の直前に書かれてある
コメントを見てください。もし <tt>english/template/debian</tt>
ディレクトリ中のファイルが参照されていたら、それは翻訳したほうがいいです。
そうでなければ、それに関連し、その部分を必要とするウェブページを
翻訳するまで、その部分の翻訳を延期しても構いません。</p>

<p>po/ ファイルのポイントは翻訳者にとって物事をもっとやり易くすることであり、
<tt>english/template/debian</tt> ディレクトリ自体の中で何かを編集する必要は (ほぼ) ありません。
テンプレートディレクトリ内で何かをセットアップする上で問題に気付いたら、
(通常) 大きな問題となりかねない実際の翻訳をテンプレートに commit するよりも、
問題が一般的なやり方で修正されないかどうか確認してください
(それをしてくれるよう誰かほかの人に遠慮なく頼んでください)。</p>

<p>もし正しく作業できたかどうか自信がないときは、commit
する前に、debian-www メーリングリストで相談してください。</p>

<p>注意: もしそれ以外の部分で変更が必要であれば、
問題が解決するために、
どんな変更をなぜ加えるのかを debian-www で説明してください。</p>

<p>テンプレートの骨格ができあがったら、フロントページやその他の
*.wml ファイルを翻訳してください。最初に翻訳すべきファイルの一覧が、
<a href="translation_hints">翻訳に役立つ情報</a>のページにあります。
*.wml ページの翻訳のやりかたについては、<a
href="#singlepages">このページの最初</a>を見てください。</p>

<h3>失効した翻訳の復活</h3>

<p><a href="uptodate">ウェブサイトの翻訳を最新に保つ方法</a>で説明しているように、
ウェブサイトの失効した翻訳が更新されないまま長期間が過ぎると自動的に削除されることがあります。</p>

<p><tt>copypage.pl</tt> スクリプトを CVS から削除されたファイルに対して使うと、
ページのコピーは拒否され、代わりに復活を求められます。
ファイルが削除された理由は cvs でその削除されたファイルに対して <tt>cvs log</tt>
することで確認できます(ウェブインターフェイスでも確認できます。
削除されたファイルは "Attic" サブディレクトリにあります)。
</p>

<p>失効した翻訳の復活には、<tt>cvs status</tt> (または <tt>cvs log</tt>)
で削除された版のバージョン番号をメモしておいて<q>逆方向マージ</q>を行います。</p>

<p>例えば削除されたファイルが "deleted.wml" で、削除された版が 1.7 で、
削除前の版が 1.6 (削除された版の一つ前)であるとき。</p>

<verbatim>
   cvs update -j 1.7 -j 1.6 deleted.wml
</verbatim>

<p>とすることで復元できます。必要があってこれを行った場合、当然ですが、
格納する前に内容を更新してください。でないと削除される可能性があります。</p>

<h3>最後に</h3>

<p>おそらく上記の説明だけで、翻訳を始めるのに十分でしょうが、あとで更に
詳しい説明や役立つ情報を補足してくれる以下のドキュメントを参照したほうが
いいでしょう。</p>

<ul>
<li>いくつかの <a href="examples">例</a> は作業を始めるための具体例を
    挙げています。</li>
<li>よくある質問とその回答や、役立つヒントが
    <a href="translation_hints">翻訳のヒント</a> のページにあります。</li>
<li>私たちには、<a href="uptodate">翻訳を最新にしておく</a>のを手助けするのに、
    ふさわしい仕組みがあります。</li>
<li>翻訳状況や、他の言語との比較を行うには、
    <a href="stats/">翻訳統計</a>を参照してください。</li>
</ul>

<p>ウェブページの翻訳作業をできるだけ簡単にしていくよう、これまでの
私たちの作業をわかっていただければ幸いです。すでに述べたように、
もしなにか質問があれば <a
href="mailto:debian-www@lists.debian.org">debian-www</a> メーリングリストで
聞いてください。</p>
