#use wml::debian::template title="Debian ウェブページに関する作業"
<!--original_revision: 1.3 :-->

<p>Debian ウェブページは次の 3 つの方法のいずれかによって生成されています。
文書のページは
<a href="http://www.debian.org/~elphick/ddp/">Debian Documentation Project (DDP)</a>
からミラーされます。いくつかのページはスクリプトによって生成され
(Bug pages と Lists-Archives の 2 つが良い例です)、残りのページは
wml によって生成されています。

<h3>wml って何ですか?</h3>
WML は、最終的に html ファイルを生成するまでにはいくつかのフィルタを
通す必要がありますが、その大部分は html に非常によく似ています。
私たちはこれによって、ページの動的な生成の利点の多くを保ちながら、
(ウェブページのミラーには不可欠な) 静的なページの作成を実現しています。

<p>wml の将来性の一つとして perl を拡張機能として使えることが挙げられます。
これらは動的なページではない事を思い出してください。
perl を使えば html ページが生成される時に好きな様にできます。ページ中で
perl を使った 2 つの良い例が、メインページの最新ニュースの一覧作成と、
ページの最後にある翻訳されたページへのリンク生成です。

<p>ドキュメントを読んで wml を理解するのは少し難しいかもしれません。
実際にはとても完璧に書かれていますが、どう処理されるか(とてもパワフルです)を
理解し始めるまで、既存のページを具体例として実際に使ってみるのが一番簡単です。

<h3>wml ソースにアクセスする (CVS の利用)</h3>
ウェブページの wml ソースは CVS により管理されています。
CVS を使えば、中央サイトでマスターソースの管理もできますし、
'checkout' オプションで各々がリポジトリよりローカルコピーを作ることもできます。
master 上でのコピー(実際のウェブページの生成に使用されます)も、
'<kbd>cvs update</kbd>' によってリポジトリから毎日更新されています。

<p>ユーザーネームに <kbd>anonymous</kbd> を使うことで、
誰でもリポジトリからコピーをダウンロードできます。書き込み権限を得る為には
<a href="mailto:webmaster@debian.org">webmaster@debian.org</a>
宛にメールを送る必要があります。もし CVS をあまり使った事がなければ、
<a href="HOWTO_translate">Debian ウェブページを翻訳するには</a> にあるいくつかの使用例に
ついての記述を御覧ください。

<h3>新しいページの追加</h3>
<p>Debian ウェブサイトに新しいページを追加するのはとても簡単です。
ヘッダーやフッターを正しく付ける作業は全て wml を用いて行なわれます。
しなければならないのは、新しいファイルの先頭行に以下のような一行を
記述することだけです。
<pre><protect>
#use wml::debian::template title="ページのタイトル名" 
</protect></pre>
本文はこの行以降に記述します。ニュースやセキュリティーのページの様に
専用に作られたテンプレートファイルがない限り、全てのページで
wml::debian::template と指定してください。

<p>テンプレート (wml::debian::template) では、ページの生成に変更を加えるための
変数の定義が可能です。これにより、全てのページでそれぞれ異なるテンプレートを
作らなくて済みますし、その実装の改良もずっと容易になります。現在利用可能な変数
とその利用目的は以下の通りです。

<dl>
<dt>NOHEADER="yes"
	<dd>デフォルトのヘッダーを取り除きます。勿論、そのページ用に作った
	    ヘッダーを本文として記述することは可能です。
<dt>NOHOMELINK="yes"
	<dd>文末の Debian メインページに戻るリンクを取り除きます。
<dt>NOLANGUAGES="yes"
	<dd>文末の他言語ページへのリンクを取り除きます。
<dt>NOCOPYRIGHT="yes"
	<dd>ページ下部の著作権表示を取り除きます。
</dl>

<p>使い方の一例として、独自のヘッダーを使っている移植版のページを見てみましょう。
ports/arm/index.wml では以下の様になっています。
<pre><protect>
#use wml::debian::template title="ARM Port" NOHEADER="yes"
</protect></pre>

<p>既存のテンプレートではできないような事をしたい場合、テンプレートの 1 つを
拡張する事を最初に考えるでしょう。下位互換性の面でテンプレートの拡張が
できなければ、既存のテンプレートの上位セットとして新しいテンプレートを作成
してください。そうする事で次回のメジャーアップグレード時
(6 ヵ月を超過しないよう望んでいます)に、新しいテンプレートに変換されます。

<p>もし、スクリプトによって生成されるページ、または、少し統一性に欠けるページ
を作成しているなら、翻訳ページを最新にしておく作業を簡単にする為に
wml 中でスライスフィルターを使う事を考慮してください。この良い一例が
<kbd>distrib/vendors.wml</kbd> にあります。このページに新しいベンダーを
追加すると、その追加分は全ての言語のページで自動的に反映されます。
<kbd>vendors.wml</kbd> では、実際のベンダー一覧である <kbd>vendors.CD</kbd> を
include しています。このファイルでは <kbd>distrib/vendors.CD.def</kbd> を
include しており、<kbd>vendors.CD</kbd> 中の全ての項目を定義しています。
翻訳者は以下の例の様に、定義する各項目名の翻訳を追加するだけです。
<pre><protect>
	[EN:Country:]\
	[ES:Pa-is:]\
	[DE:Land:]\
</protect></pre>
