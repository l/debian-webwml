#use wml::debian::template title="Debian ウェブページの作業"
<!--original_revision: 1.3 :-->

<p>Debian ウェブページの生成には次の3つの方法があります。
文書のページは
<a href="http://www.debian.org/~elphick/ddp/">Debian Documentation Project (DDP)</a>
からミラーされます。いくつかのページはスクリプトによって生成され
(the Bug pages と Lists-Archives の2つが良い例です)、残りのページは
wml によって生成されています。

<h3>wml って何ですか?</h3>
wml はその殆どの点で html の生成にとても適しています。しかし、html
を生成する前に多くのフィルターに通さなければなりません。
動的に作られたページの方が利点は多いのですが、我々はこれを使って
静的なページにしています(ウェブページのミラーを考慮すると必然です)。

<p>wml の将来性の一つとして perl を拡張機能として使えることが挙げられます。
これらは動的なページではない事を思い出して下さい。
perl を使えば html ページが生成される時に好きな様に出来ます。ページ中で
perl を使った2つの良い例が、メインページの最新ニュースの一覧作成と、
ページの最後にある翻訳されたページへのリンク生成です。

<p>ドキュメントを読んで wml を理解するのは少し難しいかもしれません。
実際にはとても完璧に書かれていますが、どう処理されるか(とてもパワフルです)を
理解し始めるまで、既存のページを具体例として実際に使ってみるのが一番簡単です。

<h3>wml ソースにアクセスする (CVS の利用)</h3>
ウェブページの wml ソースは CVS により管理されています。
CVS を使えば、中央サイトでマスターソースの管理も出来ますし、
'checkout' オプションで各々がリポジトリよりローカルコピーを作ることも出来ます。
master 上でのコピー(実際のウェブページの生成に使用されます)も、
'<kbd>cvs update</kbd>' によってリポジトリから毎日更新されています。

<p>ユーザーネームに <kbd>anonymous</kbd> を使うことで、
誰でもリポジトリからコピーをダウンロード出来ます。書き込み権限を得る為には
<a href="mailto:webmaster@debian.org">webmaster@debian.org</a>
宛にメールを送る必要があります。もし CVS をあまり使った事がなければ、
<a href="HOWTO_translate">HOWTO translate pages</a> にあるいくつかの使用例に
ついての記述を御覧下さい。

<h3>新しいページの追加</h3>
<p>Debian で新しいページを追加するのはとても簡単です。
ヘッダーとフッターを正しく付ける作業は全部 wml がやってくれます。
しなければならないのは、新しいファイルの先頭行に以下のような一行を
記述することだけです。
<pre><protect>
#use wml::debian::template title="TITLE OF PAGE" 
</protect></pre>
本文はこの行以降に記述します。ニュースやセキュリティーのページの様に
専用に作られたテンプレートファイルがない限り、全てのページで
wml::debian::template と指定して下さい。

<p>効果的なページを作るため、テンプレート( wml::debian::template )を
ある程度変更することが出来ます。これにより、全てのページでそれぞれ異なる
テンプレートを作らなくて済みますし、より効果的で簡単なツールとして活用する
ことが出来ます。現在利用可能なオプションとその内容は以下の通りです。
<dl>
<dt>NOHEADER="yes"
	<dd>デフォルトのヘッダーを付加しません。勿論、そのページ用に作った
	    ヘッダーを本文として記述することは可能です。
<dt>NOHOMELINK="yes"
	<dd>文末の Debian メインページに戻るリンクを付加しません。
<dt>NOLANGUAGES="yes"
	<dd>文末の他言語ページへのリンクを付加しません。
<dt>NOCOPYRIGHT="yes"
	<dd>文末のライセンス条項へのリンクを付加しません。
</dl>

<p>使い方の一例として、独自のヘッダーを使っている移植版のページを見てみましょう。
ports/arm/index.wml では以下の様になっています。
<pre><protect>
#use wml::debian::template title="ARM Port" NOHEADER="yes"
</protect></pre>

<p>既存のテンプレートでは出来ないような事をしたい場合、テンプレートの1つを
拡張する事を最初に考えるでしょう。共有の面でテンプレートの拡張が出来なければ、
既存のテンプレートの上位セットとして新しいテンプレートを作成しようと
するでしょう。そうする事で次回のメジャーアップグレード時
(6ヵ月を超過しないよう望んでいます)に、新しいテンプレートに変換されます。

<p>もし、スクリプトによって生成されるページ、または、少し統一性に欠けるページ
を作成しているなら、翻訳ページを最新にしておく作業を簡単にする為に
wml 中でスライスフィルターを使う事を考えるでしょう。この良い一例が
<kbd>distrib/vendors.wml</kbd>にあります。このページに新しいベンダーを
追加すると、その追加分は全ての言語のページで時動的に反映されます。
<kbd>vendors.wml</kbd> では、実際のベンダー一覧である <kbd>vendors.CD</kbd> を
include しています。このファイルでは <kbd>distrib/vendors.CD.def</kbd> を
include していて、<kbd>vendors.CD</kbd> 中の全ての項目を定義しています。
翻訳者は以下の例の様に、定義する各項目名の翻訳を追加しておく必要があります。
<pre><protect>
	[EN:Country:]\
	[ES:Pa-is:]\
	[DE:Land:]\
</protect></pre>
