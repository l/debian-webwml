#use wml::debian::template title="Debian GNU/Hurd --- Hurd-CDs" NOHEADER="yes"
#include "$(ENGLISHDIR)/ports/hurd/menu.inc"
#use wml::debian::translation-check translation="1.59"


<define-tag cdserie>K14</define-tag>
<define-tag cdbasename>debian-<cdserie>-hurd-i386</define-tag>

<h1>Debian GNU/Hurd</h1>

<h2>非公式 Debian GNU/Hurd インストール CD-ROM を使う</h2>

<p>多くの人々が GNU システムを GNU/Hurd と呼びますが、これは厳密には
正しくありません。カーネルは GNU Mach であって Hurd ではありません。
Hurd はマイクロカーネルである GNU Mach の上で動作する、一連のサーバです。
Hurd と GNU Mach は GNU プロジェクトの一部分ですが、Linux カーネルは
独立したプロジェクトです。</p>

<p>現在の Debian GNU/Hurd <cdserie> シリーズ。</p>

<p>このシリーズは 6 つのイメージの最初の 4 つのみがリリースされています。</p>
<p>ネットワーク経由でインストールしたい人のために、
小さな mini イメージ (<cdbasename>-mini.iso) が作られました。</p>

<p>baseGNU.tgz (基本の GNU システムの tarball) はこの CD セット
のために特別に構築されました。</p>

+<p><em>重要:</em> <a
href="http://lists.debian.org/debian-hurd/2007/09/msg00007.html">アップグレード
の注意</a> をよく読んでください。</p>

<h3>ダウンロード</h3>

<p>現在の iso イメージは <cdbasename>-CDx.iso です。GNU システムに特有のバイナリ
の全てが最初の 2 枚の CD の中にあり、そして required、important、standard 
パッケージの全てが最初の CD にあります。従って基本となる GNU システムは
最初の CD を使ってインストールできます。</p>

<p>以下のサイトはたいていイメージをミラーしていますが、まず確認してみてください。</p>

<p>メインサイトはスペインの <url "ftp.debian-ports.org/debian-cd/"> で、
これらのイメージはカナダの <url "http://www.superunprivileged.org/debian-cd/">、
フランスの <url "ftp://ftp.duckcorp.org/hurdfr/hurd/"> と <url
"ftp://ftp.eila.jussieu.fr/pub/Debian-CD/"> でミラーされています。
</p>

<p>
<url "http://www.filesearching.com/"> で
hurd-K を検索すれば、より近いサイトが見つかるかもしれません。</p>

<p>イメージから CD を焼く方法は <url
"http://cdimage.debian.org/faq.html"> にあります。
</p>

<h3>CD-ROM</h3>

<p><a href="$(HOME)/CD/vendors/">GNU/Hurd CD ベンダを探すにはこのページ</a>を見てください。
ブラウザの検索機能で "hurd" を探してください。
<url "http://www.copyleft.co.nz"> には常に最新の CD があります (私のサイトです。ご注意を)。
</p>

<h3>どのようにインストールディスクが動作するか</h3>

<p>Debian GNU/Linux の potato のインストール CD は、基本システムを
インストールするのに、クロスインストール方を用いています。ラムディスク
がメモリに作られ、小さな GNU/Linux システムがこのディスクにインストールされます。
この小さシステムはディスクのパーティションの作成とフォーマット、そして
主なインストールのためにターゲットマシンを準備するのに使われます。重要な局面は、
必須の基本パッケージの tarball をターゲットシステムのドライブに展開することです。
そして HDD に展開されたパッケージを使って新しいシステムがリブートします。
要求されるシステムを作るために、更なるパッケージがインストールされ設定されます。
</p>

<p>GNU も同様にクロスインストール方を用いているので、
GNU インストールを作成するためのスクリプトは、Debian GNU/Linux の起動スクリプトと
CD のスクリプトから、GNU/Linux の tarball ではなく GNU が展開されるように、
作り変えることができます。
</p>

<p>GNU システムを cdrom を使ってインストールすることにはいくつか利点があります。</p>
<ul>
<li>
GNU/Linux がラムディスク上で動作して tarball は cdrom 上にあるので、GNU システム
は何もインストールされていない真っ新なマシンや、インストールされているオペレーティングシステムを
使いたくないマシンにインストールすることができます。</li>

<li>
CD 上でパッケージを収めているファイルシステムは、種々の応急処置を含めるために
再構成されるかもしれません。</li>

<li>
"parted" の GNU/Hurd バージョンが利用できますが、起動ディスク中の
GNU/Linux の "cfdisk" を使うのを好む人もいます。</li>

<li>
この方法はより早く、つまらないことが少ないのでほとんどの人がこの方法に慣れています。</li>
</ul>


<h3>Hurd のパーティション</h3>

<p>
Hurd は ext2 ファイルシステムの拡張を使えて、
呼び出し方は <code>mke2fs -o hurd /dev/[Hurd partition]</code> です。
インストール CD は Hurd パーティションを作るときにこれを使います。
</p>


<h3>インストール CD を使う</h3>

<h4>準備</h4>

<p>
Hurd に特化したドキュメンテーションは ./doc/hurd 以下で見つかります。
hurd-install-guide と Cook-book はあなたが始める前に必ず読んでおかなければ
ならない文書です。
</p>

<ol>
<li><em>GRUB 起動ディスクを使う</em>
<p>
GRUB フロッピーイメージの入っている grub-disk パッケージをインストール
してください。
もし GNU/Linux で作業しているのなら dd を、MS で作業しているのなら
rawrite を使うことができます。
</p></li>

<li>
Linux、GRUB、そして Hurd のドライブとパーティションの命名法を確実に理解して
ください。あなたはこれらの全てを使い、これらの間の関係はあなたを混乱させるかもしれません。</li>
</ol>

<p>Hurd は Linux とは異なるパーティション名を使うので、注意してください。
IDE のハードディスクは、プライマリマスターが hd0 から始まり、スレーブは hd1
になります。さらにセカンダリマスターは hd2 に、スレーブは hd3 になります。
SCSI ドライブも完全に絶対的な順番で番号が振られます。2 つのドライブが
SCSI id 4 と 5 であるかそれ以外であるかにかかわらず、常に sd0、sd1 等になります。
実験により cdrom ドライブは巧妙でありうることが示されています。これについては
後述します。</p>

<p>Linux タイブのパーティションは Hurd を使うときには常に sn と呼ばれ、
n にはパーティションの番号が入るので、最初の IDE ドライブの最初のパーティションは
hd0s1 となり、2 つ目の SCSI ドライブの 3 つ目のパーティションは sd1d3 というようになります。</p>

<p>GRUB はまた異なるパーティション命名方を持ちます。GRUB はパーティションを
(hdN,n) と呼びますが、今回はディスクの番号とパーティションの番号は
ゼロから始まり、ディスクはまず IDE ディスクが先で SCSI ディスクは 2 番目という
順番で動作します。今回では、最初の IDE ドライブの最初のパーティションは
(hd0,0) になるでしょう。特に混乱するのは (hd1,2) が、もしあなたが IDE ドライブ
を 1 つしか持っていないのなら最初の SCSI ドライブを指し、そうでなければ
2 つ目の IDE ドライブを指す可能性があるということです。従って始める前に
パーティションの様々な名前について理解しておくことが重要になります。
</p>

<h4>インストール</h4>

<ol>
<li><em>CD を起動してください。</em>
<p>
Debian 3.0 ベータ (woody) の CD を起動する方法ならどれでも使えます。例えば CD 
から、MS から、そして boot/root フロッピーイメージから起動できます。
もし cdrom ドライブがなければ、ベースフロッピーの完全なセットを作ることができます。</p></li>

<li><em>画面を開いたあとに、"Partition a Hard Disk" を開いてください。</em>
<p>
もし .deb パッケージをハードディスクにコピーするつもりなら、各 CD につき
1 つの他のパーティションを作る必要があります。GNU/Hurd では parted が使えますが、
この機能を利用してもよいでしょう。メインシステムに 500 MB もあれば、始めるには十分です。
もし他のパーティションを作る必要があるなら、CD を再起動して
Linux のラムディスクの中のツールを使うのが簡単かもしれません。</p></li>

<li><em>使うつもりのパーティションの、GRUB と Hurd での名前を理解してください。</em></li>

<li><em>"Partition a Hard Disk" を使ってパーティションを準備してください。</em>
そしてスワップパーティションを必ず作ってください。GNU/Hurd はスワップに関してはうるさいのです。</li>

<li>"Initialize a Hurd Partition" を使って
<em>Hurd パーティションを フォーマットしてください。</em>
そしてそれを "/" にマウントしてください。他のパーティションを
マウントしないでください。</li>

<li><em>"Install the Base System" を使って基本システムをインストールしてください。</em></li>

<li><em>GRUB フロッピーをドライブに入れて "Reboot the System" で再起動してください</em>
(bios をリセットするのを忘れないでください)。それだけです! [1 度目の再起動]</li>
</ol>

<p>もし GNU/Hurd のパーティションが "(hd0,0)" [GRUB の命名法]
で、"sd0s1" [GNU/Hurd] である場合、つまり IDE ドライブがなく
SCSI の最初のハードディスクの最初のパーティションである場合、仲介なしに
システムが起動するでしょう。<br />

GRUB のイメージが準備されているので、GNU システムを起動するために
ほとんど編集することはないでしょう。</p>

<p>起動プロセスが完了するまでキーボードから手を離しておいてください。</p>

<p>システムが望むように起動するように、GRUB フロッピーの 
"/boot/grub/menu.lst" を、編集することができます。
</p>


<h3>次の段階</h3>

<ol>
<li><em>
システムが起動したあとに ./native-install を走らせてください。</em>
"reboot" を使ってシステムを再起動してください。起動メッセージを見て、
cdrom がどこにあるかを注意して書き留めてください。[2 度目の再起動]</li>

<li><em>再起動が完了したら、再び ./native-install を走らせてください。</em>
今回は付属しているパッケージの全てが設定されます。もう一度再起動してください。
[3 度目の再起動]。これでシステムを設定できます。root としてログインするには、
"login root" としてください。</li>

<li><em>/dev に移動してください。必要なデバイスを作成してください。</em>
例えば、cdrom、スワップパーティション、他のハードディスクのパーティションなどです。

<p>例
"MAKEDEV hd2 hd0s2 hd0s3"</p></li>

<li><em>/etc/fstab を編集するには、"nano /etc/fstab" としてください</em>。
nano はひどいエディタではありません。
<p>ハードディスクのパーティションを追加するには、例えば<br />
/dev/[Hurd partition name]   none    swap    sw    0       0<br />
/dev/[Hurd partition name]   /CD1     ext2    rw    1       1<br />
/dev/[GNU drive name]   /cdrom iso9660fs   ro,noauto  1    1</p>

<p>Hurd は ext2 ファイルシステムを使います。"/CD1" は <cdbasename>-CD1 からの
パッケージを含んだパーティションのマウントポイントとして提案されています。
スワップは Linux と共有できます。</p></li>

<li><em>スワップを有効にするためには "swapon -a" としてください。</em>
それが動作したか確認してください。スワップは Hurd では非常に推奨されます。</li>

<li><em>cdrom にアクセスするトランスレータを設定してください</em>。例えば
<p>
"settrans -a /cdrom /hurd/iso9660fs /dev/[Hurd drive name]" です。<br />
これは GNU 式のやり方ですが、"mount /cdrom" も動作するでしょう。</p></li>

<li><em>"/cdrom/upgrade/install.sh" を走らせてください。</em>.
<p>これは required、important、standard パッケージをインストールします。</p></li>

<li><em>"/cdrom/upgrade/gui.sh" を実行するのもよいかもしれません</em>。
<p>これは X Window System をインストールします。</p></li>

<li><em>更なるパッケージは "apt" か "dselect" を使うことでインストールされます。</em>
<p>もしあなたがこれらの Debian のツールに慣れ親しんでいないのなら、
"info apt" と "info dselect" を見てください。</p></li>

<li><em>cdrom をアンマウントしてください。</em>
<p>cdrom ドライブは <code>settrans -agf /cdrom</code> でアンマウントされます。<br />
cdrom ドライブのトレイのロックが解除されるはずです。</p></li>

</ol>

<p>ここでこのガイドはお終いです。探検を始めてください。Hurd を楽しんでください。</p>
<p>CD についてのコメントは歓迎します。
<br />
Philip Charles, philipc@debian.org</p>
