#use wml::debian::ddp title="Debian ドキュメンテーションプロジェクトの CVS"
#use wml::debian::toc
#use wml::debian::translation-check translation="1.23"

<p>The Debian Documentation Project では、
ウェブページや多くのマニュアル文書を
<b>cvs.debian.org</b> の Debian CVS サーバに置いています。

<p>どなたでも、CVS からソースをダウンロードできます。
ファイルを更新できるのは、
Debian Documentation Project のメンバーだけです。

<toc-display/>

<toc-add-entry name="access">CVS 中のソースにアクセスするには</toc-add-entry>

<p>ウェブ上で個々のファイルにアクセスしたり、
それらの変更状況を見たりしたい場合に使える viewCVS インターフェースには、
<url "http://cvs.debian.org/?cvsroot=debian-doc"> からアクセスできます。

<p>マニュアル全部をダウンロードしたい場合には、
CVS サーバに直接アクセスするほうが良いでしょう。
この場合にはマシンに <tt><a href="http://packages.debian.org/cvs">cvs</a></tt>
パッケージを入れておく必要があります。

<h3>匿名での (リードオンリーの) CVS サーバ への接続</h3>

<p>次のコマンドを入力して接続してください:

<p style="margin-left: 2em">
  <code>cvs -d :pserver:anonymous@cvs.debian.org:/cvs/debian-doc login</code>

<p>パスワードを聞かれたら、単に enter を押してください。

<p>これで、通常の CVS コマンド (CVS の info ページをご覧ください)
でファイルをチェックアウトできるようになります。
ただしファイルに変更を加えたり、コミットしたりすることはできません。

<p>最初ファイルをダウンロードするときには、
それらを保存するディレクトリを作成し、そこに移動してください。
このディレクトリには、
<strong>CVS</strong> および <strong>ddp</strong>
という 2 つのディレクトリが作成されることになります。

<p>ファイルを全部ダウンロードするには、次のコマンドを使います。

<p style="margin-left: 2em">
  <code>cvs -d :pserver:anonymous@cvs.debian.org:/cvs/debian-doc -z3 checkout ddp/manuals.sgml</code>
</p>

<p>このコマンドを実行すると、再帰的にディレクトリが生成され、
その中にファイルが保存されます。

<p>ローカルにコピーしたファイルを、
他の人の加えた変更に応じてアップデートするには、
<strong>ddp/manuals.sgml</strong>
ディレクトリに移動して次のコマンドを実行します。

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<p>CVS リモートセッションを終了したら、
以下のコマンドを実行してサーバとの接続を解除します。

<p style="margin-left: 2em">
  <code>cvs logout</code>
</p>

<h3>更新権限がある場合の CVS サーバへの接続</h3>

<p>ここに述べる方法で CVS サーバにアクセスするには、
書き込み権限を持ってアクセスする許可が先に必要になります。
まず更新権限の<a href="#obtaining">請求方法</a>をご覧ください。

<p>接続するには、次のコマンドを実行します。

<p style="margin-left: 2em">
  <code>cvs -d :pserver:<var>ユーザid</var>@cvs.debian.org:/cvs/debian-doc login</code>
</p>

<p>ついで文書コーディネータとの間で取り決めたパスワードを入力します。
上記のコマンドの <var>ユーザid</var> の部分は、
CVS パスワードサーバ上でのあなたのユーザ名に置きかえてください。
これは必ずしも
<b>cvs.debian.org</b>
でのログイン名 (を持っている場合) と同じとは限りません。

<p>これで、通常の CVS コマンド (CVS の info ページをご覧ください)
を使用してファイルのチェックアウトとコミットができるようになります。

<p>最初ファイルをダウンロードするときには、
それらを保存するディレクトリを作成し、そこに移動してください。
このディレクトリには、
<strong>CVS</strong> および <strong>ddp</strong>
という 2 つのディレクトリが作成されることになります。

<p>ファイルを全部ダウンロードするには、次のコマンドを使います。
<p>初めてファイルをダウンロードする場合には、
ダウンロードしたファイルをすべて入れておくためのディレクトリを作成し、
そこに移動してください。
このディレクトリの中には、
<strong>CVS</strong> および <strong>ddp</strong>
というディレクトリが作成されることになります。

<p>ファイルをすべてダウンロードするには、次のコマンドを使います。

<p style="margin-left: 2em">
  <code>cvs -d :pserver:userid@cvs.debian.org:/cvs/debian-doc -z3 checkout ddp/manuals.sgml</code>
</p>
<p>このコマンドを実行すると、再帰的にディレクトリが生成され、
その中にファイルが保存されます。

<p>ローカルにコピーしたファイルを、
他の人の加えた変更に応じてアップデートするには、
<strong>ddp/manuals.sgml</strong>
ディレクトリに移動して次のコマンドを実行します。

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<p>CVS リモートセッションを終了したら、
以下のコマンドを実行してサーバとの接続を解除します。

<p style="margin-left: 2em">
  <code>cvs logout</code>
</p>

<h3>更新権限がある場合の CVS サーバへの接続 (ssh を使う)</h3>

<p>この方法は、登録された Debian 開発者のみ使用可能で、
上記の pserver を使用した方法より好ましいです。
最近になって Debian 開発者になられた方は、
文書コーディネータに pserver アカウントを消去してもらうよう依頼して下さい。

<p>ssh を用いて接続するには、
まず ssh を使うことを次のコマンドによって CVS に伝えます。

<p style="margin-left: 2em">
  <code>export CVS_RSH=ssh</code>
</p>

<p>そうしたら、
すべてのファイルを保存するディレクトリを作り、
そこに移動し、次のコマンドを入力してください。

<p style="margin-left: 2em">
  <code>cvs -d :ext:<var>ユーザid</var>@cvs.debian.org:/cvs/debian-doc -z3 checkout <var>モジュール</var></code>
</p>

<p>上のコマンドの <var>ユーザid</var> の部分は、
CVS サーバでのあなたのユーザ名で置き換えてください。
これは、すべての Debian マシンにおけるあなたの
ログイン名と同一になります。
<var>モジュール</var> の部分は、
チェックアウトしたいモジュール名で置き換えてください。
通常は <tt>ddp/manuals.sgml</tt> になります。
ここで CVS サーバのパスワードをきかれます。
これはあなたのマシン上でのパスワードとは別物ですので、
お間違えにならないでください。

<p>このディレクトリには
<strong>CVS</strong> および <strong>ddp</strong>
というふたつのディレクトリができます。
リクエストしたモジュール (つまりディレクトリ) が
CVS によって再帰的に生成され、そこにファイルが置かれます。

<p>これで、通常の CVS コマンド (CVS の info ページをご覧ください)
を使用してファイルのチェックアウトとコミットができるようになります。

<p>ローカルにコピーしたファイルを、
他の人の加えた変更に応じてアップデートするには、
<strong>ddp/manuals.sgml</strong>
ディレクトリに移動して次のコマンドを実行します。

<p style="margin-left: 2em">
  <code>cvs -z3 update -d -P</code>
</p>

<toc-add-entry name="obtaining">更新権限を得るには</toc-add-entry>

<p>更新権限は、
マニュアルの執筆に参加を希望される方ならどなたでも入手できます。
通常は、まず有効なパッチをいくつか出していることが要求されます。

<p>アップデート権限を入手するには、<a
href="mailto:debian-doc@lists.debian.org">Debian
ドキュメンテーションメーリングリスト</a>にリクエストを出して、
なぜそれが必要なのかを説明してください。アクセスが許可されるためには、
事前に文書コーディネータもしくは Debian
ドキュメンテーションチームのメンバーからの賛同を得ている必要があります。
賛同が得られたら、<a href="mailto:debian-admin@lists.debian.org">debian-admin</a>
に対して (署名した) リクエストを送るよう、賛同者に依頼してください。

<p>Debian 開発者の場合は、リクエストが受理されれば <tt>cvs.debian.org</tt>
の <tt>cvs_doc</tt> グループに追加され、それ以降、CVS の更新が可能になります。

<p>Debian 開発者ではない場合は、リクエストが受理された後に、
ログイン名とパスワードを提出する必要があります。ログイン名は、既存の Debian
アカウントとは異なったものでなければいけません (<a
href="http://db.debian.org">db.debian.org</a> で確かめてください)。
cvs ではネットワーク上でパスワードが暗号化されずに送信されるとはいえ、
暗号化していないパスワードをメールで送ってはいけません。

<p><tt>makepasswd</tt> を使えば、簡単にパスワードを生成できます。
<tt>makepasswd</tt> パッケージをインストールして、以下のように実行するだけです。

<pre>
$ echo "SECRET" |makepasswd --clearfrom=- --crypt
</pre>

<p>パスワードを暗号化する別の簡単な方法は、Perl のワンライナーを使うことです。
Perl は Debian GNU/Linux マシンにすでに入ってるでしょうから。

<pre>
$ perl -e "printf \"%s\n\", crypt ("SECRET", join ('', ('.', '/', 0..9, 'A'.. 'Z', 'a'..'z')[rand (64), rand (64)]))"
</pre>

<p>生成した結果を、希望するアカウントとともに <a
href="mailto:joey@debian.org">Martin Schulze</a> さんに送ってください。
その際、メール全体を<a
href="http://db.debian.org/fetchkey.cgi?fingerprint=B53FE57BD0C1F689FCE25">\
彼の GnuPG 鍵</a>で暗号化してください。

<p>詳しい情報は、彼が書いた手順に関する<a
href="http://people.debian.org/~joey/misc/webwml.html">注意書き</a>を読んでください。

<hr>

<toc-add-entry name="organization">ファイル群の構成</toc-add-entry>

<p>CVS ディレクトリの階層構造は、この図のようになっています。

<p><img src="dirtree.jpg" align="middle" alt="DDP CVS directory tree">

<p>DDP ウェブサイトは Debian CVS リポジトリの
webwml モジュールに組み込まれています。
これは他の Debian ウェブページと統合するためです。

<hr>

<toc-add-entry name="updates">自動更新の仕組み</toc-add-entry>

<p>公開されたマニュアル文書のウェブページは、
www-master.debian.org で動いている cron ジョブによって、
15:39 (米国太平洋標準時; 日本から17時間遅れ、
サマータイム時には日本から16時間遅れ) 以降の時間に生成されます。

<p>このスクリプトは、まず <kbd>cvs update -d -P</kbd> を、
ついで <kbd>make -C manuals.sgml clean publish</kbd> を、
両方とも <code>ddp</code> ディレクトリで実行します。

<p>makefile は、すべてのサブディレクトリ
(メンテナンスされている文書が入っています) をリビルドし、
すべてのサブディレクトリからファイルを
<code>doc/manuals/</code> のウェブサイト用サブディレクトリに
インストールするよう設定されています。
各サブディレクトリの makefile は
<code>ddp/manuals.sgml/standard.makefile</code>から呼ばれます。

<p>更新スクリプトによって生成されたドキュメントファイルは、
<a href="manuals/">http://www.debian.org/doc/manuals/</a>
で見ることができます。</p>

<p>更新スクリプトによって生成されたログファイルは、
<url "http://www-master.debian.org/build-logs/ddp/">
で見ることができます。

# <!-- Created: Mon Jul  6 19:58:09 BST 1998 -->


