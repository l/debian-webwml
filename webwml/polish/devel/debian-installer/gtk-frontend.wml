#use wml::debian::template title="Nak³adka GTK dla instalatora" NOHEADER="true"
#use wml::debian::translation-check translation="1.9"

<h1>Strona stanu nak³adki gtk dla instalatora</h1>


<h3>Wiadomo¶ci</h3>

<p><b>19.06.2003</b>: Aktualizacja od d³u¿szego czasu. Niestety niewiele
siê dzia³o przez ostatnie dwa miesi±ce. Przynajmniej pliki udeb zosta³y
przes³ane i wygl±da na to, ¿e dzia³aj±. Dziêkujê wszystkim bior±cym w tym
udzia³ deweloperom. Vikram Singh napisa³ <a
href="http://www.mmweg.rwth-aachen.de/~sebastian.ley/d-i/partitioner/partition.png">\
graficzne narzêdzie do partycjonowania</a>, które mo¿e byæ u¿yteczne je¶li
znajdziemy sposób na integracjê tych kontrolek w cdebconfie.</p>

<p><b>28.03.2003</b>: Nowa wersja libgtk-directfb. Ju¿ nie powoduje
konfliktu z libgtk, wiêc powinna byæ gotowa i wymaga testów. Pierwsze udane
zbudowanie cdebconfa i nak³adki gtk.</p>

<p><b>25.03.2003</b>: Wiele zosta³o zrobione w kwestii nak³adki. Jest teraz
mo¿liwo¶æ wy¶wietlania wielu pytañ na raz, jest obs³uga archiwizacji
i mo¿na wy¶wietlaæ paski postêpu. 
<a href="http://www.mmweg.rwth-aachen.de/~sebastian.ley/d-i/screenshots/">
Zobacz zrzuty ekranu</a>.</p>

<p><b>17.03.2003</b>: Temat pthread zosta³ rozwi±zany now± wersj± libc,
która teraz zawiera bibliotekê.</p>

<p><b>12.03.2003</b>: Dodano dzia³aj±c± wersjê gtk+-directfb, która bazuje
na pracy Alastaira McKinstry'ego. Dodano równie¿ now± wersjê libdirectfb.
Wprowadza trochê pomys³ów Thomasa Viehmanna i zawiera ³atkê, która poprawia
naruszenie ochrony pamiêcie kiedy libdirectfb jest wywo³ywana przez
nak³adkê gtk. Komentarze mile widziane.</p>

<p><b>11.03.2003</b>: Robimy postêpy: Pierwszy 
<a href="http://www.mmweg.rwth-aachen.de/~sebastian.ley/d-i/screenshots/gtk-frontend.old.png">\
zrzut ekranu</a></p>

<p><b>07.03.2003</b>: Nowa wersja libfontconfig w pliku udeb. £atka
przes³ana do BTS.</p>

<p><b>07.03.2003</b>: Ma³e zmiany w libdirectfb. Opiekun otrzyma³
³atki.</p>

<p><b>07.03.2003</b>: Akira Tagoh przes³a³ atk, glib i pango. Równie¿
freetype zosta³a przes³ana.</p>

<p><b>06.03.2003</b>: Zmienione zasady dla pakietów udeb-dev: Biblioteki
powinny byæ instalowane w /usr/lib/udeblib zamiast w podkatalogu zale¿nym
od nazwy biblioteki.</p>

<p><b>05.03.2003</b>: Stworzono pliki udeb dla libexpat i libfontconfig.</p>

<p><b>04.03.2003</b>: Pango teraz u¿ywa libfontconfig jako elementu
przetwarzaj±cego dla freetype. Wiêc teraz trzeba to spakietowaæ, a poniewa¿
to korzysta z libexpat to mamy kolejnego kandydata... Szukamy
wolontariuszy.</p>

<p><b>04.03.2003</b> Dodana czê¶æ o wymuszaniu przestrzeni.</p>

<p><b>04.03.2003</b>: Zaktualizowane pliki udeb dla zlib i libpng, ³atki
przes³ane do bts.</p>

<p><b>03.03.2003</b>: Dodano odsy³acz do plików udeb Akiras pango.</p>

<p><b>03.03.2003</b>: Zaktualizowane zalecenia dotycz±ce pakietowania udeb
bibliotek, znajdziesz je na koñcu tej strony. Zalecenia zosta³y przes³ane
na debian-boot do przegl±dniêcia, wszelkie komentarze mile widziane.</p>

<p><b>03.03.2003</b>: Wype³niono zg³oszenie o tym, ¿e pthreads jest
potrzebne przeciwko libc-udeb (#188155). Opiekunowie glib nie byli zbyt
szczê¶liwi, musimy zrobiæ ma³e ¶ledztwo czy obs³uga thread jest
rzeczywi¶cie konieczna.</p>

<p><b>02.03.2003</b>: Pocz±tek dokumentacji na temat tego co jest potrzebne
przy tworzeniu pakietów udeb bibliotek. Wkrótce prze¶lê to na debian-boot
do przegl±dniêcia.</p>

<h3>Ogólny przegl±d</h3>

<p>Instalator Debiana jest aktualnie przepisywany by byæ bardziej
modularnym i elastycznym w stosunku do boot-floppies. Ogólne informacje
mo¿esz uzyskaæ na <a href="index">stronie instalatora</a>. 
Ta strona jest po¶wiêcona nak³adce gtk nowego instalatora. Je¶li chcia³by¶
pomóc to jest to dobre miejsce na pocz±tek. Przeczytaj równie¿ dokumentacjê
z repozytorium subversion debian-installera.</p>

<p> Je¶li masz co¶ do dodania albo chcesz przes³aæ poprawki wy¶lij je do
mnie: <email "sebastian.ley@mmweg.rwth-aachen.de">.</p>

<h3>Co musi zostaæ zrobione</h3>

<ul>
  <li> Nak³adka na cdebconf, napisana z wykorzystaniem gtk. Michael Cardenas
  rozpocz±³ nad tym prace, s± dostêpne w repozytorium subversion 
  debian-installera.</li>
  <li> Modu³y instalatora (udebs), które zawieraj± bibliotekê gtk
  musz± dzia³aæ bezpo¶rednio na framebufferze, inne pakiety zale¿±ce od gtk
  równie¿.Zobacz poni¿ej stan poszczególnych pakietów.</li>
  <li> J±dro instalatora musi obs³ugiwaæ framebuffer (bufor ramki).</li>
  <li> Musi zostaæ stworzona koncepcja integracji nak³adki gtk. Zobacz
  poni¿ej.</li>
  <li> Szczegó³owa instrukcja jak testowaæ nak³adkê gtk.</li>
  <li> Znalezienie sposobu na integracjê bardziej specjalistycznych
  kontrolek w aktualnym wygl±dzie.</li>
  <li> Co¶ jeszcze?</li>
</ul>


<h3>Jak pomóc</h3> 

<p>Je¶li chcesz pomóc z nak³adk± gtk przeczytaj najpierw dokumentacjê
znajduj±c± siê w repozytorium subversion instalatora. Przygl±dnij siê plikom 
udeb wymienionym poni¿ej i potestuj je. Wiêkszo¶æ z nich nie ca³kiem spe³nia
specyfikacje, znajd¼ wiêc b³êdy i przygotuj ³atki. Pakietowanie bibliotek
do plików udeb przysparza trochê problemów. Kilka wskazówek znajdziesz na
koñcu tego dokumentu. Je¶li znajdziesz w nim jakie¶ b³êdy prze¶lij mi o tym
informacjê. Dyskusje odbywaj± siê na li¶cie dyskusyjnej debian-boot.</p>

<h3>Rozmiar ma znaczenie</h3>

<p>Nie ma mo¿liwo¶ci zmie¶ciæ wszelkich potrzebnych dla graficznego
instalatora plików na dyskietce o pojemno¶ci 1,44 MB. Jest to równie¿
niemo¿liwe na dyskietce 2,88 MB, która jest górnym ograniczeniem standardu
uruchamiania z CD ElTorito.</p>

<p>W konsekwencji pliki udeb musz± byæ za³adowane do ramdysku z sieci lub
z repozytorium CD. Rozmiar ramdysk jest oczywi¶cie ograniczony i by³oby
wspaniale gdyby graficzny instalator dzia³a³ równie¿ z ma³ym ramdyskiem.
Tak wiêc g³ównym priorytetem jest utrzymywanie rzeczy jak najmniejszych.
Wyrzucaj niepotrzebne ¶mieci, zale¿no¶ci gdzie tylko to mo¿liwe.</p>

<h3>Stan plików udeb</h3>

<p>Kolory stanów maj± nastêuj±ce znaczenie:</p>

<ul>
<li><b>czerwony:</b> Pakiet wymaga pracy zanim bêdzie dzia³a³
z instalatorem, albo w ogóle dzia³a³</li>
<li><b>yellow:</b> Pakiet powinien byæ gotowy. Potrzebuje testów
i przes³ania do archiwum.</li>
<li><b>zielony:</b> Pakiet jest przetestowany i dzia³a tak jak oczekiwano.
Mo¿liwe jednak, ¿e potrzebuje kosmetycznych zmian, ale osi±gn±³ ju¿
funkcjonalno¶æ.</li>
</ul>

<table border="1">

<tr><th>Pakiet</th><th>Wstêpny pakiet</th><th>Kto nad tym pracuje?</th><th>
Przes³any?</th><th>Do zrobienia, komentarze</th></tr>

<tr bgcolor="ffff99">
<td>gtk+-directfb</td>
<td>http://www.mmweg.rwth-aachen.de/~sebastian.ley/d-i/udebs</td>
<td><a href="mailto:mbc@debian.org">Michael Cardenas</a>,<br><a
href="mailto:sebastian.ley@mmweg.rwth-aachen.de">Sebastian Ley</a></td>
<td>tak</td>
<td>udeb powinien byæ gotowy, wymaga testów</td>
</tr>

<tr bgcolor="ffff99">
<td>libdirectfb</td>
<td>http://www.mmweg.rwth-aachen.de/~sebastian.ley/d-i/udebs</td>
<td><a href="mailto:sebastian.ley@mmweg.rwth-aachen.de">Sebastian
Ley</a></td>
<td>no</td>
<td>udeb powinien byæ gotowy, wymaga testów</td>
</tr>

<tr bgcolor="ffff99">
<td>libpango</td>
<td>brak</td>
<td><a href="mailto:tagoh@debian.org">Akira Tagoh</a></td>
<td>tak</td>
<td>udeb powinien byæ gotowy, wymaga testów</td>
</tr>

<tr bgcolor="ffff99">
<td>glib</td>
<td>brak</td>
<td><a href="mailto:tagoh@debian.org">Akira Tagoh</a></td>
<td>tak</td>
<td>powinien byæ gotowy, wymaga testów</td>
</tr>

<tr bgcolor="ffff99">
<td>libatk</td>
<td>brak</td>
<td><a href="mailto:tagoh@debian.org">Akira Tagoh</a></td>
<td>tak</td>
<td>powinien byæ gotowy, wymaga testów</td>
</tr>

<tr bgcolor="ffff99">
<td>zlib</td>
<td>brak</td>
<td>brak</td>
<td>tak</td>
<td>udeb powinien byæ gotowy, wymaga testów</td>
</tr>

<tr bgcolor="ffff99">
<td>libpng</td>
<td>http://www.mmweg.rwth-aachen.de/~sebastian.ley/d-i/udebs</td>
<td><a href="mailto:sebastian.ley@mmweg.rwth-aachen.de">Sebastian
Ley</a></td>
<td>tak</td>
<td>udeb powinien byæ gotowy, wymaga testów</td>
</tr>

<tr bgcolor="ffff99">
<td>libc</td>
<td>brak</td>
<td>brak</td>
<td>tak</td>
<td>udeb powinien byæ gotowy, wymaga testów</td>
</tr>

<tr bgcolor="ffff99">
<td>libfreetype</td>
<td>brak</td>
<td>brak</td>
<td>tak</td>
<td>udeb powinien byæ gotowy, wymaga testów</td></tr>

<tr bgcolor="ffff99">
<td>ttf-freefont</td>
<td>brak</td>
<td>brak</td>
<td>tak</td>
<td>Musi byæ mneijszy. Niektóre czcionki trzeba odrzuciæ.</td></tr>

<tr bgcolor="ffff99">
<td>libfontconfig</td>
<td>http://www.mmweg.rwth-aachen.de/~sebastian.ley/d-i/udebs</td>
<td><a href="mailto:sebastian.ley@mmweg.rwth-aachen.de">Sebastian
Ley</a></td>
<td>tak</td>
<td>udeb powinien byæ gotowy, wymaga testów</td>
</tr>

<tr bgcolor="ffff99">
<td>libexpat</td>
<td>brak</td>
<td>brak</td>
<td>tak</td>
<td>udeb powinien byæ gotowy, wymaga testów</td></tr>

</table>


<h3>Integracja z nak³adk± gtk</h3>

<p>Poniewa¿ wszystkie biblioteki potrzebne przez nak³adkê gtk nigdy nie
zmieszcz± siê na dysku, potrzebujemy rozwi±zania definiuj±cego jak nak³adka
bêdzie u¿ywana. Do tej pory s± dwa pomys³y:</p>

<ul>
<li>Dla instalacji z CD wykrywanie cdromu bez interwencji u¿ytkownika,
ustawienie anna i ¶ci±gniêcie wymaganych bibliotek automatycznie. Wtedy
przej¶cie na nak³adkê gtk.</li>
<li>Rozpoczêcie instalacji w trybie tekstowym lub z nak³adk± slang 
(albo cokolwiek) i pozwolenie u¿ytkownikowi na skonfigurowanie medium.
Nastêpnie pokazaæ opcjê zmiany na nak³adkê gtk.</li>
</ul>

<p>To s± na razie pomys³y, ¿adne prace w tym kierunku nie zosta³y jeszcze
wykonane.</p>

<h3>Pakietowanie bibliotek do plików udeb</h3>

<em>To tylko propozycje bazuj±ce na moich do¶wiadczeniach. Wszelkie
komentarze nale¿y kierowaæ do mnie lub na listê dyskusyjn±
debian-boot.</em>

<p>Na pocz±tku przeczytaj ogólne instrukcje na temat budowania plików udeb.
Mo¿esz je znale¼æ w repozytorium subversion instalatora. Nastêpuj±ce tematy s±
specyficzne dla bibliotek:</p>

<p>Przygotowuj±c pakiet biblioteki nale¿y zachowaæ dodatkow± ostro¿no¶æ.
Ten dokument opisuje podstawowe informacje w tej materii.</p>

<p>Zanim to przeczytasz, dobrym pomys³em jest przeczytanie wszystkich
innych dokumentów projektu instalatora. 
<a href="http://www.netfort.gr.jp/~dancer/column/libpkg-guide/libpkg-guide.html">Przewodnik o pakietowaniu bibliotek</a> od Junichi Uekawa 
opisuje ogólne praktyki pakietowania bibliotek. Tak wiêc dobrze równie¿ to
przeczytaæ.</p>


<h4>Nazewnictwo</h4>

<p>Modu³y bibliotek powinny byæ nazywane jak ich odpowiedniki deb
z dodatkiem "-udeb" na koñcu. Na przyk³ad libc6 bêdzie mia³o odpowiednika
libc6-udeb, a libglib2.0-0 stanie siê libglib2.0-0-udeb. Wa¿ne by zawieraæ
numer sonazwy (soname) w nazwie modu³u, poniewa¿ zmiana ABI biblioteki
zepsuje wszystkie modu³y zale¿±ce od niej i ca³± instalacjê sieciow± zanim
zale¿ne modu³y zostan± przebudowane.</p>

<h4>Zale¿no¶ci</h4>

<p>Normalnym sposobem odnajdywania zale¿no¶ci pakietu Debiana jest system
shlibs. Ka¿da zainstalowana biblioteka dostarcza plik shlibs, który
stwierdza jakie pakiety dostarcza dana biblioteka. To nie dzia³a przy
znajdywaniu zale¿no¶ci dla modu³ów instalatora, poniewa¿ pliki shlibs
wskazuj± na pakiety deb dostarczaj±ce szukanej biblioteki, a nie na modu³y
instalatora.</p>

<p>Jednak¿e by móc korzystaæ z dh_shlibdeps ka¿dy modu³ biblioteki powinien
zawieraæ liniê "Provides" z odpowiednim wpisem dotycz±cym normalnego
pakietu Debiana danej biblioteki. Np. libc6-udeb powinno wskazywaæ na
libc6.</p>


<h4>Zawarto¶æ</h4>

<p>Modu³ musi zawieraæ sam± bibliotekê oraz dowi±zanie symboliczne nazwane
tak jak SONAZWA biblioteki wskazuj±ce na bibliotekê. Rozwojowe dowi±zania
takie jak pliki .a libtools s± niepotrzebne. Je¶li biblioteka zawiera
modu³y lub dane (przechowywane w /usr/share) dobrym pomys³em jest
sprawdzenie czy wszystkie s± potrzebne, a je¶li nie to czy mog± byæ w jaki¶
sposób usuniête.</p> 

<h4>Zmiana opcji kompilacji</h4>

<p>Czasem mo¿e wyst±piæ potrzeba zmiany opcji kompilacyjnych danego modu³u,
a wiêc zepsuæ binarn± zgodno¶æ. Nie wszystkie opcje kompilacyjne zmieniaj±
ABI, np. u¿ywanie ró¿nych flag -O jest nieszkodliwe.</p>

<p>Zmiana ABI by³a konieczna na przyk³ad w przypadku libdirectfb, poniewa¿
biblioteka w pakiecie deb by³a skompilowana z obs³ug± SDL i X, co
niepotrzebnie obci±¿a³o by instalator.</p>

<p>Je¶li binarna zgodno¶æ zostaje zepsuta, sonazwa biblioteki musi zostaæ
zmieniona by odzwierciedliæ tê sytuacjê. Zalecane jest by umie¶ciæ wpis
"udeb" w sonazwie. Zmiana sonazwy mo¿e byæ prosta je¶li biblioteka jest
budowana przez libtool i u¿ywa autoconfa. Zobacz do podrêczników
<a href="http://www.gnu.org/software/libtool/manual.html">libtool</a>
i <a href="http://www.gnu.org/software/autoconf/manual/autoconf-2.57/autoconf.html">autoconf</a>.</p>

<p>Zbudowanie pakietu nowej biblioteki dla instalatora nie jest
wystarczaj±ce. Je¶li inny modu³ zawiera programy, które odnosz± siê do tej
biblioteki, sama biblioteka musi znajdowaæ siê w systemie budowania.</p>

<p>Poniewa¿ modu³y nie powinny byæ instalowane na normalnych systemach,
potrzeba stworzyæ pakiet deb zawieraj±cy tê bibliotekê jak i potrzebne
dowi±zania rozwojowe. Pakiet powinien byæ nazwany libfoo-udeb-dev i 
powinien byæ zale¿ny od libfoo-dev. Jedyne pliki jakie powinny znale¼æ siê
w libfoo-udeb-dev to biblioteka ze zmienionym ABI i potrzebne dowi±zania.
Poniewa¿ rozwojowe dowi±zania s± takie same jak te w libfoo-dev, 
sama biblioteka i dowi±zania powinny byæ zainstalowane w katalogu 
<code>/usr/lib/udeblib</code>.</p>

<p>Teraz ¿eby program instalatora by³ po³±czony z bibliotek± ze zmienionym
ABI, podczas ³±czenia nale¿y dodaæ opcjê <kbd>"-L/usr/lib/udeblib"</kbd>,
by przekazaæ, gdzie powinno siê szukaæ dowi±zañ dla libfoo. Ta procedura
powinna zostaæ opisana w pliku README.Debian pakietu libfoo-udeb-dev.</p>

<p>By wszystko zosta³o obs³u¿one przez system shlibs odpowiednio nale¿y
dokonaæ jeszcze ma³ych poprawek. ¯eby otrzymaæ odpowiednie zale¿no¶ci dla
modu³ów instalatora zale¿nych od libfoo-udeb, trzeba stworzyæ pakiet 
libfoo-udeb-dev z plikiem shlibs który wskazuje na pakiet libfoo-udeb 
Przyk³adowo plik shlibs pakietu libdirecfb-udeb-dev zawiera:</p>

<p align="center">
        libdirectfb-0.9-udeb 16 libdirectfb-0.9-16-udeb
</p>

<p>Pozostaje jeszcze jeden problem. Je¶li istnieje modu³ instalatora 
libbar-udeb zale¿ny od libfoo-udeb, który sam jest zale¿ny od
libbar-udeb-dev z powodu nizgodno¶ci binarnych, libbar-udeb-dev bêdzie
zale¿ny od libfoo-udeb, który jest modu³em instalatora i nie mo¿e byæ
zainstalowany w systemie budowanym. By rozwi±zaæ ten problem ka¿dy pakiet
udeb-dev powinien dostarczaæ odpowiedni pakiet udeb, np. 
libdirectfb-udeb-dev powinien zawieraæ liniê</p>

<p align="center">
               Provides: libdirectfb-0.9-16-udeb
</p>

