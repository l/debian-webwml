#use wml::debian::cdimage title="Сваляне на Debian CD image файлове с jigdo" BARETITLE=true
#use wml::debian::toc
#use wml::debian::translation-check translation="1.51"

<p>Jigsaw Download, или за кратко <a href="http://atterer.net/jigdo/">jigdo</a>,
вероятно ще стане основният инструмент и метод за дистрибутиране на Debian CD image файлове в бъдеще. 
В момента системата е напълно работоспособна, но все още не е съвсем удобна за работа, защото
приложението за изтегляне на файлове (download) не е завършено.</p>

<toc-display/>

<hr>

<toc-add-entry name="why">Защо jigdo е по-добър метод от директното изтегляне?</toc-add-entry>

<p>Защото е по-бърз! Поради различни причини има съвсем малко огледала (mirrors), които поддържат CD image файлове,
за разлика от тези, които предлагат "нормалния" Debian архив. Освен това, ако 
изтегляте от CD image огледало, сървърът може  да не е най-близкия до вас
или да е претоварен, особено в случаите, когато току-що е излязла нова версия на дистрибуцията.</p>

<p>Разбира се,  никой "нормален" Debian огледален сървър не предлага CD image файлове, в такъв случай как 
jigdo изтегля нужните му файлове? jigdo просто изтегля всички файлове от CD диска, само че един по един. 
След това всички тези файлове се събират в един голям, който всъщност 
е точно копие на CD image файла. Всичко това обаче се случва зад сцената - това, което се иска от <em>Вас</em>,  
е да укажете на програмата за изтегляне на файловете, от кой адрес да 
се изтегли системния "<tt>.jigdo</tt>" файл, от който да се започне процеса.</p>

<p>Повече информация за този инструмент може да научите от 
<a href="http://atterer.net/jigdo/">web страницата на jigdo</a>. 
Хора, които имат желание да помогнат с разработката на jigdo, са винаги добре дошли!</p>

<toc-add-entry name="how">Как да изтеглите image файл с jigdo?</toc-add-entry>

<ul>

  <li>Изтеглете пакета, съдържащ <tt>jigdo-lite</tt> програмата, която има версии за
  GNU/Linux, Windows и Solaris от 
<a href="http://atterer.net/jigdo/#download">web страницата на jigdo</a>.
  <br><strong>За Debian потребителите - моля обновете (upgrade) пакета, поне до версия 
  0.6.8</strong> - версията в Debian 3.0 няма възможност да изтегля най-новите image файлове!</li>

  <li>Стартирайте <tt>jigdo-lite</tt> скрипта. Той ще Ви поиска URL към 
системен "<tt>.jigdo</tt>" файл, за да продължи. (Можете да укажете това URL и от команден ред, ако желаете.)</li>

  <li>Изберете някой от указаните адреси, описани <a href="#which">по-долу</a>,  от който 
  искате да изтеглите "<tt>.jigdo</tt>" файла и въведете неговия URL адрес в
  <tt>jigdo-lite</tt> командния ред. Всеки "<tt>.jigdo</tt>" файл 
  отговаря на един "<tt>.iso</tt>" CD/DVD image файл.</li>

  <li>Ако сте начинаещ потребител, просто натистнете Enter на въпроса "Files to
  scan" (Файлове, които ще бъдат сканирани).</li>

  <li>На въпроса "Debian mirror" (Debian огледало), въведете
  <kbd>http://ftp.<strong><var>XY</var></strong>.debian.org/debian/</kbd>, където
  <strong><var>XY</var></strong> е двубуквен код на вашата страна
  (например, <tt>bg</tt>, <tt>us</tt>, <tt>de</tt>, <tt>uk</tt>. Вижте текущия списък на 
  <a href="$(HOME)/mirror/list">достъпните 
  ftp.<var>XY</var>.debian.org адреси</a>.)

  <li>На въпроса "Debian non-US mirror" (ако такъв Ви бъде зададен), въведете 
  <kbd>http://ftp.<strong><var>XX</var></strong>.debian.org/debian-non-US/</kbd> и 
  отново заместете <strong><var>XX</var></strong> с правилния код на държавата Ви. 
  <li>Следвайте инструкциите, изведени от скрипта. Ако всичко върви добре, скриптът 
  ще завърши с калкулиране на сумата за проверка по четност (checksum) на генерирания image файл и ще 
  изведе резултат на това дали тази сума съвпада със сумата на оригиналния image файл.</li>

</ul>

<p>За по-детайлно - стъпка-по-стъпка описание на процеса, прочетете 
<a href="http://www.tldp.org/HOWTO/mini/Debian-Jigdo/">Debian jigdo
mini-HOWTO</a>. Документът HOWTO (Как да направя...) разяснява също и разширените функции 
на jigdo за напреднали потебители, като обновяване на остаряла версия на CD image файла до най-новата 
(чрез изтегляне само на промените, а не целия image файл наново).</p>

<p>След като сте изтеглили image файлове и сте ги записали на CD диск е хубаво да погледнете и документа с 
 <a href="$(HOME)/releases/stable/installmanual">детайлна информация за инсталационния процес.</a>.</p>

<toc-add-entry name="which">Налични image файлове в момента:</toc-add-entry>

<ul>

  <li>Официалните jigdo файлове за "stable" версията на CD са:
  <a href="http://us.cdimage.debian.org/jigdo-area/current-cd/jigdo/">\
  огледалния сървър в САЩ</a>,
  <a href="http://non-us.cdimage.debian.org/jigdo-area/current-cd/jigdo/">\
  огледалото за Европа</a><br>
  Това включва всички CD image файлове, както и от rev0 до rev5 обновяващи (update) CD дискове.
</li>


<li>Официалните jigdo файлове за "stable" версията на DVD са:
  <a href="http://us.cdimage.debian.org/jigdo-area/current-dvd/jigdo/">\
  огледалния сървър в САЩ</a> и 
<a href="http://non-us.cdimage.debian.org/jigdo-area/current-dvd/jigdo/">\
  огледалото за Европа</a>
  </li>

</ul>

<ul>
  <li>Официални jigdo файлове за <a href="http://cdimage.debian.org/pub/cdimage-testing/cd/jigdo-area/">"testing"
  дистрибуцията</a> на CD
  (<em>всички архитектури се регенерират ежеседмично</em>)
  </li>
   
  <li>Официални jigdo файлове за <a href="http://cdimage.debian.org/pub/cdimage-testing/dvd/jigdo-area/">"testing"
	  дистрибуцията</a> на DVD
  (<em>всички архитектури се регенерират ежеседмично</em>)
  </li>
</ul>

<hr>

<toc-add-entry name="faq">Често задавани въпроси</toc-add-entry>

<p><strong>Как да разрешим опцията за работа на jigdo през proxy сървър?</strong></p>

<p>Отворете файла<tt>~/.jigdo-lite</tt> (или
<tt>jigdo-lite-settings.txt</tt> за версията под Windows) в текстов редактор 
и намерете реда, който започва с "wgetOpts". Ключовете, които могат 
да бъдат зададени в този ред са:</p>

<p><tt>-e ftp_proxy=http://<i>ИМЕ-НА-ЛОКАЛНИЯ-PROXY-СЪРВЪР</i>:<i>ПОРТ</i>/</tt>
<br><tt>-e http_proxy=http://<i>ИМЕ-НА-ЛОКАЛНИЯ-PROXY-СЪРВЪР</i>:<i>ПОРТ</i>/</tt>
<br><tt>--proxy-user=<i>ПОТРЕБИТЕЛСКО-ИМЕ</i></tt>
<br><tt>--proxy-passwd=<i>ПАРОЛА</i></tt></p>

<p>Естествено, заменете стойностите по-горе с тези, които отговарят на Вашия proxy сървър. 
Последните две опции са необходими само ако proxy сървъра Ви използва оторизация с парола. 
Ключовете, които задавате, трябва да бъдат добавени в края на 
wgetOpts реда <em>преди</em> последния <tt>'</tt> символ. Всички ключове  
трябва да бъдат описани на един ред.</p>

<p>Друг вариант под Linux е да зададете 
<tt>ftp_proxy</tt> и <tt>http_proxy</tt> променливите на средата (environment), 
например във файла <tt>/etc/environment</tt> или 
<tt>~/.bashrc</tt>.</p>

<p><strong>Арргхх! Скриптът прекъсна по средата на работа и издаде съобщение за грешка - трябва ли да изтегля 
всички тези мегабайти отново?!</strong></p>

<p>Естествено, това не би трябвало да се случва (tm), но поради различни причини процеса 
може да завърши инцидентно, оставяйки голям "<tt>.iso.tmp</tt>" файл и 
<tt>jigdo-lite</tt> не успява да го отвори коректно, казвайки Ви постоянно, да опитате да 
рестартирате тегленето. Има няколко възможни трика, които можете да опитате в подобен случай:</p>

<ul>

  <li>Просто рестрартирайте тегленето, натискайки Enter. Може би някои от 
  файловете не са могли да бъдат изтеглени, поради изтичане на времето за опити (timeout) или други 
  подобни грешки - при повторен опит приложението може да успее да изтегли липсващите файлове.</li>

  <li>Пробвайте друг огледален (mirror) сървър. Някои Debian огледала понякога не са 
  синхронизирани напълно - може би друго огледало все още съдържа файловете, които са вече изтрити 
от този, които сте указали предния път или пък файловете са обновени в новия сървър, но 
все още ги няма на вашия сървър.</li>

  <li>Изтеглете липсващите части от image файла, използвайки <tt><a
  href="http://rsync.samba.org/">rsync</a></tt>. Първо трябва да намерите 
  коректния rsync URL адрес, отговарящ на image файла, който сте изтеглили:
  Изберете сървър, който предлага rsync достъп до <a
  href="../mirroring/rsync-mirrors">stable</a> или <a
  href="../http-ftp/#testing">testing</a> image файловете, след задайте 
  коректен път (path) и файлово име (filename). Списък с наличните директории може да бъде получен с команда като 
  <tt>rsync&nbsp;rsync://cdimage.debian.org/debian-cd/</tt>

  <br>След това премахнете "<tt>.tmp</tt>" разширението от временния файл на 
  <tt>jigdo-lite</tt>, като го преименувате, и подайте като параметър на rsync 
  URL адреса на сървъра и локалното име на файла:
  <tt>rsync&nbsp;rsync://server.org/path/binary-i386-1.iso
  binary-i386-1.iso</tt>

  <br>Бихте могли да използвате <tt>--verbose (разширен)</tt> ключа на rsync, както и 
  <tt>--progress (прогрес)</tt>, за да получавате съобщения за текущия напредък на процеса, а 
  <tt>--block-size=8192 (размер на блока)</tt> ключа - за да повишите скороста му.</li>

  <li>Ако всичките описани методи по-горе не сработят при вас, свалените Ви данни все още 
не са безвъзвратно загубени: Под Linux можете да монирате (loop-mount) <tt>.tmp</tt> файла за да имате 
  достъп до пакетите, които вече са били изтеглени, и да генерирате нов jigdo файл с тези пакети
 (като последния ежеседмичен testing image файл - snapshot, ако не сте успели да го изтеглите, да използвате стария). 
За да направите това първо въведете следните команди като root потребител в директорията с повредения 
  изтеглен файл: <tt>mkdir&nbsp;mnt;
  mount&nbsp;-t&nbsp;iso9660&nbsp;-o&nbsp;loop&nbsp;*.tmp&nbsp;mnt</tt>. 
  След това стартирайте ново теглене в друга директория и въведете пътя (path) 
към <tt>mnt</tt> директорията на въпроса "Files to scan" (Файлове, които ще бъдат сканирани).</li>
</ul>
