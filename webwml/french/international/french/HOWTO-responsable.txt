
Ce document est un pense-bête destiné aux personnes susceptibles
d'enregistrer des fichiers dans le CVS.

        Pages web du site www.debian.org
        =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

Entrepôt CVS :
  /cvs/webwml (module webwml)
Aide :
  De nombreuses instructions sont en ligne dans
    http://www.debian.org/devel/website/
Paquets requis: wml, mp4h, slice
  Il faut des versions récentes de ces paquets, mais des rétro-portages
  pour Potato sont disponibles dans le répertoire (non public)
  /org/www.debian.org/debs/

Les erreurs dans la compilation des fichiers entrainent l'arrêt de la
compilation dans le répertoire courant ; il est donc important d'éviter
les erreurs qui peuvent empêcher la compilation.
Pour cela, une première étape consiste à utiliser le programme weblint
sur la page .wml ; 
    $ weblint index.wml
Comme les pages .wml ont un format similaire au HTML, mais ne sont pas
des documents HTML valides, des erreurs seront signalées. Avec un peu
d'habitude, on apprend à distinguer les erreurs « normales » des erreurs
de balisage.
La meilleure solution est évidemment de générer le fichier, mais cela
peut demander du temps. La compilation est pilotée par un fichier
Makefile, il suffit dans l'exemple précédent d'exécuter
    $ make index.fr.html
Dans certains (events/, News/,...), les sous-répertpoires ne comportent
pas de Makefiles, et il faut générer les fichiers à partir d'un
répertoire ascendant.

Les Makefiles dans le répertoire french/ sont tous identiques, et
contiennent l'unique ligne
  include $(subst webwml/french,webwml/english,$(CURDIR))/Makefile
Ainsi, nous n'avons pas besoin de répercuter les modifications
apportées aux Makefiles du répertoire english/. Le script copypage.pl,
qui permet de facilement recopier les fichiers et Makefiles depuis le
répertoire english/, va recopier le Makefile original, au lieu de créer
le fichier avec cette ligne. Cela sera corrigé ultérieurement, lorsque
cette méthode aura fait ses preuves. Pour l'instant, les autres langues
recopient les Makefiles originaux.

        Disquettes d'installation
        =-=-=-=-=-=-=-=-=-=-=-=-=

Entrepôt CVS :
  /cvs/debian-boot (module boot-floppies)
Aide :
  Toutes les instructions se trouvent dans le fichier README-Translators
Paquets requis: debiandoc-sgml

La documentation requiert quelques précautions, car elle automatiquement
transformée en HTML et en d'autres formats. Il faut toujours vérifier
la validité des fichiers avant de les enregistrer. Pour cela, il faut
lancer la commande (depuis le sous-répertoire documentation/) :
     $ make LINGUA=fr lint-docs
Si la documentation n'est pas mise automatiquement en ligne, il faut
la mettre sur un site quelconque, afin d'aider les traducteurs et
relecteurs. Voici par exemple le script que j'utilise pour mettre le
manuel d'installation sur
  http://people.debian.org/~barbier/debian-l10n/install/

################ Début du script ################
for a in alpha arm hppa i386 ia64 m68k mips mipsel powerpc s390 sparc
do
    rm install.fr.html/*
    make LINGUA=fr architecture=$a install.fr.html/install.fr.html
    [ -f install.fr.html/install.fr.html ] || { echo Erreur 1>&2; exit 1; }
    scp install.fr.html/* people.debian.org:public_html/debian-l10n/install/$a/
done
rm install.fr.html/*
################  Fin du script  ################

Il ne faut pas oublier de renseigner le fichier debian/changelog pour
indiquer les changements apportés.

        Templates Debconf
        =-=-=-=-=-=-=-=-=

Aide :
  Des informations sont disponibles dans
    http://www.debian.org/intl/l10n/templates/hints
Sites :
    [1] http://www.debian.org/intl/l10n/templates/
    [2] http://auric.debian.org/~grisu/debian_translation/
Paquets requis: debconf, debconf-utils

Les procédures de traduction des templates Debconf sont encore
artisanales. Dans [2], Grisu donne le moyen aux différents traducteurs
de récupérer une ébauche de traduction, afin de l'envoyer au
responsable Debian du paquet. Mais comme ceux-ci ne savent souvent
pas comment procéder, il m'a semblé préférable de faire l'interface
entre les traducteurs francophones et les développeurs Debian.
Le traducteur récupère l'original sur
    http://www.debian.org/intl/l10n/templates/fr
par exemple foo_0.9.5.0-8_debian_templates.gz
Il décomprime le fichier, puis exécute
    $ debconf-getlang fr foo_0.9.5.0-8_debian_templates \
          > foo_0.9.5.0-8_debian_templates.fr
et envoie ce fichier après avoir rempli les champs manquants.
Comme des erreurs de formatage du fichier stoppent la génération du
paquet binaire, il va sans dire que les développeurs apprécient peu
de recevoir des fichiers bogués. Il faut donc vérifier la conformité
du paquet avec la commande
    $ debconf-mergetemplate foo_0.9.5.0-8_debian_templates \
               foo_0.9.5.0-8_debian_templates.fr
Une fois les vérifications effectuées, il faut faire un rapport de
bogue. À cause des problèmes d'encodage, il faudrait mettre le fichier
en pièce jointe, mais reportbug signale que le BTS ne le permet pas.
J'ai choisi de mettre le fichier dans le corps du texte, et de le rendre
disponible. Voir par exemple http://bugs.debian.org/141682

-- 
Denis Barbier <barbier@debian.org>
  25 avril 2002

