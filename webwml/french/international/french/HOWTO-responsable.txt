
Ce document est un pense-b-bête destiné aux personnes susceptibles-A
d'enregistrer des fichiers dans le CVS.

        Pages web du site www.debian.org
        =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-

Entrep-bôt CVS :-A
  /cvs/webwml (module webwml)
Aide :
  De nombreuses instructions sont en ligne dans
    http://www.debian.org/devel/website/
Paquets requis: wml, mp4h, slice
  Il faut des versions r-bécentes de ces paquets, mais des rétro-portages-A
  pour Potato sont disponibles dans le r-bépertoire (non public)-A
  /org/www.debian.org/debs/

Les erreurs dans la compilation des fichiers entrainent l'arr-bêt de la-A
compilation dans le r-bépertoire courant ; il est donc important d'éviter-A
les erreurs qui peuvent emp-bêcher la compilation.-A
Pour cela, une premi-bère étape consiste à utiliser le programme weblint-A
sur la page .wml ; 
    $ weblint index.wml
Comme les pages .wml ont un format similaire au HTML, mais ne sont pas
des documents HTML valides, des erreurs seront signal-bées. Avec un peu-A
d'habitude, on apprend -bà distinguer les erreurs « normales » des erreurs-A
de balisage.
La meilleure solution est -bévidemment de générer le fichier, mais cela-A
peut demander du temps. La compilation est pilot-bée par un fichier-A
Makefile, il suffit dans l'exemple pr-bécédent d'exécuter-A
    $ make index.fr.html
Dans certains (events/, News/,...), les sous-r-bépertpoires ne comportent-A
pas de Makefiles, et il faut g-bénérer les fichiers à partir d'un-A
r-bépertoire ascendant.-A

Les Makefiles dans le r-bépertoire french/ sont tous identiques, et-A
contiennent l'unique ligne
  include $(subst webwml/french,webwml/english,$(CURDIR))/Makefile
Ainsi, nous n'avons pas besoin de r-bépercuter les modifications-A
apport-bées aux Makefiles du répertoire english/. Le script copypage.pl,-A
qui permet de facilement recopier les fichiers et Makefiles depuis le
r-bépertoire english/, va recopier le Makefile original, au lieu de créer-A
le fichier avec cette ligne. Cela sera corrig-bé ultérieurement, lorsque-A
cette m-béthode aura fait ses preuves. Pour l'instant, les autres langues-A
recopient les Makefiles originaux.

        Disquettes d'installation
        =-=-=-=-=-=-=-=-=-=-=-=-=

Entrep-bôt CVS :-A
  /cvs/debian-boot (module boot-floppies)
Aide :
  Toutes les instructions se trouvent dans le fichier README-Translators
Paquets requis: debiandoc-sgml

La documentation requiert quelques pr-bécautions, car elle automatiquement-A
transform-bée en HTML et en d'autres formats. Il faut toujours vérifier-A
la validit-bé des fichiers avant de les enregistrer. Pour cela, il faut-A
lancer la commande (depuis le sous-r-bépertoire documentation/) :-A
     $ make LINGUA=fr lint-docs
Si la documentation n'est pas mise automatiquement en ligne, il faut
la mettre sur un site quelconque, afin d'aider les traducteurs et
relecteurs. Voici par exemple le script que j'utilise pour mettre le
manuel d'installation sur
  http://people.debian.org/~barbier/debian-l10n/install/

################ D-bébut du script ################-A
for a in alpha arm hppa i386 ia64 m68k mips mipsel powerpc s390 sparc
do
    rm install.fr.html/*
    make LINGUA=fr architecture=$a install.fr.html/install.fr.html
    [ -f install.fr.html/install.fr.html ] || { echo Erreur 1>&2; exit 1; }
    scp install.fr.html/* people.debian.org:public_html/debian-l10n/install/$a/
done
rm install.fr.html/*
################  Fin du script  ################

Il ne faut pas oublier de renseigner le fichier debian/changelog pour
indiquer les changements apport-bés.-A

        Templates Debconf
        =-=-=-=-=-=-=-=-=

Aide :
  Des informations sont disponibles dans
    http://www.debian.org/intl/l10n/templates/hints
Sites :
    [1] http://www.debian.org/intl/l10n/templates/
    [2] http://auric.debian.org/~grisu/debian_translation/
Paquets requis: debconf, debconf-utils

Les proc-bédures de traduction des templates Debconf sont encore-A
artisanales. Dans [2], Grisu donne le moyen aux diff-bérents traducteurs-A
de r-bécupérer une ébauche de traduction, afin de l'envoyer au-A
responsable Debian du paquet. Mais comme ceux-ci ne savent souvent
pas comment proc-béder, il m'a semblé préférable de faire l'interface-A
entre les traducteurs francophones et les d-béveloppeurs Debian.-A
Le traducteur r-bécupère l'original sur-A
    http://www.debian.org/intl/l10n/templates/fr
par exemple foo_0.9.5.0-8_debian_templates.gz
Il d-bécomprime le fichier, puis exécute-A
    $ debconf-getlang fr foo_0.9.5.0-8_debian_templates \
          > foo_0.9.5.0-8_debian_templates.fr
et envoie ce fichier apr-bès avoir rempli les champs manquants.-A
Comme des erreurs de formatage du fichier stoppent la g-bénération du-A
paquet binaire, il va sans dire que les d-béveloppeurs apprécient peu-A
de recevoir des fichiers bogu-bés. Il faut donc vérifier la conformité-A
du paquet avec la commande
    $ debconf-mergetemplate foo_0.9.5.0-8_debian_templates \
               foo_0.9.5.0-8_debian_templates.fr
Une fois les v-bérifications effectuées, il faut faire un rapport de-A
bogue. -bÀ cause des problèmes d'encodage, il faudrait mettre le fichier-A
en pi-bèce jointe, mais reportbug signale que le BTS ne le permet pas.-A
J'ai choisi de mettre le fichier dans le corps du texte, et de le rendre
disponible. Voir par exemple http://bugs.debian.org/141682

        Fichiers PO
        =-=-=-=-=-=

Aide: un peu partout sur le net, nul part en particulier (ie, si vous avez
      une bonne adresse, je suis preneur)
Site:
   [1] http://www.iro.umontreal.ca/contrib/po/HTML/
   [2] http://developer.gnome.org/projects/gtp/
   [3] http://i18n.kde.org/teams/fr/
   [4] http://jjlapin.free.fr/dico/
Paquets requis: gettext (la version 0.11 qui est dans experimental marche
                         tres bien)
                un -béditeur (par exemple le mode po pour emacs, ou kbabel)-A

Attention, la plupart des paquets ne sont pas traduit au sein de Debian,
mais -bà la source. Par exemple, [2] se charge des traductions des paquets-A
gnome, [3] de ceux kde, et [1] des paquets issus de la FSF (ce projet est
cependant ouvert -bà tous). D'autres projets de traduction sont spécialisés-A
sur une application, et pas seulement sur un projet. Ainsi, [4] se charge
de traduire openoffice.

Seuls les paquets sp-bécifiques à Debian peuvent se permettre de-A
court-circuiter ces projets de traduction. 

La traduction d'application est le plus vieux sous projet de
traduction. Les procedures et outils sont assez rod-bés. Le traducteur-A
obtient le fichier pot le plus -bà jour possible (un make update-po dans le-A
r-bépertoire po/ du projet a de bonne chance de générer une version à jour),-A

Il faut ensuite m-bélanger cette nouvelle version originale avec sa-A
traduction pr-bécédente. (si vous commencez la traduction sans avoir de-A
vieille traduction, renomez simplement le fichier pot en -b« fr.po »).-A

Si vous avez gettext 0.11 (voir dans experimental/ sur les mirrors Debian):
  msgmerge -U fr.po fichier.pot
Si vous avez une vieille version de gettext :
  msgmerge fr.po fichier.pot > fr.new.po ; mv fr.new.po

Au besoin, ajouter un entête ou corrigez celui existant. Ca doit ressembler
-bà ca :-A
"Project-Id-Version: vorbis-tools 0.99.1.3.1\n"
"POT-Creation-Date: 2002-02-05 10:31+0100\n"
"PO-Revision-Date: 2002-04-26 09:12GMT\n"
"Last-Translator: Martin Quinson <Martin.Quinson@ens-lyon.fr>\n"
"Language-Team: French <traduc@traduc.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=ISO-8859-15\n"
"Content-Transfer-Encoding: 8bit\n"

Les infos importantes sont : Last-Translator (pour qu'on puisse savoir -bà-A
qui faire des rapports de bogue) Content-Type et Content-Transfer-Encoding
(pour que gettext sache dans quel encodage produit le fruit de votre
travail. Si vous mettez pas les bonnes valeurs ici, vous aurez pas d'accent
dans la traduction (ou pire). Dans le cadre de traduction Debian, le champ
Language-Team devrait être "dlf <debian-l10n-french@lists.debian.org>"

Ensuite, vous mettez votre travail -bà jour. Il faut evidement traduire-A
toutes les chaines non traduite, mais aussi mettre -bà jour les chaines-A
marqu-bées "fuzzy" (floues). Cela veut dire que msgmerge pense que cette-A
traduction a de bonnes chances d'etre la bonne, mais ce n'est qu'un
programme. C'est -bà vous, humain, de vérifier et retirer le marqueur fuzzy-A
une fois que c'est bon.

Ensuite, vous v-bérifiez votre travail. Si vous vous trompez dans les chaines-A
de format (ie, %s, %d et leurs amis), vous avez toutes les chances de faire
planter le programme qui utilisera votre traduction. La v-bérification se-A
fait avec la commande suivante :
  msgfmt --statistics -c -v -o /dev/null fr.po
Dans le mode po d'emacs, la touche 'V' fait ca pour vous.
Dans kbabel, c'est Ctrl+T

Si le fichier est -bà jour et valide, il faut soumettre un bogue au-A
mainteneur. La problematique est la meme que pour les templates debconf ci
dessus (cf.)

-- 
Denis Barbier <barbier@debian.org>
  25 avril 2002
