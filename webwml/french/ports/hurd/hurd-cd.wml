#use wml::debian::template title="Debian GNU/Hurd&nbsp;&ndash;&nbsp;CD Hurd" NOHEADER="yes"
#include "$(ENGLISHDIR)/ports/hurd/menu.inc"
#use wml::debian::translation-check translation="1.71" maintainer="David Prévot"

# Translators:
# Arnaud Fontaine, 2004, 2005.
# Frédéric Bothamy, 2007.
# Jean-Édouard Babin, 2009.
# David Prévot, 2010, 2011.

<define-tag cdserie>L1</define-tag>
<define-tag cdbasetarball>gnu-2009-10-18.tar.gz</define-tag>
<define-tag cdbasename>debian-<cdserie>-hurd-i386</define-tag>

<h1>Debian GNU/Hurd</h1>


<p>Alors que de nombreuses personnes appellent GNU/Hurd le système
GNU, cette appellation n'est pas tout à fait correcte. Le noyau est en
réalité GNU Mach et non le Hurd. Le Hurd est une collection de
serveurs fonctionnant au-dessus d'un micronoyau,
GNU Mach. L'ensemble du Hurd et de GNU Mach fait partie du
projet GNU tandis que le noyau Linux est un projet indépendant.</p>

<h2>Utilisation des CD d'installation de l'installateur Debian</h2>

<p>
  Une préversion du portage hurd-i386 de l'installateur Debian
  standard est disponible au téléchargement sur <url
  "http://people.debian.org/~sthibault/hurd-i386/installer/cdimage/">.

  Il fonctionne comme le portage Linux habituel de
  l'installateur Debian, c'est-à-dire automatiquement,
  à l'exception de DHCP qui n'est pas pris en charge.

  C'est la méthode recommandée.

Veillez également à lire les <a href="hurd-install">notes d'installation non
automatique</a> qui expliquent certaines des dernières étapes de configuration.
</p>

<h2>Utilisation des CD d'installation non officiels de Debian
GNU/Hurd</h2>

<p>
  C'est l'ancienne façon d'installer GNU/Hurd, qui peut toujours
  être utile, surtout en absence de connexion à Internet.
</p>

<p>Version actuelle de Debian GNU/Hurd, <cdserie>.</p>

<p>Seule la première image ISO est disponible pour
cette version.</p>

<p>Une image de petite taille (<cdbasename>-mini.iso) est disponible, ce qui
pourrait être utile pour les personnes souhaitant installer Debian
GNU/Hurd par le réseau.</p>

<p>
  <cdbasetarball> (une archive du système GNU de
  base) a été conçue spécialement pour ce jeu.
</p>

<h3>Téléchargement</h3>

<p>
  Les images <tt>iso</tt> actuelles sont
  <cdbasename>-DVDx.iso et <cdbasename>-mini.iso.

  L'ensemble des
  binaires spécifiques au système GNU se trouve sur la première
  image, ainsi que tous les paquets considérés comme requis,
importants ou standards. De cette manière, un système GNU de base peut
  être installé en utilisant la première image.
</p>

<p>Les sites suivants répliquent habituellement les images, mais
vérifiez tout de même.</p>

<p>Le site principal est <url "http://ftp.debian-ports.org/debian-cd/"> en France,
et les miroirs pour ces images sont
<url "http://www.gtlib.gatech.edu/pub/gnuab/debian-cd/"> aux États-Unis
et <url "ftp://ftp.duckcorp.org/hurdfr/hurd/"> en France.
</p>

<p>Une recherche sur <url "http://www.filesearching.com/"> pour hurd-L
vous permettra de trouver des sites plus proches géographiquement.</p>

<p>Les instructions pour graver les CD à partir des images sont
disponibles dans la <a href="$(HOME)/CD/faq/">Debian CD FAQ</a>.</p>

<h3>CD</h3>

<p>Visitez <a href="$(HOME)/CD/vendors/">cette page pour obtenir la
liste des revendeurs de CD de GNU/Hurd</a>. Vous avez également
la possibilité d'utiliser votre navigateur en recherchant
«&nbsp;hurd&nbsp;», <url "http://www.copyleft.co.nz/"> vous permettra
d'obtenir les dernières versions des CD.</p>

<h3>Comment fonctionnent les CD d'installation</h3>

<p>Les CD d'installation de Debian GNU/Linux <em>Potato</em> utilisent la
méthode d'installation croisée pour l'installation du système de
base. Une image de disque est créée en mémoire et un minisystème
GNU/Linux installé à cet emplacement. Ce petit système est utilisé
pour le partitionnement et le formatage des disques, mais aussi pour
préparer la machine cible à l'installation du système de base. La
phase la plus critique est la décompression d'une archive contenant
les paquets de base sur le disque du système cible. Le nouveau système
est alors redémarré en utilisant les paquets décompressés sur le
disque dur. Les paquets supplémentaires sont ensuite installés et
configurés afin de disposer du système de votre choix.</p>

<p>Comme GNU utilise également la méthode d'installation croisée, cela
signifie donc que les scripts destinés à la construction des CD
d'installation pourraient être adaptés à partir des scripts d'amorçage
et du CD de Debian GNU/Linux, ainsi l'archive GNU sera
décompressée à la place de celle de GNU/Linux.</p>

<p>L'installation du système GNU en utilisant le jeu de CD
présente plusieurs avantages&nbsp;:</p>

<ul>
<li> Comme le système GNU/Linux fonctionne sur un disque virtuel et
que l'archive est sur le CD, un système GNU peut être installé
sur n'importe quel ordinateur, mais aussi sur un ordinateur sur lequel
on ne souhaite pas utiliser le système d'exploitation déjà installé.</li>

<li> Le système de fichier où se trouvent les paquets sur les CD
pourrait être réorganisé afin d'incorporer des
«&nbsp;work-arounds&nbsp;».</li>

<li> Même si une version de «&nbsp;parted&nbsp;» pour GNU/Hurd existe,
beaucoup de gens préfèrent utiliser l'outil GNU/Linux
«&nbsp;cfdisk&nbsp;» sur le CD d'installation.</li>

<li>
C'est rapide, moins risqué et la plupart des gens ont l'habitude de
ce procédé.</li>
</ul>

<h3>Les partitions Hurd</h3>

<p>Le Hurd utilise des extensions au système de fichier ext2, utilisez
<tt>mke2fs -b 4096 -I 128 -o hurd /dev/[Hurd partition]</tt>. Les CD d'installation utilisent
cette commande pour la création de partitions Hurd.</p>

<h3>Utilisation des CD d'installation</h3>

<h4>Avant l'installation</h4>

<p>Les documentations spécifiques à Hurd sont disponibles dans
./doc/hurd. hurd-install-guide et Cook-book doivent être lus avant de
commencer.</p>

<ol>
<li><em>Préparer une disquette d'amorçage avec GNU&nbsp;Grub</em>
<p>
  Installez le paquet grub-disk ou grub-rescue-pc, ils
  contiennent une image de disquette GRUB. Vous pouvez
utiliser «&nbsp;dd&nbsp;» sur GNU/Linux ou rawrite à partir de MS.</p></li>

<li>Essayez de bien comprendre les conventions de nommage des
disques et partitions utilisées par Linux, GRUB et Hurd. Vous devrez
utiliser les trois qui sont assez proches et pourraient vous induire
en erreur.</li>
</ol>

<p>Hurd et Linux nomment différemment les partitions, faites donc
bien attention. Les disques durs IDE sont notés en commençant par hd0
pour le disque primaire maître et hd1 son esclave, puis le disque
secondaire maître hd2 et hd3 son esclave. Les disques SCSI sont aussi
notés dans un ordre *absolu*. Il y aura toujours sd0, sd1, et ce même
si les deux disques possèdent les identifiants SCSI 4 et 5 ou quoi que
ce soit d'autre. L'expérience a montré qu'il est plus délicat de
déterminer l'appellation correcte des lecteurs de CD. Plus
d'informations à ce sujet seront disponibles ultérieurement.</p>

<p>Les partitions Linux sont toujours appelées sn lorsqu'on utilise le
Hurd, où n est le numéro de la partition, donc la première partition
sur le premier disque dur IDE sera hd0s1, la troisième partition sur
le second disque dur SCSI sera sd1s3, et ainsi de suite.</p>

<p>GRUB 1 possède encore une autre convention de nommage. Il note les
partitions (hdN,n), mais cette fois-ci, les numéros des disques et
partitions commencent à zéro, et les disques sont ensuite notés dans
l'ordre, tous les disques durs IDE en premier, et les disques SCSI dans un
second temps. Cette fois-ci, la première partition sur le premier
disque dur IDE sera (hd0,0).

  GRUB 2 fait la même chose, mais en commençant la numérotation
  des partitions à un, donc dans ce cas ce serait (hd0,1).

De plus, (hd1,2) pourrait désigner le
premier périphérique SCSI si vous n'avez qu'un seul périphérique
IDE, ou cela pourrait aussi désigner le second périphérique IDE. Il
est donc important que vous ayez bien compris comment se nomment vos
partitions avant de commencer.</p>

<h4>Installation</h4>

<ol>
<li><em>Amorcez à partir du CD.</em>
<p>

N'importe quelle méthode d'amorçage du CD Debian&nbsp;3.0&nbsp;beta (<em>Woody</em>)
fonctionnera, que ce soit à partir du CD, à partir de MS ou depuis
n'importe quelles images de disquette d'amorçage et racine. Un jeu
complet de disquettes de base peut être créé si vous ne disposez pas
de lecteurs de CD.</p></li>

<li><em>Après l'écran d'accueil, utilisez «&nbsp;Partition a Hard
Disk&nbsp;».</em>

<p>Si vous êtes sur le point de copier les paquets .deb sur un disque
dur, alors vous devrez créer d'autres partitions, une pour chaque
CD. Étant donné que parted est disponible pour GNU/Hurd, vous
pouvez très bien utiliser cette possibilité. Environ 500&nbsp;Mo seront
suffisants pour le système de base. Si vous avez besoin de créer
d'autres partitions, alors il sera certainement plus facile de
redémarrer à partir du premier CD et d'utiliser les outils du
disque virtuel Linux pour effectuer cette opération.</p></li>

<li><em>Vous devez connaître les noms GRUB et Hurd des partitions que
vous utilisez.</em></li>

<li><em>Créez vos partitions en utilisant «&nbsp;Partition a Hard Disk&nbsp;»</em>
et n'oubliez pas la partition d'échange. GNU/Hurd a absolument besoin
d'espace d'échange.</li>

<li><em>Formatez votre partition Hurd</em> en utilisant «&nbsp;Initialize a
Hurd Partition&nbsp;» et montez-la sur «&nbsp;/&nbsp;». Ne montez pas d'autre
partition.</li>

<li><em>Installez le système de base en utilisant «&nbsp;Install the Base
System&nbsp;».</em></li>

<li><em>Insérez une disquette GRUB dans le périphérique et redémarrez
avec «&nbsp;Reboot the System&nbsp;»</em> (n'oubliez pas de modifier le
bios). C'est tout&nbsp;! [Premier redémarrage]</li>
</ol>

<p>
  La configuration par défaut de l'image GRUB suppose que
  votre partition GNU/Hurd est « (hd0,0) » [convention de nommage de
  GRUB 1], « (hd0,1) » [convention de nommage de GRUB 2]
  et « sd0s1 » [GNU/Hurd], qui désigne la première partition sur le
  premier disque dur SCSI s'il n'y a aucun disque dur IDE.

  Cependant, lors des premiers démarrages, il faudra passer l'option
  <code>-s</code> au noyau GNU Mach pour démarrer en mode utilisateur
  unique (« single »), et enlever l'option <code>--readonly</code>
  de la ligne de commande <code>ext2fs.static</code>.
</p>

<p>
  Il est <strong>très important</strong> de regarder les
  messages qui s'affichent durant l'amorçage du système et
  de noter soigneusement où se trouve le lecteur de CD.

  Ne touchez pas au clavier jusqu'à la fin du processus
d'amorçage.</p>

<p>
  <q>/boot/grub/menu.lst</q> ou <q>/boot/grub/grub.cfg</q>
  sur la disquette GRUB peut être modifié afin
que le système démarre comme vous le souhaitez.</p>

<h3>La suite</h3>

<ol>

<li><em>Une fois que le système est démarré, créez les fichiers
nécessaires</em> pour le lecteur de CD, la partition d'échange
et les autres partitions du disque dur.

<p>Par exemple
<kbd>cd /dev</kbd> et <kbd>MAKEDEV hd2 hd0s2 hd0s3</kbd></p></li>

<li>
  <em>Activez la zone d'échange.</em>
<pre>
$ /hurd/mach-defpager
$ swapon /dev/hd0s2
</pre>
  Vérifiez que cela a fonctionné. La zone d'échange est 
  <strong>vraiment recommandée</strong> pour le Hurd.
  </li>

<li>
  <em>Lancez ./native-install.</em>
  De nombreux paquets seront configurés.
  Redémarrez en tapant <kbd>reboot</kbd>.
  [Deuxième redémarrage].
  Vous disposez maintenant d'un système à configurer.<br />
  Connectez-vous en tant que superutilisateur, <kbd>login root</kbd>.
</li>

<li>
<em>Modifiez /etc/fstab, <kbd>nano /etc/fstab</kbd></em>.
(nano n'est pas un mauvais éditeur).
<p>Ajoutez les partitions du disque dur, par exemple,
<pre>
/dev/[Nom de la partition sur Hurd]	none	swap		sw		0	0
/dev/[Nom de la partition sur Hurd]	/CD1	ext2		rw		1	1
/dev/[Nom du lecteur sur GNU]		/cdrom	iso9660fs	ro,noauto	1	1
</pre>
</p>

<p>Le Hurd utilise le système de fichier ext2. «&nbsp;/CD1&nbsp;» est une
suggestion concernant le point de montage pour les partitions qui
contiennent les paquets de <cdbasename>-CD1. L'espace d'échange peut être
partagé avec Linux.</p></li>

<li><em>Configurez le traducteur qui accède au lecteur de
CD,</em> en saisissant par exemple
<p>
«&nbsp;settrans -a /cdrom /hurd/iso9660fs /dev/[Hurd drive name]&nbsp;»<br />
Même si ceci est la manière GNU de le faire, «&nbsp;mount /cdrom&nbsp;»
fonctionnera également.</p></li>

<li><em>Tapez «&nbsp;/cdrom/upgrade/install.sh&nbsp;»</em>.
<p>Cela va installer les paquets nécessaires, importants et
standards.</p></li>

<li><em>Vous pourriez aussi taper «&nbsp;/cdrom/upgrade/gui.sh&nbsp;»</em>.
<p>Cela installera le système X.</p></li>
				
<li><em>De nombreux autres paquets peuvent être installés en
utilisant «&nbsp;apt&nbsp;» ou «&nbsp;dselect&nbsp;».</em>
<p>Si vous ne connaissez pas beaucoup les outils Debian, lisez «&nbsp;info
apt&nbsp;» et «&nbsp;info dselect&nbsp;».</p></li>

<li><em>Démontez le lecteur de CD.</em>
<p>Le lecteur de CD est démontable via «&nbsp;settrans -agf /cdrom&nbsp;».<br />
Le tiroir du lecteur de CD devrait maintenant être déverrouillé.</p></li>

</ol>

<p>C'est ici que ce guide se termine et que vous pouvez commencer à
découvrir le Hurd. Amusez-vous bien.</p>
<p>Toutes suggestions au sujet des CD sont les bienvenues.<br />
Philip Charles, philipc@debian.org</p>
