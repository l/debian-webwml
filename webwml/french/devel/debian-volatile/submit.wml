#use wml::debian::template title="Soumission d'informations de miroir volatile"
#use wml::debian::translation-check translation="1.6" maintainer="Frédéric Bothamy"

<p>Si vous désirez soumettre des informations à propos d'un miroir de
<em>debian volatile</em> (FTP archive, web), vous pouvez le faire en
utilisant le formulaire ci-dessous.

<p>Il y a des <a href="#examples">exemples</a> au bas de la page au cas
où vous ne seriez pas certain de la façon de procéder.

<p>Si vous voulez soumettre des changements à propos de votre entrée
déjà existante, créez simplement une soumission nouvelle (complète) et
ajoutez un commentaire indiquant qu'il s'agit d'une mise à jour.

<p>Toutes les informations fournies ne seront pas affichées dans la
liste des miroirs, comme l'adresse du responsable du miroir. L'adresse
électronique sera sauvegardée quelque part sur nos sites pour que les
éditeurs de la liste des miroirs puissent vous informer des nouveautés et
des rapports de bogue.

<p>Veuillez noter qu'un miroir officiel doit utiliser rsync comme
méthode pour récupérer les paquets actuels. Nous recommandons fortement
d'utiliser le script <a
href="http://volatile.debian.net/mirror-volatile.sh">\
mirror-volatile.sh</a>.</p>

<p>Pour être listé, vous devez respecter les critères suivants&nbsp;:
<ul>
  <li>vous devez fournir un miroir de l'archive complète
  <em>debian-volatile</em>&nbsp;;</li>
  <li>vous devez rafraîchir le miroir de <em>debian-volatile</em> au
  moins une fois par jour&nbsp;;</li>
  <li>vous devez placer la sortie de «&nbsp;date -u&nbsp;» dans
  /project/trace/$YOURHOSTNAME</li>
  <li>vous devez avoir une adresse électronique à laquelle on peut vous
  écrire. <b>Les entrées seront supprimées si nous ne pouvons pas vous contacter.</b></li>
</ul>
<p>Nous différencions entre les miroirs «&nbsp;push&nbsp;» et les miroirs normaux.</p>

<h2>Qu'est-ce qu'un miroir «&nbsp;Push&nbsp;»&nbsp;?</h2>
<p>En bref, c'est un miroir normal avec la seule différence que
volatile.debian.net vous indique quand quelque chose a changé dans
l'archive. Il n'est donc pas nécessaire de tenter une synchronisation
périodique, vous êtes notifié des changements d'archive. Une page
intéressante décrivant cela et certaines parties de la configuration est
<a href="http://www.debian.org/mirror/push_mirroring.en.html">disponible</a>
sur les serveurs debian.org. Veuillez la lire si vous n'êtes pas
familier avec cela.</p>

<p>Vous êtes libre d'utiliser le script que vous voulez, mais
assurez-vous d'en utiliser un sécurisé. Nous <em>n'acceptons pas</em> de
miroirs utilisant debmirror ou des outils similaires pour le miroitage.
Ces outils sont acceptables pour un miroir privé, mais ne sont pas
utilisables pour des miroirs complets car ils excluent beaucoup de
fichiers intéressants. Basiquement, cela veut dire cela&nbsp;: garder un
miroir complet et fonctionnel tout le temps. Les options suivantes de
rsync (en plus de celles que vous avez normalement) devraient faire
l'affaire&nbsp;:</p>

<hr>

<table>
<tr>
 <th>Exécution</th>

 <th>Options</th>
 <th>Impacts</th>
</tr>
<tr>
<td>1</td>
<td>--exclude Packages* --exclude Sources* --exclude Release*</td>

<td>Vous téléchargez les nouveaux fichiers binaires, sources et
Packages, mais pas leurs métadonnées &mdash; utilisées par
<code>apt-get</code>. Notez également qu'aucune option de suppression
n'est donnée.</td>

</tr>
<tr>
<td>2</td>
<td>--delete --delete-after</td>
<td>La seconde exécution récupère maintenant les fichiers exclus de la
première exécution et supprime également tous les fichiers qui ne sont
plus dans l'archive.</td>
</tr>
</table>

<hr>

<p>
Cette approche de miroitage en deux phases assure que les utilisateurs
avec apt-get peuvent toujours récupérer les fichiers qui sont annoncés
comme étant présents (<em>via</em> les fichiers Packages), même si votre
miroir est lui-même en cours de mise à jour au moment où ils tentent de
télécharger des fichiers. Vous êtes libre d'utiliser toute autre option
que vous voulez avoir, mais nous vous suggérons fortement d'utiliser au
moins -lH.</p>

<p>Vous devez maintenant ajouter <a
href="http://volatile.debian.net/id_mirrorpush.pub">cette clé SSH</a> au
fichier .ssh/authorized_keys de l'utilisateur mirror-user. Si vous
étudiez la clé, vous verrez qu'elle est limitée à une seule commande.
Cela veut dire que nous <em>ne pouvons pas</em> nous connecter à votre
système avec cette clé. Il n'y a aucun moyen pour nous de faire autre
chose sur votre système que de déclencher un miroitage toutes les
quelques secondes, mais pour cela, le script que nous fournissons comme
exemple utilise un fichier de verrou pour éviter des exécutions
multiples en même temps. <b>Vous devez remplacer cela par le script que
vous utilisez, mais <em>ne supprimez pas</em> le &amp; à la fin.</b> </p>

<h2>Considérations de trafic et d'espace disque</h2>

<h3>Trafic</h3>
<p>
Vous voulez peut-être savoir quel traffic vous recevrez &ndash; ou de
quel espace disque vous aurez besoin. L'utilisation de bande passante
dépend des utilisateurs, de la façon dont ils l'utilisent et des miroirs
qu'ils choisissent. Nous avons actuellement environ 20&nbsp;Go par mois
sur volatile.debian.net. Certains miroirs peuvent avoir plus de trafic,
d'autres moins.
</p>

<h3>Espace disque</h3>

<p>
Actuellement, notre archive occupe 200&nbsp;Mo d'espace disque. Comme
nous ajoutons des paquets de temps en temps, attendez-vous à ce que
l'archive grossisse.
</p>

<h2>Option de configuration supplémentaires recommandées</h2>

<p>Si vous voulez rendre le miroir Debian disponible par HTTP, veuillez
ajouter les options de configuration suivantes à votre configuration
Apache (en supposant, bien sûr, que vous utilisez Apache), où
/chemin/vers/votre/miroir/debian est le nom réel du répertoire où vous
conservez le miroir&nbsp;:</p>

<pre>
   ReadmeName /chemin/vers/votre/miroir/debian/README

   &lt;Directory /chemin/vers/votre/miroir/debian&gt;
      Options +Indexes +SymlinksIfOwnerMatch
      IndexOptions NameWidth=*
      ReadmeName README.txt
   &lt;/Directory&gt;
</pre>   

<p>Cela actives les indices de répertoire et assure que les liens
symboliques suivants fonctionneront. Les noms de fichier dans les
indices de répertoire ne seront également pas tronqués.</p>


<h2>Recevoir la poussée</h2> 

<p>Dès que vous avez fini de le configurer, vous êtes prêt à être ajouté
à la liste des serveurs «&nbsp;push&nbsp;». Pour cela, veuillez utiliser
le formulaire de la prochaine section.
</p>

<H2>Informations de base</H2>

<P>Veuillez inclure le nom sous lequel vous désirez que votre miroir
soit listé dans le champ <em>Site</em>. Si le serveur a d'autres noms,
listez-les dans le champs <em>Alias</em>, séparés par des virgules
(«&nbsp;,&nbsp;»). Il s'agit probablement de l'inverse des entrées DNS.

<form method=post action="http://cgi.ftbfs.de/submit_mirror.cgi">
<p>
Site: <input type="text" name="site" size="30"><br>
Alias: <input type="text" name="aliases" size="60">

<H2>Types de miroir et méthodes pour les accéder</H2>

<p>Entrez les chemins vers le miroir volatile de votre site dans les
champs ci-dessous. Laissez en blanc les champs non pertinents.

<define-tag tablerow>
	<tr><td>%0: </td><td><input type="text" name="%1" size="%2"></td></tr>
</define-tag>

<table>
<tablerow "Archive des paquets, par HTTP"   archive-http   30>
<tablerow "Archive des paquets, par FTP"    archive-ftp    30>
<tablerow "Archive des paquets, par rsync"  archive-rsync  30>
</table>

<H2>Informationa à propos du site miroir</H2>

<p>Veuillez remplir tous les champs suivants (nous ne dévoilerons à
personne les noms et courriels). Le pays et l'origine du miroir sont
importants car nous les utilisons pour organiser les entrées.

<table>
<tablerow "Le miroir est mis à jour depuis"    mirrors_from  30>
<tablerow "Nom du responsable du site"         maint_name    30>
<tablerow "Courriel du responsable du site"    maint_email   30>
<tr><td>Pays du site&nbsp;:  <td><select name="country">
#include "$(ENGLISHDIR)/mirror/countries.data"
<: country_list() :>
</select>
<tablerow "Emplacement du site (optionnel)"    location      30>
<tablerow "Nom du sponsor du site (optionnel)" sponsor_name  30>
<tablerow "URL du sponsor du site (optionnel)" sponsor_url   30>
</table>

<table><tr>
<td valign="top">Commentaire&nbsp;:</td>
<td><textarea name="comment" cols=40 rows=7></textarea></td>
</tr></table>

<p>Note&nbsp;: s'il y a plus d'un sponsor, ajoutez les autres dans le
commentaire. Vous pouvez également noter si un miroir est partiel, la
fréquence à laquelle il est mis à jour et la vitesse du site (sa bande
passante maximale). Vous pouvez également lister les méthodes d'accès
alternatives (NFS, IPv6, etc.) ici.
<br>

<input type="submit" value="Submit"> <input type="reset" value="Clear form">
</p>
</form>

<p>Votre site apparaîtra sur la liste d'ici une semaine. Nous pouvons
vous envoyer un courriel en cas de problème avec l'entrée soumise.


<H2><a name="examples">Exemples</a></H2>

<p>La soumission suivante serait pour un serveur appelé
debian.example.com, qui peut également être joint en utilisant
e1.example.com. Ces noms sont naturellement fictifs.

<blockquote>
<p>
Site: <code>debian.example.com</code><br>
Alias: <code>e1.example.com</code>
</p>
</blockquote>

<p>Le miroir de l'archive volatile est dans le répertoire
/debian-volatile/ du serveur web&nbsp;:

<blockquote>
<p>
Archive des paquets, par HTTP: <code>/debian-volatile/</code>
</p>
</blockquote>

<p>Ceci est pour ftp://debian.example.com/debian-volatile/&nbsp;:
     
<blockquote>
<p>
Archive des paquets, par FTP: <code>/debian-volatile/</code>
</p>
</blockquote>

<p>Voici le répertoire utilisé pour l'accès rsync, debian.example.com::debian-volatile/&nbsp;:

<blockquote>
<p>
Archive des paquets, par rsync: <code>debian-volatile/</code>
</p>
</blockquote>

<p>Ce miroir est actualisé à partir de ftp.de.debian.org, nous ajoutons donc&nbsp;:

<blockquote>
<p>
Le miroir est mis à jour depuis: <code>ftp.de.debian.org</code>
</p>
</blockquote>

<p>Maintenant les informations du responsable&nbsp;:

<blockquote>
<p>
Nom du responsable du site: <code>John Doe</code><br>
Courriel du responsable du site: <code>address.goes@here.example.com</code>
</p>
</blockquote>

<p>(Une fois encore, l'adresse du responsable ne sera pas affichée sur
les listes publiques, mais sur les sites utilisés par les éditeurs de
liste des miroirs. Veuillez donc entrer une adresse valide.)

<p>Les autres informations seraient&nbsp;:

<blockquote>
<p>
Pays: <code>United States [US]</code><br>
Commentaire: <code>Toute note dont vous estimez qu'elle pourrait aider
d'autres personnes</code>
</p>
</blockquote>

<p>L'exemple suivant pourrait décrire le miroir à ftp.uk.debian.org&nbsp;:

<blockquote>
<p>
Site: <code>ftp.uk.debian.org</code><br>
Alias: <code>open.hands.com</code><br>
Archive des paquets, par HTTP: <code>/debian-volatile/</code><br>
Archive des paquets, par FTP: <code>/debian-volatile/</code><br>
Archive des paquets, par rsync: <code>debian-volatile/</code><br>
Nom du responsable du site: <code>Philip Hands</code><br>
Courriel du responsable du site: <code>abc@address.goes.here</code><br>
Pays: <code>United Kingdom [GB]</code>
</p>
</blockquote>

