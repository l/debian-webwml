#use wml::debian::template title="Utilisation de CVS"
#use wml::debian::translation-check translation="1.10" maintainer="Frédéric Bothamy"

<p>CVS est un programme pour aider à la modification simultanée de
documents par plusieurs personnes. Chaque utilisateur crée une copie
locale des documents. Ces copies peuvent être sur la même machine, ou
aux quatre coins du monde. Les utilisateurs peuvent alors modifier leur
copie locale comme ils le souhaitent, et quand la version modifiée est
prête, enregistrer leurs changements sur le serveur.

<p>CVS ne vous laissera pas enregistrer vos modifications si la version
originale a été modifiée depuis votre dernière mise à jour.
Ce n'est normalement pas un problème parce que vous pouvez mettre à jour
votre copie locale. Si vos propres changements sont dans des zones du
fichier différentes des modifications sur le fichier original, celles-ci
sont silencieusement répercutées sur votre copie locale.
Si les changements affectent la même zone, vous êtes averti qu'il y a
conflit et que vous devez éditer le fichier pour corriger le problème
avant d'enregistrer vos modifications.

<P>Dans ce qui suit, un accès anonyme (par le compte
«&nbsp;anonymous&nbsp;») sera utilisé comme exemple. Si vous avez accès
à un autre compte qui vous donne une permission en écriture dans le
référentiel CVS, alors vous devriez utiliser ce compte à la place.
Si vous pensez faire des changements, vous devriez commencer par obtenir
un compte, puisque les utilisateurs anonymes ne peuvent pas enregistrer
leurs changements.

<p>Si vous êtes un développeur Debian, lisez la section sur
<a href="#cvsfordevelopers">l'accès CVS pour les développeurs Debian</a>.

<p>Pour commencer à utiliser CVS, vous devez d'abord faire un
<code>login</code> sur le serveur CVS

<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml login
</pre>

<p>(appuyez simplement sur la touche Entrée pour le mot de passe
«&nbsp;password&nbsp;» du compte «&nbsp;anonymous&nbsp;»)

<P>Pour récupérer une copie de fichiers wml sur votre machine locale,
vous devez utiliser

<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout webwml
</pre>

<p>Vous pouvez ne récupérer qu'une partie des pages en faisant&nbsp;:

<pre>
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout -l \\
          webwml webwml/&lt;<var>langue</var>&gt;
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout \\
          webwml/Perl webwml/english/template webwml/&lt;<var>langue</var>&gt;/Pics
   cvs -d :pserver:anonymous@cvs.debian.org:/cvs/webwml checkout \\
          &lt;<var>chemin des fichiers désirés</var>&gt;
</pre>

<p>Répétez la dernière étape pour chacun des répertoires ou fichiers que
vous voulez récupérer. La deuxième ligne permet d'avoir tous les
fichiers nécessaires à la génération des fichiers HTML à partir des
sources WML. Cette récupération partielle n'est pas vraiment la méthode
officielle de travailler, donc il se peut que les instructions données
ci-dessus ne marchent pas toujours.

<p>Si on vous a donné un nom d'utilisateur et un mot de passe, tapez
celui-ci à la place de anonymous, comme ceci&nbsp;:

<pre>
   cvs -d :pserver:nom_utilisateur@cvs.debian.org:/cvs/webwml checkout webwml/english/doc
</pre>

<P>À partir de là, vous n'aurez plus besoin d'utiliser la partie
<code>-d :pserver:...</code>.  De temps en temps vous voudrez faire un

<pre>
   cvs update -d
</pre>

<p>pour récupérer les fichiers qui ont changé. L'option <code>-d</code>
ajoutera les nouveaux répertoires éventuels, automatiquement.
Vous pouvez créer un fichier <code>~/.cvsrc</code> afin de ne pas avoir
à taper les mêmes options à chaque fois. Par exemple, il peut contenir

<pre>
cvs -z9
update -d -P
diff -u
</pre>

<P>La suite concerne ceux qui ont une permission en écriture dans le
référentiel CVS. Quand vous en avez fini avec une page, vous pouvez
enregistrer vos modifications dans le référentiel en utilisant

<pre>
   cvs commit &lt;file&gt;.wml
</pre>

<p>ou

<pre>
   cvs commit &lt;dir&gt;   (pour enregistrer toutes les modifications dans &lt;dir&gt;)
</pre>

<p>ou

<pre>
   cvs commit          (pour enregistrer toutes les modifications dans le répertoire courant)
</pre>

<P>Si vous êtes la première personne à traduire une page, vous aurez
besoin de faire un

<pre>
   cvs add &lt;file&gt;.wml
</pre>

<p>avant de pouvoir l'enregistrer. Notez que <code>cvs add</code> n'est
pas récursif donc vous aurez besoin d'ajouter un répertoire avant de
pouvoir ajouter son contenu.

<P>Pour plus d'information sur CVS, utilisez <code>info cvs</code>.

<H3><a name="cvsfordevelopers">Accès CVS en écriture pour les développeurs Debian</a></H3>

<P>Comme les développeurs Debian ont déjà un compte sur cvs.debian.org,
une méthode plus sûre peut être utilisée pour accéder au référentiel
CVS. Cette méthode est préférable à la méthode «&nbsp;pserver&nbsp;»
expliquée plus haut.

<p>Vous devez écrire à webmaster@debian.org en demandant un accès CVS.
Une fois que vous avez été ajouté au groupe <tt>webwml</tt>, modifiez
seulement la variable d'environnement CVS_RSH en y mettant ssh
(«&nbsp;<code>export CVS_RSH=ssh</code>&nbsp;» dans votre
<code>~/.bashrc</code>) et tapez

<pre>
   cvs -d :ext:<var>nom_compte</var>@cvs.debian.org:/cvs/webwml checkout webwml
</pre>

<p>Une fois que vous avez récupéré les fichiers, tout le reste
fonctionne comme dans la section précédente (même la remarque sur la
récupération partielle de l'arborescence).
