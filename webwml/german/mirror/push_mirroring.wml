#use wml::debian::template title="Erläuterungen zum Push-Spiegeln"
#use wml::debian::translation-check translation="1.6"
# Translator: Martin Schulze <joey@debian.org>

<p>Push-Spiegeln ist eine Form des Spiegelns unter Verwendung von rsync, so
dass die Zeit minimiert wird, die benötigt wird, damit Änderungen im
Hauptarchiv auf den Spiegeln erscheinen.  Der Server-Spiegel benutzt einen
Trigger-Mechanismus, um den Spiegel zu informieren, dass es aktualisiert
werden muss.

<p>Push-Spiegeln bedeutet etwas größeren Aufwand beim Einrichten, da die
Verwalter der beiden betroffenen Spiegel Informationen austauschen müssen.
Der Vorteil besteht darin, dass der in der Hierarchie höhergelegene Spiegel
den Spiegel-Prozess selbst anstoßen kann, sobald sein Archiv aktualisiert
wurde.  Dadurch werden Änderungen im Archiv extrem schnell propagiert.


<h2>Beschreibung der Methode</h2>

<p>Zuerst etwas Hintergrund zu ssh.  Ssh erlaubt Personen, sich auf
eine sichere Weise auf entfernten Rechnern einzuloggen.  Dabei werden
keine Passwörter im Klartext übertragen und bei späteren Verbindungen
zum gleichen Rechner ist sichergestellt, dass es der gleiche Rechner
ist.  Dieses verhindert viele "Mann-in-der-Mitte"-Angriffe.

<p>Eine Fähigkeit, die SSH mitbringt, besteht in der Möglichkeit eines
Benutzers, den öffentlichen Identitätschlüssel (public key) eines Benutzers
auf einer anderen Maschine zu nehmen und auf dem eigenen Rechner zu einer
Datei autorisierter Schlüssel hinzuzufügen.  Voreingestellt ist, dass der
Benutzer der anderen Maschine (der den privaten Identitätschlüssel hat, der
zu dem öffentlichen passt) von da an die Privilegien genießt, sich unter
Ihrem Account einzuloggen.  Es ist jedoch möglich, Text zu dem
autorisierten Schlüssel hinzuzufügen, der den Zugang des anderen Benutzers
beschränkt.

<p>Um den Spiegel zu schützen, ist dem Schlüssel vom höhergelegenen Spiegel
Text hinzugefügt, so dass die Person, die dadurch Zugang zum Spiegel erhält
nur eines darf - das Programm auf Ihrem Rechner zu starten, das den Spiegel
aktualisiert.  Selbst wenn jemand (ein böser dritter) in der Lage sein
sollte, den Schlüssel zu knacken, könnte er nur das Spiegel-Programm auf
Ihrem Rechner starten.  Sie müssen Sich keine Gedanken darüber machen, dass
das Programm mehrfach parallel läuft, da es eine Lock-Datei verwendet.

<p>Auf der anderen Seite des Servers kann rsync so konfiguriert werden, dass
beschränkt wird, wer einen bestimmten Bereich spiegeln darf, geschützt mit
Benutzername und Passwort.  Diese sind komplett unabhängig von
<kbd>/etc/passwd</kbd>, so dass ein Push-Spiegel sich keine Sorgen darüber
machen muss, anderen Zugang zum Rechner zu geben.  Es ist so konfiguriert,
dass Benutzername und Passwort im Klartext übertragen werden.  Das sollte
jedoch kein Problem sein, da das Schlimmste, das passieren kann, darin
besteht, dass ein Dritter die Möglichkeit erhält, Debian von dem Rechner zu
spiegeln.


<h2>Aufsetzen eines Push-Client-Spiegels</h2>

<p>Am besten wird es so eingerichtet, dass der Account eines herkömmlichen
Benutzers verwendet wird, nicht root.  Der Inhalt des öffentlichen
SSH-Schlüssels, der Ihnen vom höhergelegenen Spiegel gegeben wird, sollte
in <kbd>~&lt;user&gt;/.ssh/authorized_keys</kbd> abgelegt werden.

<p>Um ein Push-Spiegel für das FTP-Archiv zu werden, benötigen Sie die
Dateien <a href="ftpsync">ftpsync</a> und <a
href="ftpsync.conf">ftpsync.conf</a>.  Bearbeiten Sie ftpsync.conf und
folgen Sie den Anweisungen in der Datei unter Verwendung der Informationen,
die Ihnen vom höhergelegenen Spiegel gegeben wurden.

<p>Um ein Push-Spiegel für das non-US FTP-Archiv zu werden, benötigen Sie
die Dateien <a href="ftpsync-non-US">ftpsync-non-US</a> und <a
href="ftpsync-non-US.conf">ftpsync-non-US.conf</a>.  Die Dateien haben
andere Namen, so dass Sie den gleichen Account für beide Archive verwenden
können.

<p>Um ein Push-Spiegel für die Webseiten zu werden, benötigen Sie die
Dateien <a href="websync">websync</a> und <a
href="websync.conf">websync.conf</a>.  Bearbeiten Sie websync.conf und
folgen Sie den Anweisungen in der Datei unter Verwendung der Informationen,
die Ihnen vom höhergelegenen Spiegel gegeben wurden.


<h2>Primäre Push-Spiegel</h2>

<p>Primäre Push-Spiegel, die auch als Tier-1-Spiegel bezeichnet werden,
sind die Push-Spiegel, denen es gestattet ist, von unserem Haupt-Archiv zu
spiegeln.

Wenn Ihr Server <strong>sehr</strong> gut angebunden ist (sowohl sehr
gute Bandbreite hat als auch an wichtige Backbones angeschlossen
ist) und Sie willens sind, andere Server von Ihrem spiegeln zu lassen,
möchten Sie uns das vielleicht mitteilen, damit wir überlegen können,
Ihren Rechner als Push-Server zu verwenden.  Erwarten Sie dieses
jedoch bitte nicht in naher Zukunft, da wir bereits eine relativ
große Zahl an Tier-1-Spiegeln haben.

<p>Wenn Ihr Rechner ein primärer Push-Spiegel für das FTP-Archiv wird,
benötigen Sie den öffentlichen ssh-Schlüssel für
archvsync@ftp-master.debian.org, entweder die
<a href="identity.pub.master.ftp">SSH1</a> oder die
<a href="id_rsa.pub.ftp-master">SSH2</a> Version.</p>

<p>Wenn Ihr Rechner ein primärer Push-Spiegel für das non-US FTP-Archiv wird,
benötigen Sie den öffentlichen ssh-Schlüssel für archvsync@non-us.debian.org,
entweder die <a href="identity.pub.non-US.ftp">SSH1</a> oder die
<a href="id_rsa.pub.non-US">SSH2</a> Version.</p>

<p>Wenn Ihr Rechner ein primärer Push-Spiegel für die Webseiten wird,
benötigen Sie den öffentlichen ssh-Schlüssel für
archvsync@www-master.debian.org, entweder die
<a href="identity.pub.master.web">SSH1</a> oder die
<a href="id_dsa.pub.www-master">SSH2</a> Version.</p>


<h2>Einrichten eines Push-Server-Spiegels</h2>

<p>Angesichts der großen Anzahl von Spiegeln und der Größe des
Debian-Archivs ist es nicht machbar, dass alle Spiegel das Haupt-Archiv als
Quelle nehmen.  Es ist viel effizienter, die Last auf die Anzahl der
Push-Spiegel zu verteilen, die über den Globus verteilt sind.

<p>Push-Spiegel sollten direkt das Hauptarchiv per Push-Spiegel
spiegeln (oder einen anderen Push-Server) und sie sollten das gesamte
Debian-Archiv enthalten.

<p>Lesen Sie auch die <a href="push_server">Details zum Einrichten eines Push-Servers</a>.
