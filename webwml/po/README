
     !!!WARNING!!!
  Some experimental features are tested under the /po/ subdirectory.
  Do not use them to build official pages.
     !!!WARNING!!!

 A.  Directory tree:
 ===================

  template/debian/    Modified templates files
  po-files/           PO files for each language
     po-files/templates.xx.po
                      PO files used in the templates.
     po-files/ports.xx.po
     		      PO files related to the ports' section.
		      
     po-files/<domain>.xx.mo
                      Files generated by msgfmt and installed under
                      ../locale/xx/LC_MESSAGES/<domain>.mo
  ../locale/xx/LC_MESSAGES/templates.mo
                      Generated files, needed by WML to retrieve
                      translated strings
  scripts/wml2po.pl   Script to extract PO files from original templates
  scripts/wmlconvert.pl
                      Convert original templates to use <gettext>
  scripts/wmlxgettext.pl
                      Script generating templates.pot from new templates

 B.  Convert templates files into new format
 ===========================================

  Currently templates files are localized via slices; this is called the
  original format.  In the new format, translations are removed from
  templates and put in GMO (see gettext(1)) files.  Translatable strings
  are surrounded by <gettext>...</gettext> in order to help automation.

  Here are the steps I performed when importing files into CVS:
    1. Copy exiating files under template/debian/
         rm -rf template/debian/
         cp -a ../english/template/debian template/
    2. Extract translations:
         make init-po
       This will create po-files/templates.*.po
    3. Add encoding charset information inside po-files/templates.*.po
         make fix-po
    3. Convert templates into new format
         make convert-templates
  and that's all.

  These steps have already been performed on po/english/template/debian/
  and CVS contains modified files.

 C.  Manage PO files
 ===================

  During previous stage, initial PO files have been created into
  po-files/templates.*.po
  Every translator team should (not now, but when this scheme is used)
  put useful informations in header section (i.e. the first msgstr).

  Translators are responsible for their po-files/templates.XX.po file.

  The following commands regenerate ../locale/xx/LC_MESSAGES/templates.mo
  if needed:
         make pot
         make update-po
         make mo
         make install-mo

 D.  Build
 =========

   You must add a line
     -I po/template
   *after*
     -I english/template
   into your webwml/<lang>/.wmlrc so that new templates are loaded
   instead of old ones.
   DO NOT COMMIT THESE MODIFIED .WMLRC FILES OR BUILD WILL BE BROKEN

 E.  Caveats
 ===========

   * How to setup rules in Makefiles to fulfill dependencies?

 F.  More
 ========

   Questions?  Ideas?  Suggestions?
   Please send an email to <debian-www@lists.debian.org>.

21 June 2002
Denis Barbier <barbier@debian.org>
