#use wml::debian::template title="Speglingar av Debians webbplats"
#use wml::debian::translation-check translation="1.27"
#use wml::debian::toc
#include "$(ENGLISHDIR)/mirror/webmirrors.data"

<toc-display/>

<hrline>

<toc-add-entry name="list">Lista över webbspeglingar</toc-add-entry>

<p>Det finns speglingar av Debians webbplats i följande länder:

<p><webmirrors>

<p>Om ditt land inte listas, och du vill sponsra en spegel, ber vi dig
kontakta oss.
Om ditt land redan är listat finns det med största sannolikhet
<strong>inget behov</strong> av en ytterligare spegel.
Normalt <strong>uppmuntrar vi inte</strong> att nya speglingar av Debians
webbplats läggs upp.

<toc-add-entry name="whynot">Varför vi inte har behov av fler
webbspeglar</toc-add-entry>

<p>Våra webbplatsspeglar kräver underhåll (något mer än ftp-platsspeglarna,
faktiskt, eftersom du måste ändra Apaches konfigurationsfiler lite då och då)
och kostar sponsorn resurser.
Hur som helst, på grund av webbsidornas natur, vilka du inte behöver hämta
regelbundet, och för vilka det inte gör så mycket om de kommer fram med 2kbit/s
eller 30kbit/s eftersom de är relativt små, uppkommer frågan om det är
användbart att ha många webbplatsspeglar.

<p>Det fanns tider när Internetanslutningarna i olika delar av världen inte
var snabba, och det var smärtfullt och betydligt långsammare att hämta
www.debian.org från en annan kontinent på en normal modemanslutning.
Därför började vi spegla, varpå flera webbplatsspeglar startades.
Tio (eller elva, om du räknar Turkiet) av dem finns i Europa.

<p>Idag, däremot, har vi blixtsnabba nätverkskopplingar, speciellt i Europa,
så det finns knappast något behov för så här många speglar.
Faktum är att det inte ens är långsamt att ansluta till www.debian.org från
Europa längre, på grund av att hastigheten på nätverkslänkarna mellan
Europa och Amerika har ökats.

<p>Det är i stort sett därför vi inte behöver några ytterligare
webbplatsspeglar, speciellt inte på kontinenter där det redan finns speglar.
Vi ber dig respektera våra önskemål, och tackar dig för din samarbetsvilja.

<p>Om du har frågor, sänd ett brev till
<a href="mailto:mirrors@debian.org">mirrors@debian.org</a>.

<hrline>

<p><strong>Informationen nedan ges bara som referens till ansvariga för
existerande speglingar.</strong>

<hrline>

<toc-add-entry name="how">Speglingsprocessen</toc-add-entry>

<p>
Den rekommenderade metoden för att spegla är via rsync.
Det finns ingen anonym åtkomst till webbplatsfilerna.
Du kan sätta upp autentiserad åtkomst med ansvariga för den du önskar spegla
från, sänd e-post till
<a href="mailto:mirrors@debian.org">mirrors@debian.org</a>.

<p>Speglingen är en "pull"-process, dvs. klienten ber om data från servern
när de önskar.
För att ställa in detta kan du använda
<a href="websync">websync-skriptet</a> och
<a href="websync.conf">dess konfigurationsfil</a>, vilken kan köras från
crontab, och som kommer att utföra allting automatiskt.
Följ beskrivningarna i skriptet för att se till att allting fungerar
korrekt.

<h3>Spegla från en "push"-spegling</h3>

<p>
"Push"-spegling är en form av spegling med rsync vi har utvecklat
som minimerar tiden det tar för ändringar i huvudarkivet att nå speglingarna.
Den servande spegeln använder en utlösarmekanism för att informera
klientspeglingen om att den måste uppdateras.
Vissa spegeladministratörer har uppvisat viss motvillighet mot att
använda denna typ av spegling på grund av oro för att metoden öppnar deras
maskin för intrång, något som <strong>inte</strong> är sant.

<p>
För en mer utförlig beskrivning av hur det fungerar, varför det är
säkert, och hur man sätter upp en "push"-spegling, se
<a href="push_mirroring">den kompletta förklaringen</a>.

<h3>När du bör spegla</h3>

<p>Huvudwebbplatsen byggs om var sjätte timme.

<p>Om din plats blir "push"-speglad behöver du inte oroa dig om detta.
Om inte bör du beräkna speglingstiden för din plats från tidsstämplningarna
på filerna i katalogen <code>/mirror/timestamps/</code> på webbspegeln.
Lägg till en viss tid, säg en halvtimme, till den tiden och spegla då.

<p>Det enklaste sättet att automatiskt köra spegeln varje dag är att använda
cron.
Se <kbd>man crontab</kbd> för detaljer.

<toc-add-entry name="sponsor">Annonsera spegelns sponsor</toc-add-entry>

<p>Filerna <code>sponsor.html</code> och <code>sponsor_img.jpg</code>
kan, och bör, ersättas av dig.
De är till för att du ska kunna annonsera din webbplats så att folk vet vem
som är sponsorn.
Originalen finns i <code>sponsor.deb.html</code> och
<code>sponsor.deb.jpg</code>, eftersom platsen du
speglar kan ha ersatt exemplen som kom från Debian.
Föreslagen maxstorlek för din logotyp är 120x60.

<p>Eftersom "<a href="#cn">content negotiation</a>" används på webbsidorna
för att välja språk, kan du till och med göra <code>sponsor.html</code>
tillgänglig på
olika språk.
För att göra detta skapar du helt enkelt sponsor.&lt;språk&gt;.html för
varje &lt;språk&gt; du önskar.

<p>Se till att du lägger in alla filer du inte vill skall skrivas över
till speglingens exkluderingsfil.

<toc-add-entry name="configure">Konfigurera webbservern</toc-add-entry>

<h3>Diverse webbserverinställningar</h3>

<p>Om din maskin kör Debian, så har vi valt att bryta mot Debianpolicyn och
använda <code>/doc</code> bland webbsidorna.
Detta betyder att du måste kommentera ut
raden "<code>Alias /doc/ /usr/doc/</code>" från din
<code>/etc/apache/srm.conf</code>-fil.

<p>Observera:
Alla våra CGI-skript körs centralt på cgi.debian.org, så du behöver inte
oroa dig för dem.

<h3><a name="cn">Content negotiation</a></h3>

<p>
"Content negotiation" är ett sätt att låta webbläsaren förhandla fram vilken
sorts dokument som skall hämtas från servern.
Det finns flera olika användningsområden för detta, men det mest använda är
att förhandla fram vilket språk ett dokument skall visas med.
Genom att använda detta kan Debian visa sina webbsidor på flera språk på ett
(tekniskt) väldigt elegant sätt.

<P>För de som använder Apache är inställningen nästan trivial.
Lägg helt enkelt till denna inställning:

<pre>
Options +Multiviews   
</pre>

<p>i <code>&lt;Directory&gt;</code>-delen för Debians webbplats i din
<kbd>/etc/apache/access.conf</kbd>
och starta om servern.


<p>
Dessutom måste du se till att servern kan hantera alla språk som används på
webbplatsen.
Detta görs genom att använda <kbd>AddLanguage</kbd>.
Här följer en lista över de språk som används nu - men var beredd på att
lägga in fler senare:

<pre>
  AddLanguage en .en
<:
foreach $l (keys %langs) { push @codes, $langs{$l}; }
foreach $c (sort @codes) { print "  AddLanguage $c .$c\n" if (($c ne "en") && ($c ne "zh")); }
:>  \
  AddLanguage zh-CN .zh-cn
  AddLanguage zh-HK .zh-hk
  AddLanguage zh-TW .zh-tw
</pre>

<p>På grund av ett fel i Apache kan fel språk sändas ut från servern under
vissa omständigheter, varför det är det en bra idé att lägga in alla språk i
LanguagePriority-inställningen, enligt vad som följer:

<pre>
<:
print "LanguagePriority en fr es ";
foreach $c (sort @codes) { print "$c " if (($c ne "en") && ($c ne "fr") && ($c ne "es") && ($c ne "zh")); }
print "zh-CN zh-HK zh-TW\n";
:>\
</pre>

<p>För att undvika att filer som sänds via "content negotiation" sänds med
fel teckenuppsättning, se till att
<code>AddDefaultCharSet</code>-inställningen antingen är utkommenterad,
eller satt till "<code>Off</code>".

<p>För att hantera indexfiler i kataloger korrekt måste du antagligen
modifiera <code>DirectoryIndex</code>-posten i
<code>/etc/apache/srm.conf</code>.
Följande bör räcka:

<pre>
DirectoryIndex index index.html
</pre>

<h3>Omdirigeringar</h3>

<p>Eftersom vissa delar av webbplatsen börjar bli för stora för att speglas
av de flesta av platserna har vi delat av dem från huvudwebbplatsen.
Trots att de flesta länkar bör ha korrigerats så att de använder de nya
platserna ser vi gärna att du lägger till en omdirigering till de nya
adresserna, så att inga länkar slutar fungera.
Detta kan göras i <kbd>/etc/apache/srm.conf</kbd> så här:

<pre>
Redirect /Lists-Archives http://lists.debian.org/
Redirect /search http://search.debian.org
Redirect /Packages http://packages.debian.org
Redirect /lintian http://lintian.debian.org
</pre>
