#use wml::debian::template title="Configurare un mirror FTP"
#use wml::debian::translation-check translation="1.20"

<p>La procedura di mirroring è identica per siti <a
href="official">ufficiali</a> e non ufficiali.

<p>Una volta che il mirror è configurato dovrebbe essere 
<a href="submit">registrato con Debian</a>
in modo da essere incluso nella <a href="../misc/README.mirrors">lista
dei mirror</a>.
Le sottomissioni possono essere fatte usando il nostro 
<A href="submit">semplice modulo web</a>.

<p>Ogni problema o domanda può essere inviata a 
<A href="mailto:mirrors@debian.org">mirrors@debian.org</A>.</p>

<ul>
  <li><a href="#wherefrom">Da dove copiare i dati</a></li>
  <li><a href="#methods">metodi di mirroring</a></li>
  <li><a href="#partial">mirroring parziale</a></li>
  <li><a href="#when">Quando copiare i dati</a></li>
  <li><a href="#settings">Altri parametri che raccomandiamo</a></li>
</ul>

<h2><a name="wherefrom">Da dove copiare i dati</a></h2>

<p>Molte persone credono che <code>ftp.debian.org</code> sia il posto migliore
dal quale scaricare tutti i pacchetti per creare un mirror.
Questo <strong>non è vero</strong>.
<code>ftp.debian.org</code> è semplicemente uno dei vari server internazionali
che vengono aggiornati da un altro server Debian.</p>

<p>Uno qualsiasi dei server nell'<a href="mirrors_full">elenco completo dei
mirror</a> che è segnato come '<kbd>Type: Push-Primary</kbd>' è buono da
utilizzare come fonte.</p>

<p>Per te, non dovrebbe esserci alcuna differenza tra tutti i server
dichiarati mirror <em>Push-Primary</em>. D'altro canto, se molte poersone
utilizzano ftp.debian.org (e, sofrtunatamente, lo fanno), questo spreca
la banda donataci.</p>

<H2>Metodi di mirroring</H2>

<p>Il metodo raccomandato di mirroring è usare rsync.

<p>Nota: mentre <kbd>wget</kbd> lavora bene per copiare piccoli siti,
non è flessibile come rsync o 'mirror', per cui non è raccomandato
per questo compito.

<h3>Rsync anonimo</h3>

<p>Puoi usare <a href="anonftpsync">questo script</a> per copiare
l'archivio.
Segui le direttive dello script per configurare il mirroring.

<h3>Rsync con autenticazione, da un push mirror</h3>

<p>Il push mirroring è un tipo di
mirroring con rsync che abbiamo sviluppato per minimizzare il tempo
richiesto perché le modifiche all'archivio raggiungano i mirror.
Il server mirror usa una procedura ssh per dire al client mirror di
aggiornarsi.

<p>Questo metodo è abbastanza sicuro in quanto ssh è configurato
per lanciare un unico comando. Inoltre il mirroring è ancora di
tipo `pull', cosìcché <strong>non</strong> è possibile
corrompere il contenuto dell'archivio usando un falso
push mirror.
Alcuni amministratori di mirror hanno qualche riluttanza a usare
questo metodo di mirroring per paura di aprire le propria macchina
a intrusioni. Questo è semplicemente <strong>falso</strong>.

<p>Per una spiegazione più dettagliata di come il metodo lavora, perché 
è sicuro, e come configurare un push mirror, leggi 
<a href="push_mirroring">la spiegazione completa</a>.

<h3>FTP anonimo usando 'mirror'</h3>

<p>L'Anonymous FTP è stato il metodo standard di mirroring per lungo
tempo. Per questo il programma 'mirror' lavora bene con l'archivio
Debian. Come probabilmente immagini, 'mirror' è disponibile come
pacchetto Debian. Se hai installato il paccetto Debian, 
c'è un semplice script per copiare l'archivio ftp in
/etc/mirror/packages/ftp.debian.org .

<h2><a name="partial">Mirroring parziale</a></h2>

<p>Considerate le dimensioni già grandi dell'archivio Debian,
qualcuno preferisce copiare solo le parti di esso di cui hanno bisogno.
Per questo, occorrono script scritti appositamente, come quelli di
<a href="http://cvs.kitenet.net/~checkout~/joey-cvs/bin/debmirror?tag=HEAD&amp;content-type=text/plain">
Joey Hess</a> e
<a href="http://people.debian.org/~absurd/">Stephan Suerken</a>. 
Se pensi di aggiungere qualcosa ad essi, contatta gli autori (le
informazioni di contatto dovrebbero essere incluse negli script
stessi).

<h2><a name="when">Quando copiare</a></h2>

<p>L'archivio principale vien aggiornato ogni 24 ore.

<p>Se il tuo sito e' un push mirror, non hai bisogno di preoccuparti di
questo.
Altrimenti, se scegli di copiare con rsync, dovresti dare una occhiata
a <kbd>project/trace/</kbd> 
nell'archivio Debian del sito mirror per un file con lo stesso nome 
di quel sito. Il file dovrebbe contenere l'ora alla quale l'ultima
copia è terminata. Aggiungi un po' di tempo, diciamo 1 ora, a
quell'orario e fai partire la copia a quell'ora.

<p>La maniera più semplice di avere la copia automatica ogni giorno 
è usare cron. Vedi <kbd>man crontab</kbd> per dettagli.

<h2><a name="settings">Configurazioni aggiuntive raccomandate</a></h2>

<p>Se vuoi rendere il mirror Debian disponibile via HTTP, aggiungi
le istruzioni seguenti alla tua configurazione di Apache (presumendo
ovviamente, che usi Apache) per gli indici delle directory:

<pre>
&lt;directory /org/ftp.debian.org/ftp&gt;
   IndexOptions NameWidth=* +SuppressDescription
   DirectoryIndex .
&lt;/directory&gt;
</pre>

<p>(sostituisci <code>/org/ftp.debian.org/ftp</code> col nome della
directory dove mantieni il mirror)
