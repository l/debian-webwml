#use wml::debian::template title="Configurare un mirror FTP"
#use wml::debian::toc
#use wml::debian::translation-check translation="1.27" maintainer="Giuseppe Sacco"

<p>La procedura di mirroring è identica per siti <a
href="official">ufficiali</a> e non ufficiali.

<p>Una volta che il mirror è configurato dovrebbe essere 
<a href="submit">registrato con Debian</a>
in modo da essere incluso nella <a href="list">lista
dei mirror</a>.
Le sottomissioni possono essere fatte usando il nostro 
<A href="submit">semplice modulo web</a>.

<p>Ogni problema o domanda può essere inviata a 
<A href="mailto:mirrors@debian.org">mirrors@debian.org</A>.</p>

<toc-display/>

<toc-add-entry name="wherefrom">Da dove copiare i dati</toc-add-entry>

<p>Molte persone credono che <code>ftp.debian.org</code> sia il posto migliore
dal quale scaricare tutti i pacchetti per creare un mirror.
Questo <strong>non è vero</strong>.
<code>ftp.debian.org</code> è semplicemente uno dei vari server internazionali
che vengono aggiornati da un altro server Debian.</p>

<p>Uno qualsiasi dei server nell'<a href="list-full">elenco completo dei
mirror</a> che è segnato come '<kbd>Type: Push-Primary</kbd>' è buono da
utilizzare come fonte.</p>

<p>Per te, non dovrebbe esserci alcuna differenza tra tutti i server
dichiarati mirror <em>Push-Primary</em>. D'altro canto, se molte poersone
utilizzano ftp.debian.org (e, sofrtunatamente, lo fanno), questo spreca
la banda donataci.</p>

<toc-add-entry name="methods">Metodi di mirroring</toc-add-entry>

<p>Il metodo raccomandato di mirroring è usare rsync.

<p>Nota: mentre <kbd>wget</kbd> lavora bene per copiare piccoli siti,
non è flessibile come rsync o 'mirror', per cui non è raccomandato
per questo compito.

<h3>Rsync anonimo</h3>

<p>Puoi usare <a href="anonftpsync">questo script</a> per copiare
l'archivio.
Segui le direttive dello script per configurare il mirroring.

<h3>Rsync con autenticazione, da un push mirror</h3>

<p>Il push mirroring è un tipo di
mirroring con rsync che abbiamo sviluppato per minimizzare il tempo
richiesto perché le modifiche all'archivio raggiungano i mirror.
Il server mirror usa una procedura ssh per dire al client mirror di
aggiornarsi.

<p>Il mirror di tipo push è necessario per mantenere vari server in sincrono
(come per i server in round robin sul DNS, come <tt>ftp.us.debian.org</tt>),
a normalmente li usiamo come mirror di primo e secondo livello.
Per mirror "normali" questo metodo è sconsigliato poiché lo sforzo necessario
per attivarlo e configurarlo è decisamente superiore di quello necessario per
avere un job cron ben fatto.</p>

<p>Questo metodo è abbastanza sicuro in quanto ssh è configurato
per lanciare un unico comando. Inoltre il mirroring è ancora di
tipo `pull', cosìcché <strong>non</strong> è possibile
corrompere il contenuto dell'archivio usando un falso
push mirror.
Alcuni amministratori di mirror hanno qualche riluttanza a usare
questo metodo di mirroring per paura di aprire le propria macchina
a intrusioni. Questo è semplicemente <strong>falso</strong>.

<p>Per una spiegazione più dettagliata di come il metodo lavora, perché 
è sicuro, e come configurare un push mirror, leggi 
<a href="push_mirroring">la spiegazione completa</a>.

<h3>FTP anonimo usando 'mirror'</h3>

<p>L'Anonymous FTP è stato il metodo standard di mirroring per lungo
tempo. Per questo il programma 'mirror' lavora bene con l'archivio
Debian. Come probabilmente immagini, 'mirror' è disponibile come
pacchetto Debian. Se hai installato il paccetto Debian, 
c'è un semplice script per copiare l'archivio ftp in
/etc/mirror/packages/ftp.debian.org .

<toc-add-entry name="partial">Mirroring parziale</toc-add-entry>

<p>Utilizzando <a href="anonftpsync">anonftpsync</a> si può modificare
la variabile EXCLUDE. Si possono anche utilizzare degli script appositi quali
<a href="http://packages.debian.org/unstable/net/debmirror.html">debmirror</a>
(di Joey Hess e Joerg Wendland) o
<a href="http://people.debian.org/~absurd/absurd_debmirror/">\
absurd_debmirror</a> (di Stephan Suerken).
Se pensi di aggiungere qualcosa ad essi, contatta gli autori (le
informazioni di contatto dovrebbero essere incluse negli script
stessi).

<p>Scoraggiamo fortemente di escludere le directory <tt>project/</tt>,
<tt>doc/</tt> e altre sottodirectory. Normalmente esse sono di dimensioni
modeste e molto utili agli utenti.<p>

<toc-add-entry name="when">Quando copiare</toc-add-entry>

<p>L'archivio principale vien aggiornato ogni 24 ore.

<p>Se il tuo sito e' un push mirror, non hai bisogno di preoccuparti di
questo.
Altrimenti, se scegli di copiare con rsync, dovresti dare una occhiata
a <kbd>project/trace/</kbd> 
nell'archivio Debian del sito mirror per un file con lo stesso nome 
di quel sito. Il file dovrebbe contenere l'ora alla quale l'ultima
copia è terminata. Aggiungi un po' di tempo, diciamo 1 ora, a
quell'orario e fai partire la copia a quell'ora.

<p>La maniera più semplice di avere la copia automatica ogni giorno 
è usare cron. Vedi <kbd>man crontab</kbd> per dettagli.

<toc-add-entry name="settings">Configurazioni aggiuntive raccomandate</toc-add-entry>

<p>Se vuoi rendere il mirror Debian disponibile via HTTP, aggiungi
le istruzioni seguenti alla tua configurazione di Apache (presumendo
ovviamente, che usi Apache) per gli indici delle directory:

<pre>
&lt;directory /org/ftp.debian.org/ftp&gt;
   IndexOptions NameWidth=* +SuppressDescription
   DirectoryIndex .
&lt;/directory&gt;
</pre>

<p>(sostituisci <code>/org/ftp.debian.org/ftp</code> col nome della
directory dove mantieni il mirror)
