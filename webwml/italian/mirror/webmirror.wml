#use wml::debian::template title="Mirror del sito web Debian"
#use wml::debian::toc
#include "$(ENGLISHDIR)/mirror/webmirrors.data"
#use wml::debian::translation-check translation="1.47" maintainer="Giuseppe Sacco"

<toc-display />

<toc-add-entry name="whynot">Perché non ci servono altri mirror web</toc-add-entry>

<p>I nostri mirror web richiedono manutenzione (un po' più dei
mirror del sito FTP, dal momento che occorre modificare
i file di configurazione di Apache ogni tanto) e pesa sulle risorse
degli sponsor. Tuttavia, grazie alla natura delle pagine web, che non
richiedono download regolari e per le quali non devi preoccuparti molto
se caricano a 2kbps o a 30kbps, dal momento che sono piuttosto piccole,
si pone il dubbio se avere molti mirror del sito web sia utile.
</p>

<p>Una volta le connessioni Internet nel mondo non erano
veloci, e ad esempio, consultare www.debian.org da un altro continente
è penoso e molto più lento di una tipica connessione modem.
Per questo abbiamo organizzato il mirroring e vari mirror del sito
web sono stati attivati. Dieci (o undici, se contiamo la
Turchia) di essi sono in Europa.
</p>

<p>Tuttavia, oggigiorno si stanno diffondendo i collegamenti di rete veloci,
soprattutto in Europa, così difficilmente c'è bisogno di molti
mirror. Di fatto, grazie alla accresciuta velocità dei collegamenti
tra Europa e America, non è così lento accedere a www.debian.org 
anche dall'Europa.
</p>

<p>Questo è la ragione di fondo per cui non ci occorrono nuovi mirror
del sito web, soprattutto non in continenti dove già sono attivi
dei mirror. Rispetta la nostra decisione. Grazie per la cooperazione.
</p>

<p>Se hai domande, invia una mail a 
<a href="mailto:mirrors@debian.org">mirrors@debian.org</a>.
</p>

<hrline />

<toc-add-entry name="ref">Riferimento ai mirror esistenti</toc-add-entry>

<p><strong>Le informazioni che seguono sono fornite solo per riferimento
ai manutentori dei mirror esistenti. </strong>
</p>


<h3>Processo di mirroring</h3>

<p>Il metodo di mirroring raccomandato è via rsync. Non c'è accesso
anonimo ai file del sito web. Puoi configurare l'accesso autenticato
con l'amministratore del sito da dove vuoi effetturare la copia,
inviando una mail a <a href="mailto:mirrors@debian.org">mirrors@debian.org</a>.
</p>

<p>Il mirroring è un processo di tipo <q>pull</q>, cioè il client richiede i
dati dal server in base alla propria convenienza. Per la configurazione,
puoi usare
<a href="websync">lo script websync</a> e <a href="websync.conf">il suo
file di configurazione</a>, 
che puoi lanciare via crontab, e farà tutto automaticamente.
Segui le direttive nello script per essere sicuro
che ogni cosa funzioni correttamente.</p>


<h4>Mirroring da un push mirror</h4>

<p>Il push mirroring è una forma di mirroring che usa rsync 
che abbiamo sviluppato per minimizzare il tempo necessario
perchè le modifiche all'archivio raggiungano i mirror.
Il server mirror usa un attivatore ssh per dire al client mirror
di aggiornarsi.</p>

<p>Questo metodo è abbastanza sicuro in quanto ssh è configurato
per lanciare un unico comando. Inoltre, il mirroring è ancora
di tipo <q>pull</q> per cui <strong>non</strong> è possibile corrompere
il contenuto dell'archivio usando un push mirror contraffatto.
Alcuni amministratori di mirror hanno mostrato qualche riluttanza
nell'impiego di questo metodo di mirroring per paura che tale metodo
esponga le proprie macchine a intrusioni.</p>

<p>Questo semplicemente <strong>non</strong> è vero.</p>

<p>Per una descrizione più dettagliata di come tutto questo funziona, perchè
è sicuro, e come configurare un push mirror, leggi 
<a href="push_mirroring">la spiegazione completa</a>.</p>


<h3>Quando copiare</h3>

<p>Il sito principale viene aggiornato ogni quattro ore circa.</p>

<p>Se il tuo sito è del tipo push mirror, non occorre che ti preoccupi
di questo. Altrimenti, dovresti calcolare il tempo di mirroring
per il tuo sito in accordo alla data e ora nei file timestamp nella directory
<code>/mirror/timestamps/</code> del sito web che devi copiare. 
Aggiungi un po' di tempo, diciamo mezz'ora, a quell'orario e effettua
il mirroring da quel momento.</p>

<p>Il modo più semplice per lanciare la copia tutti i giorni
è utilizzare cron. Vedi <kbd>man crontab</kbd> per i dettagli.</p>


<h3>Pubblicizzare lo sponsor del mirror</h3>

<p>Se lo si desidera, si pu&ograve; sostituire l'immagine <code>sponsor_img.jpg</code> 
con un (non eccessivo) logo della societ&agrave; o organizzazione, e
fare in modo che <code>sponsor.html</code> ridiriga alla propria
pagina principale.
Normalmente questi due file non sono mirrorati.
Gli originali sono
chiamati <code>sponsor.deb.html</code> e <code>sponsor.deb.jpg</code> e
andrebbero sostituiti con quelli specifici per il mirror.
La dimensione massima suggerita per il tuo logo è 120x60.</p>

<p>Dal momento che <a href="#cn">la negoziazione dei contenuti</a> 
è usata sulle pagine web per selezionare la lingua preferita,
potresti anche fornire <code>sponsor.html</code> in diverse lingue. 
Per fare questo crea semplicemente
sponsor.&lt;lang&gt;.html per ogni &lt;lang&gt; che vuoi.
</p>

<p>
Assicurati di aggiungere qualsiasi file non vuoi che venga sovrascritto
alla lista delle esclusioni per il mirroring.
</p>


<h3>Configurazione del server web</h3>


<h4>Modifiche varie del server web</h4>

<p>Se sulla tua macchina gira Debian, si è deciso di violare
la politica Debian e usare <code>/doc</code> nelle pagine web.
Questo significa che dovresti commentare la riga <q><code>Alias /doc/
/usr/share/doc/</code></q> nel tuo file <code>/etc/apache/srm.conf</code>.
</p>

<P>Nota: 
Tutti i nostri script CGI sono lanciati centralmente su cgi.debian.org,
così non devi preoccuparti di essi.
</p>


<h3><a name="cn">Negoziazione del Contenuto</a></h3>

<p>
La Negoziazione di Contenuto è un metodo che consente a un browser
di negoziare con il server il tipo di documento che dovrebbe
essere da questo fornito. Sebbene ci siano una serie di utilizzi di 
questa opzione,
la cosa più comune è la negoziazione di quale lingua deve essere
utilizzata. Usarla consentirà a Debian di forinire le sue pagine
in lingue multiple in una modalità (tecnicamente) molto elegante.
</p>

<P>Per quelli che usano Apache, la modifica è abbastanza banale.
Semplicemente aggiungi questa opzione:
</p>

<pre>
Options +Multiviews   
</pre>

<p>alla sezione<code>&lt;Directory&gt;</code> 
per le pagine web Debian nel tuo file
<kbd>/etc/apache/access.conf</kbd>, e fai ripartire il server.
</p>

<p>
In aggiunta, occorre che ti assicuri che il server possa gestire
tutte le lingue che saranno sul sito web. Questo vien fatto usando
la direttiva <kbd>AddLanguage</kbd>. 
Quella che segue è una lista di quei linguaggi che sono già in uso - 
aspettati di doverne aggiungere altri più in là:
</p>

<pre>
  AddLanguage en .en
<:
foreach $l (keys %langs) { push @codes, $langs{$l}; }
foreach $c (sort @codes) { print "  AddLanguage $c .$c\n" if (($c ne "en")
&& ($c ne "zh")); }
:>  \
  AddLanguage pt-br .pt
  AddLanguage nb .nb
  AddLanguage zh-CN .zh-cn
  AddLanguage zh-HK .zh-hk
  AddLanguage zh-TW .zh-tw
</pre>

<p>A causa di un errore in Apache la lingua sbagliata può essere
selezionata in alcune circostanze, così è una buona idea aggiungere
ogni lingua alla opzione LanguagePriority, in questo modo:

<pre>
<:
print "LanguagePriority en fr es ";
foreach $c (sort @codes) { print "$c " if (($c ne "en") && ($c ne "fr") && ($c ne "es") && ($c ne "zh")); }
print "pt-br nb zh-CN zh-HK zh-TW\n";
:>\
</pre>

<p>Per evitare di fornire file a contenuto negoziato con
il charset sbagliato, assicurati che l'indicazione
<code>AddDefaultCharSet</code>  sia commentata
o configurata a <q><code>Off</code></q>.
</p>

<p>
Se si usa apache 1, per fornire gli indici dei file delle directory
correttamente, avrai bisogno di modificare la voce
<code>DirectoryIndex</code>  in
<code>/etc/apache/srm.conf</code>.Questo per&ograve; non funziona
con apache 2. Quanto segue dovrebbe bastare per apache 1:
</p>

<pre>
DirectoryIndex index index.html
</pre>

<p>Apache deve essere istruito per mandare il Content-type corretto
di favicon.ico che è image/x-icon:</p>

<pre>
AddType image/x-icon .ico
</pre>

<p>Per inviare l'intestazione contenente il corretto Context-Type per RSS, Apache
deve essere istruito all'uso del tipo application/rss+xml, cos&igrave;:

<pre>
AddType application/rss+xml .rdf
</pre>

<p>Per inviare l'intestazione contente il corretto Content-Type per le
traduzione in spagnolo dei file HTML, PDF e di testo semplice, Apache deve
essere istruito sull'uso del tipo corretto in questo modo:</p>

<pre>
&lt;Files *.html.es>
  ForceType text/html
&lt;/Files>

&lt;Files *.pdf.es>
  ForceType application/pdf
&lt;/Files>

&lt;Files *.txt.es>
  ForceType text/plain
&lt;/Files>
</pre>


<p>Per evitare problemi con la negoziazione dei contenuti delle pagine
in <a href="../events/">/events</a>, i file &ldquo;calendar&rdquo; devono
avere una priorit&agrave; pi&ugrave; bassa di text/html:</p>

<pre>
AddType text/calendar;qs=0.9 .ics
</pre>


<h4>Reindirizzamento</h4>

<p>Poichè alcune parti del sito web stavano cominciando a essere troppo
grandi per essere copiate su molti siti, le abbiamo separate dal sito
principale. Sebbene la maggior parte dei collegamenti dovrebbe essere
convertita per usare le nuove locazioni, puoi aggiungere un
reindirizzamento ad un altro sito in modo che i collegamenti non
risultino errati. Questo può essere fatto in
<kbd>/etc/apache/srm.conf</kbd>. Per esempio:
</p>

<pre>
Redirect /Lists-Archives http://lists.debian.org/
Redirect /search http://search.debian.org
Redirect /Packages http://packages.debian.org
Redirect /lintian http://lintian.debian.org
</pre>

<h4>Host virtuali</h4>

<p>Il sito web Debian, cui si accede tramite <a
href="$(HOME)">www.debian.org</a> e svariati altri nomi, sfrutta delle
impostazioni GeoDNS per gestire il carico e selezionare il mirror più vicino
all'utente</p>

<p>Di conseguenza, Apache deve rendere il sito Debian disponibile attraverso
vari host virtuali, in questo modo:</p>

<pre>ServerAlias www.debian.org www.debian.com debian.org www.*.debian.org</pre>
