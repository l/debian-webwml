#use wml::debian::template title="Esempio d'uso di rsync e di come attivare ssh senza password"
<!--translation 1.4-->

<H3>Esempio di uso di rsync</H3>

<P>Il seguente è un esempio che farà il mirror sia del sito web che
	  del sito ftp. Si dovranno modificare il nome della macchina e le
	  directory coinvolte per adattarle alla propria situazione. 

<P>Il lockfile è utile se lo si usa come un cron job. Se, per
	  qualsiasi ragione, il mirror non viene completato, la volta
	  successiva che si proverà a fare il mirror si riceverà una
	  mail. Si può così scoprire dov'è il problema, analizzarlo,
	  correggerlo, cancellare il lockfile e la prossima volta che lo
	  si esegue il mirror funzionerà correttamente.

<blockquote>
<pre>
\#!/bin/bash -e

lockfile -r 1 rsync.master.lock || exit 23

rsync -avz -e ssh --exclude .glbuild --delete &lt;machine&gt;:/web/debian.org/ debian.org
rsync -avz -e ssh --delete &lt;machine&gt;:/web/debian.org-local/ debian.org-local

echo Terminato l'aggiornamento web. Ora inizio con FTP.

rsync -avz --delete -e ssh &lt;machine&gt;:/debian debian

rm -f rsync.master.lock
</pre>
</blockquote>

<p>Lo script precedente chiederà una password fintantoché non si
configura ssh come mostrato sotto.

<H3><a name="paswordlessssh">Come configurare ssh in modo che non venga chiesta la password:</a></H3>

<p>Puoi creare una chiave RSA per  poter accedere al sito remoto dal tuo
account, senza avere bisogno di inserire la password.

<p>Nota che una volta che tutto ciò è configurato, se un estraneo si inserisce
sul tuo account avrà accesso libero anche al sistema remoto. Per questo motivo
è meglio che questo non sia fatto da <strong>mai</strong> root.

<ul>
  <li>Esegui <code>ssh-keygen</code> sulla tua macchina e premi return quando
      ti è chiesta la password [1].
  <li>Aggiungi il contenuto di <code>~/.ssh/identity.pub</code> dalla tua
      macchina a <code>~/.ssh/authorized_keys</code> sul sito remoto (il file deve
      avere modo 600.)
</ul>

<p>Dovresti adesso avere la possibilità di utilizzare ssh per collegarti al
sistema remoto senza che ti sia richiesta la password.
