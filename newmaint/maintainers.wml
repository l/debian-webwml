<?
  include("config.inc");
  include("common.inc");

  function print_applicants($db, $sql) {
  if (! ($query = pg_exec($db, $sql))) {
    echo "Problem with query", pg_ErrorMessage($db), "<BR>";
    return FALSE;
  }
  $rows = pg_NumRows($query);
  if ($rows) {
      echo "<TABLE border=\"0\" summary=\"\">\n";
      for ($i = 0 ; $i < $rows ; $i++) {
        $row = pg_Fetch_Array($query, $i);
        echo "<TR>";
        print_flag($row["advocate_ok"],"<TD><IMG src=\"/images/shake.png\" alt=\"V\"></TD>","<TD> </TD>");
        print_flag($row["id_ok"],"<TD><IMG src=\"/images/mag.png\" alt=\"I\"></TD>","<TD> </TD>");
        print_flag($row["pnp_ok"],"<TD><IMG src=\"/images/dfsg.png\" alt=\"P\"></TD>","<TD> </TD>");
        print_flag($row["tns_ok"],"<TD><IMG src=\"/images/hammer.png\" alt=\"T\"></TD>","<TD> </TD>");
        print_flag($row["approved"],"<TD><IMG src=\"/images/thumb.png\" alt=\"A\"></TD>","<TD> </TD>");
        print_flag($row["da_approved"],"<TD><IMG src=\"/images/new.png\" alt=\"N\"></TD>","<TD> </TD>");
        if ($row["approved"] == "f" || $row["da_approved"] == "f") {
            echo "<TD><IMG src=\"/images/hold.png\" alt=\"H\"></TD>";
        } else {
            echo "<TD> </TD>";
        }
        echo "<TD><A href=\"nmstatus.php?email=", urlencode($row["email"]), "\">",
          $row["forename"], " ", $row["surname"], " &lt;",
          $row["email"], "&gt;</A></TD></TR>\n";
      }
      echo "</TABLE>\n";
  } else {
      echo "none\n";
  }
  return TRUE;
}?>
#use wml::nmpage title="Debian New Maintainer - Maintainers List"
<H1>Debian New Maintainer - Maintainers List</H1><BR>
<P>The following are applicants that have successfully passed through the
New Maintainer process more than 6 months ago:<BR>
<?
   if ( ($db = open_db())) {
?>
<? $sql = "SELECT * from applicant WHERE newmaint IS NOT NULL AND CURRENT_TIMESTAMP - newmaint >= '6 months' ORDER BY newmaint DESC";
   print_applicants($db, $sql); ?>
<BR>

<H3>Key</H3>
<UL>
<LI><IMG src="/images/shake.png" alt="V"> : Advocate
<LI><IMG src="/images/mag.png" alt="I"> : Identification complete
<LI><IMG src="/images/dfsg.png" alt="P"> : Philosophy and Procedures complete
<LI><IMG src="/images/hammer.png" alt="T"> : Tasks and Skills complete
<LI><IMG src="/images/thumb.png" alt="A"> : Application Manager Recommends applicant
<LI><IMG src="/images/new.png" alt="N"> : New Debian maintainer
<LI><IMG src="/images/hold.png" alt="H"> : On hold
</UL>
<? } # DB ok ?>
