<?
  session_start();
  include("config.inc");
  include("common.inc");

  function delete_applicant($email) {
  global $row, $query;
  if (! ($db = open_db())) {
    return FALSE;
  }
  $sql = "DELETE from applicant WHERE email='$email'";
  if (! ($query = pg_exec($db, $sql))) {
    echo "Problem with query", pg_ErrorMessage($db), "<BR>";
    echo "SQL was: $sql<BR>\n";
    return FALSE;
  }
  if (pg_numRows($query) < 1) {
    echo "No applicant with email address $email<BR>";
    return FALSE;
  }
  return TRUE;
}
?>
#use wml::nmpage title="Debian New Maintainer - Delete Applicant"
<?
  if (!session_is_registered("s_username") || !session_is_registered("s_isam") || !session_is_registered("s_isfd")) {
?>
<STRONG>
You should not be here!!</STRONG>
<? } else { 
  session_register("s_username");
  session_register("s_isfd");
  session_register("s_isdam");
  # Strip guff
  $email = strip_tags($email);
?>
<H1>Debian New Maintainer Status</H1><BR>
<? if ($s_isfd == 't' && $email != "") { ?>
<H3>Deleting Applicant</H3>
<?
    if (delete_applicant($email)) {
?>
<P>Successfully deleted <? echo $email; ?> from the list of applicants.
<? } else { ?>
<P> Could not delete <? echo $email; ?> from list of applicants.
<? } # check database query ?>
<? } else { #you are not a fd, go away ?>
<P>What are you doing here huh? This place is for Front Desk people!!
<? } } ?>
