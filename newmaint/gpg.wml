<?
  include("gpgconfig.inc");
  include("common.inc");
  include("gpgcommon.inc");
?>
#use wml::gpgpage title="GPG Signing Coordination Page"
<?

    if (! ($db = open_db())) {
        echo "<P>Cannot open SQL database</P>";
        return FALSE;
    }

    function print_people($db, $sql) {
        if (! ($query = pg_exec($db, $sql))) {
            echo "Problem with query", pg_ErrorMessage($db), "<BR>";
            return FALSE;
        }
        $rows = pg_NumRows($query);
        for ($i = 0; $i < $rows; $i++) {
            $row = pg_Fetch_Array($query, $i);
            echo "<H2>";
            echo $row["forename"], " ", $row["surname"];
            echo " &lt;", $row["email"], "&gt;";
            echo "</H2>\n";

            print_all_places($row["id"], FALSE);

        }
    }
?>

<H1>People looking for GPG Signing</H1>
<?
    $sql = "SELECT id, forename, surname, email FROM people WHERE offer is FALSE ORDER BY surname";
    print_people($db, $sql);
?>

<HR>

<H1>People offering GPG Signing</H1>
<?
    $sql = "SELECT id, forename, surname, email FROM people WHERE offer is TRUE ORDER BY surname";
    print_people($db, $sql);
?>

<P>

